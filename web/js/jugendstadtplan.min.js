angular.module("jugendstadtplan.links",[]),angular.module("jugendstadtplan.pins",["ui.router","jugendstadtplan.links"]),angular.module("jugendstadtplan.startseite",["ui.router","leaflet-directive"]),angular.module("jugendstadtplan.traeger",["ui.router"]);var Jugendstadtplan=Jugendstadtplan||{};Jugendstadtplan.Controllers=angular.module("jugendstadtplan.controllers",[]),angular.module("jugendstadtplan",["ngResource","ngSanitize","ui.router","leaflet-directive","textAngular","angularFileUpload","jugendstadtplan.api","jugendstadtplan.startseite","jugendstadtplan.pins","jugendstadtplan.traeger","jugendstadtplan.controllers"]).config(function(e,n){n.otherwise("/startseite")}).run(function(){}).controller("AppCtrl",["$scope","$location",function(e,n){e.$on("$stateChangeSuccess",function(n,t,r,a,i){angular.isDefined(t.data.pageTitle)&&(e.pageTitle=t.data.pageTitle+" | Jugendstadtplan")})}]),angular.module("plusOne",[]).directive("plusOne",function(){return{link:function(e,n,t){gapi.plusone.render(n[0],{size:"medium",href:"http://bit.ly/ngBoilerplate"})}}});var jugendstadtplanApi=angular.module("jugendstadtplan.api",["ngResource"]),backendPrefix="/app_dev.php";jugendstadtplanApi.provider("Pin",function(){this.$get=["$resource",function(e){var n=backendPrefix+"/pins";return e(n,{},{get:{method:"GET",url:n+"/:id",params:{id:"@id"}},update:{method:"PUT",url:n+"/update/:id",params:{id:"@id"}},save:{method:"POST",url:n+"/create"},"delete":{method:"DELETE",url:n+"/delete/:id",params:{id:"@id"}}})}]}),jugendstadtplanApi.provider("Traeger",function(){this.$get=["$resource",function(e){var n=backendPrefix+"/traeger";return e(n,{},{get:{method:"GET",url:n+"/:id",params:{id:"@id"}},update:{method:"PUT",url:n+"/update/:id",params:{id:"@id"}},save:{method:"POST",url:n+"/create"},"delete":{method:"DELETE",url:n+"/delete/:id",params:{id:"@id"}}})}]}),jugendstadtplanApi.provider("Kategorie",function(){this.$get=["$resource",function(e){var n=backendPrefix+"/kategorie";return e(n)}]}),Jugendstadtplan.Controllers.controller("LinksFormController",["$scope",function(e){e.newLink={},e.addLink=function(){void 0===e.model.links&&(e.model.links=[]),e.model.links.push(e.newLink),e.newLink={}},e.isLinkValid=function(e){return void 0===e.titel||0===e.titel.length?!1:void 0===e.url||0===e.url.length?!1:!0}}]),angular.module("jugendstadtplan.pins").config(function(e){e.state("Detail: Pin",{url:"/pin/{id:[0-9]+}",views:{main:{controller:"PinDetailController",templateUrl:"src/app/pins/views/detail.tpl.html"}},resolve:{pinDetail:["$stateParams","Pin",function(e,n){return n.get({},{id:e.id})}]},data:{pageTitle:"Pin"}})}),Jugendstadtplan.Controllers.controller("PinDetailController",["$scope","pinDetail",function(e,n){e.markers=[],e.center={lat:50.732829246726,lng:7.0937004090117,zoom:13},n.$promise.then(function(){e.pin=n,angular.extend(e,{defaults:{scrollWheelZoom:!1}}),e.center={lat:n.latitude,lng:n.longitude,zoom:15};var t={lat:n.latitude,lng:n.longitude,title:n.titel,focus:!0,message:"<h3>"+n.titel+"</h3>"+n.beschreibung};e.markers.push(t)},function(){angular.extend(e,{defaults:{scrollWheelZoom:!1}})})}]),angular.module("jugendstadtplan.pins").config(function(e){e.state("Form: Pin",{url:"/pin/create",views:{main:{controller:"PinFormController",templateUrl:"src/app/pins/views/form.tpl.html"}},data:{pageTitle:"Pin erstellen"}})}),Jugendstadtplan.Controllers.controller("PinFormController",["$scope","$location","Pin","Traeger","Kategorie",function(e,n,t,r,a){e.kategorien=a.query(),e.pin=new t,e.pins=t.query(),e.traegers=r.query(),angular.extend(e,{center:{lat:50.732829246726,lng:7.0937004090117,zoom:13},defaults:{scrollWheelZoom:!1},events:{}}),e.pin.markers=[],e.$on("leafletDirectiveMap.click",function(n,t){var r=t.leafletEvent;e.pin.markers[0]={lat:r.latlng.lat,lng:r.latlng.lng,draggable:!0,focus:!0}}),e.newPin=function(){e.pin=new t,e.pin.markers=[],e.editing=!1},e.save=function(){e.pin.id?t.update(e.pin):e.pin.$save().then(function(n){e.pins.push(n)}),e.newPin()},e.setActivePin=function(n){e.pin=n,e.pin.markers=[],null!=n.longitude&&(e.pin.markers[0]={lat:n.latitude,lng:n.longitude,draggable:!0,focus:!0}),e.editing=!0},e.remove=function(n){t["delete"](n,function(){var t=e.pins.indexOf(n);-1!=t&&e.pins.splice(t,1)})},e.barrierefreiheitsgrade=["Gut","Teilweise","Nicht barrierefrei"],e.kostenarten=["Kostenlos","Kostenpflichtig"],e.mindestalters=["ab 12","ab 16","ab 18","ab 21"],e.newAnsprechpartner={},e.addAnsprechpartner=function(){void 0===e.pin.ansprechpartner&&(e.pin.ansprechpartner=[]),e.pin.ansprechpartner.push(e.newAnsprechpartner),e.newAnsprechpartner={}},e.isAnsprechpartnerValid=function(e){return void 0===e.name||0===e.name.length?!1:void 0===e.email||0===e.email.length?!1:!0},e.wochentage=["Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag","Sonntag"],e.newTermin={},e.addTermin=function(){void 0===e.pin.termine&&(e.pin.termine=[]),e.pin.termine.push(e.newTermin),e.newTermin={}},e.isTerminValid=function(e){return void 0===e.beginn||0===e.beginn?!1:e.ganztaegig===!0||void 0!==e.beginn_uhrzeit&&0!==e.beginn_uhrzeit?!0:!1},e.woche_des_monats=[{id:0,label:"Jede Woche"},{id:1,label:"Jede 1. Woche"},{id:2,label:"Jede 2. Woche"},{id:3,label:"Jede 3. Woche"},{id:4,label:"Jede 4. Woche"},{id:5,label:"Jede 5. Woche"}],e.newWiederholung={},e.addWiederholung=function(){void 0===e.newTermin.wiederholungen&&(e.newTermin.wiederholungen=[]),e.newTermin.wiederholungen.push(e.newWiederholung),e.newWiederholung={}},e.isWiederholungValid=function(e){return void 0===e.wochentag||0===e.wochentag?!1:!0},e.newLink={},e.addLink=function(){void 0===e.pin.links&&(e.pin.links=[]),e.pin.links.push(e.newLink),e.newLink={}},e.isLinkValid=function(e){return void 0===e.titel||0===e.titel.length?!1:void 0===e.url||0===e.url.length?!1:!0}}]),angular.module("jugendstadtplan.pins").config(function(e){e.state("Liste: Pin",{url:"/pins",views:{main:{controller:"PinsController",templateUrl:"src/app/pins/views/list.tpl.html"}},data:{pageTitle:"Pins"}})}),Jugendstadtplan.Controllers.controller("PinsController",["$scope","$location","Pin",function(e,n,t){e.pins=t.query(),e.viewPin=function(e){n.path("/pin/"+e.id)}}]),angular.module("jugendstadtplan.startseite").config(function(e){e.state("Startseite",{url:"/startseite",views:{main:{controller:"StartseiteController",templateUrl:"src/app/startseite/views/startseite.tpl.html"}},data:{pageTitle:"Startseite"}})}),angular.module("jugendstadtplan.startseite").controller("StartseiteController",["$scope","$location","Pin",function(e,n,t){angular.extend(e,{center:{lat:50.732829246726,lng:7.0937004090117,zoom:13},defaults:{scrollWheelZoom:!1}}),e.markers=[],t.query(function(n){angular.forEach(n,function(n){if(null!=n.longitude){var t={lat:n.latitude,lng:n.longitude,title:n.titel,message:"<h3>"+n.titel+"</h3>"+n.beschreibung+'<small><a href="/#/pin/'+n.id+'">Mehr</a></small>'};e.markers.push(t)}})})}]),angular.module("jugendstadtplan.traeger").config(function(e){e.state("Liste: Traeger",{url:"/traeger",views:{main:{controller:"TraegerController",templateUrl:"src/app/traeger/views/liste.tpl.html"}},data:{pageTitle:"Träger"}})}),Jugendstadtplan.Controllers.controller("TraegerController",["$scope","$location","Traeger",function(e,n,t){e.traeger=t.query(),e.viewTraeger=function(e){n.path("/traeger/"+e.id)}}]),angular.module("jugendstadtplan.traeger").config(function(e){e.state("Detail: Traeger",{url:"/traeger/{id:[0-9]+}",views:{main:{controller:"TraegerDetailController",templateUrl:"src/app/traeger/views/detail.tpl.html"}},resolve:{traegerDetail:["$stateParams","Traeger",function(e,n){return n.get({},{id:e.id})}]},data:{pageTitle:"Träger"}})}),Jugendstadtplan.Controllers.controller("TraegerDetailController",["$scope","traegerDetail",function(e,n){e.traeger=n,angular.extend(e,{center:{lat:50.732829246726,lng:7.0937004090117,zoom:13},defaults:{scrollWheelZoom:!1}}),e.markers=[],n.$promise.then(function(){angular.forEach(n.pins,function(n,t){var r={lat:n.latitude,lng:n.longitude,title:n.titel,message:"<h3>"+n.titel+"</h3>"+n.beschreibung+'<small><a href="/#/pin/'+n.id+'">Mehr</a></small>'};e.markers.push(r)})})}]),angular.module("jugendstadtplan.traeger").config(function(e){e.state("Form: Traeger",{url:"/traeger/create",views:{main:{controller:"TraegerFormController",templateUrl:"src/app/traeger/views/form.tpl.html"}},data:{pageTitle:"Träger erstellen"}})}),Jugendstadtplan.Controllers.controller("TraegerFormController",["$scope","$location","Traeger","Kategorie","$upload",function(e,n,t,r,a){e.kategorien=r.query(),e.traeger=new t,e.traegers=t.query(),e.newTraeger=function(){e.traeger=new t,e.editing=!1},e.save=function(){e.traeger.id?t.update(e.traeger).then(function(){e.newTraeger()},function(){alert("Ein Träger mit dieser Email-Adresse existiert bereits!")}):e.traeger.$save().then(function(n){e.traegers.push(n),e.newTraeger()},function(){alert("Ein Träger mit dieser Email-Adresse existiert bereits!")})},e.setActiveTraeger=function(n){e.traeger=n,e.editing=!0},e.remove=function(n){t["delete"](n,function(){var t=e.traegers.indexOf(n);-1!=t&&e.traegers.splice(t,1)})},e.onFileSelect=function(n){for(var t=function(n){a.upload({url:"app_dev.php/img/upload",method:"POST",data:{myObj:e.myModelObj},file:n}).progress(function(e){console.log("percent: "+parseInt(100*e.loaded/e.total))}).success(function(t,r,a,i){void 0===e.traeger.bilder&&(e.traeger.bilder=[]),n.tmp_name=t.folder,e.traeger.bilder.push(n)})},r=0;r<n.length;r++){var i=n[r];e.upload=t(i)}},e.newAnsprechpartner={},e.addAnsprechpartner=function(){void 0===e.traeger.ansprechpartner&&(e.traeger.ansprechpartner=[]),e.traeger.ansprechpartner.push(e.newAnsprechpartner),e.newAnsprechpartner={}},e.isAnsprechpartnerValid=function(e){return void 0===e.name||0===e.name.length?!1:void 0===e.email||0===e.email.length?!1:!0},e.newAdresse={},e.addAdresse=function(){void 0===e.traeger.adressen&&(e.traeger.adressen=[]),e.traeger.adressen.push(e.newAdresse),e.newAdresse={}},e.isAdresseValid=function(e){return void 0===e.strasse||0===e.strasse.length?!1:void 0===e.ort||0===e.ort.length?!1:!0}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9saW5rcy9MaW5rc01vZHVsZS5qcyIsImFwcC9waW5zL1BpbnNNb2R1bGUuanMiLCJhcHAvc3RhcnRzZWl0ZS9TdGFydHNlaXRlTW9kdWxlLmpzIiwiYXBwL3RyYWVnZXIvVHJhZWdlck1vZHVsZS5qcyIsImFwcC9hcHAuanMiLCJjb21tb24vcGx1c09uZS9wbHVzT25lLmpzIiwiY29tbW9uL3Jlc291cmNlcy9KdWdlbmRzdGFkdHBsYW5BcGkuanMiLCJhcHAvbGlua3MvTGlua3NGb3JtQ29udHJvbGxlci5qcyIsImFwcC9waW5zL1BpbkRldGFpbENvbnRyb2xsZXIuanMiLCJhcHAvcGlucy9QaW5Gb3JtQ29udHJvbGxlci5qcyIsImFwcC9waW5zL1BpbnNDb250cm9sbGVyLmpzIiwiYXBwL3N0YXJ0c2VpdGUvU3RhcnRzZWl0ZUNvbnRyb2xsZXIuanMiLCJhcHAvdHJhZWdlci9UcmFlZ2VyQ29udHJvbGxlci5qcyIsImFwcC90cmFlZ2VyL1RyYWVnZXJEZXRhaWxDb250cm9sbGVyLmpzIiwiYXBwL3RyYWVnZXIvVHJhZWdlckZvcm1Db250cm9sbGVyLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJKdWdlbmRzdGFkdHBsYW4iLCJDb250cm9sbGVycyIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwib3RoZXJ3aXNlIiwicnVuIiwiY29udHJvbGxlciIsIiRzY29wZSIsIiRsb2NhdGlvbiIsIiRvbiIsImV2ZW50IiwidG9TdGF0ZSIsInRvUGFyYW1zIiwiZnJvbVN0YXRlIiwiZnJvbVBhcmFtcyIsImlzRGVmaW5lZCIsImRhdGEiLCJwYWdlVGl0bGUiLCJkaXJlY3RpdmUiLCJsaW5rIiwic2NvcGUiLCJlbGVtZW50IiwiYXR0cnMiLCJnYXBpIiwicGx1c29uZSIsInJlbmRlciIsInNpemUiLCJocmVmIiwianVnZW5kc3RhZHRwbGFuQXBpIiwiYmFja2VuZFByZWZpeCIsInByb3ZpZGVyIiwidGhpcyIsIiRnZXQiLCIkcmVzb3VyY2UiLCJiYWNrZW5kVXJsIiwiZ2V0IiwibWV0aG9kIiwidXJsIiwicGFyYW1zIiwiaWQiLCJ1cGRhdGUiLCJzYXZlIiwiZGVsZXRlIiwibmV3TGluayIsImFkZExpbmsiLCJ1bmRlZmluZWQiLCJtb2RlbCIsImxpbmtzIiwicHVzaCIsImlzTGlua1ZhbGlkIiwidGl0ZWwiLCJsZW5ndGgiLCJzdGF0ZSIsInZpZXdzIiwibWFpbiIsInRlbXBsYXRlVXJsIiwicmVzb2x2ZSIsInBpbkRldGFpbCIsIiRzdGF0ZVBhcmFtcyIsIlBpbiIsIm1hcmtlcnMiLCJjZW50ZXIiLCJsYXQiLCJsbmciLCJ6b29tIiwiJHByb21pc2UiLCJ0aGVuIiwicGluIiwiZXh0ZW5kIiwiZGVmYXVsdHMiLCJzY3JvbGxXaGVlbFpvb20iLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsIm1hcmtlciIsInRpdGxlIiwiZm9jdXMiLCJtZXNzYWdlIiwiYmVzY2hyZWlidW5nIiwiVHJhZWdlciIsIkthdGVnb3JpZSIsImthdGVnb3JpZW4iLCJxdWVyeSIsInBpbnMiLCJ0cmFlZ2VycyIsImV2ZW50cyIsImFyZ3MiLCJsZWFmRXZlbnQiLCJsZWFmbGV0RXZlbnQiLCJsYXRsbmciLCJkcmFnZ2FibGUiLCJuZXdQaW4iLCJlZGl0aW5nIiwiJHNhdmUiLCJyZXNwb25zZSIsInNldEFjdGl2ZVBpbiIsInJlbW92ZSIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsImJhcnJpZXJlZnJlaWhlaXRzZ3JhZGUiLCJrb3N0ZW5hcnRlbiIsIm1pbmRlc3RhbHRlcnMiLCJuZXdBbnNwcmVjaHBhcnRuZXIiLCJhZGRBbnNwcmVjaHBhcnRuZXIiLCJhbnNwcmVjaHBhcnRuZXIiLCJpc0Fuc3ByZWNocGFydG5lclZhbGlkIiwibmFtZSIsImVtYWlsIiwid29jaGVudGFnZSIsIm5ld1Rlcm1pbiIsImFkZFRlcm1pbiIsInRlcm1pbmUiLCJpc1Rlcm1pblZhbGlkIiwidGVybWluIiwiYmVnaW5uIiwiZ2FuenRhZWdpZyIsImJlZ2lubl91aHJ6ZWl0Iiwid29jaGVfZGVzX21vbmF0cyIsImxhYmVsIiwibmV3V2llZGVyaG9sdW5nIiwiYWRkV2llZGVyaG9sdW5nIiwid2llZGVyaG9sdW5nZW4iLCJpc1dpZWRlcmhvbHVuZ1ZhbGlkIiwid2llZGVyaG9sdW5nIiwid29jaGVudGFnIiwidmlld1BpbiIsInBhdGgiLCJmb3JFYWNoIiwiaXRlbSIsInRyYWVnZXIiLCJ2aWV3VHJhZWdlciIsInRyYWVnZXJEZXRhaWwiLCJrZXkiLCIkdXBsb2FkIiwibmV3VHJhZWdlciIsImFsZXJ0Iiwic2V0QWN0aXZlVHJhZWdlciIsIm9uRmlsZVNlbGVjdCIsIiRmaWxlcyIsImRvVXBsb2FkIiwiZmlsZSIsInVwbG9hZCIsIm15T2JqIiwibXlNb2RlbE9iaiIsInByb2dyZXNzIiwiZXZ0IiwiY29uc29sZSIsImxvZyIsInBhcnNlSW50IiwibG9hZGVkIiwidG90YWwiLCJzdWNjZXNzIiwic3RhdHVzIiwiaGVhZGVycyIsImJpbGRlciIsInRtcF9uYW1lIiwiZm9sZGVyIiwiaSIsIm5ld0FkcmVzc2UiLCJhZGRBZHJlc3NlIiwiYWRyZXNzZW4iLCJpc0FkcmVzc2VWYWxpZCIsImFkcmVzc2UiLCJzdHJhc3NlIiwib3J0Il0sIm1hcHBpbmdzIjoiQUFBQUEsUUFBQUMsT0FBQSw0QkNBQUQsUUFBQUMsT0FBQSx3QkFDQSxZQUFBLDBCQ0RBRCxRQUFBQyxPQUFBLDhCQUNBLFlBQ0Esc0JDRkFELFFBQUFDLE9BQUEsMkJBQ0EsYUNEQSxJQUFBQyxpQkFBQUEsbUJBQ0FBLGlCQUFBQyxZQUFBSCxRQUFBQyxPQUFBLGtDQUVBRCxRQUFBQyxPQUFBLG1CQUNBLGFBQ0EsYUFDQSxZQUNBLG9CQUNBLGNBQ0Esb0JBQ0Esc0JBQ0EsNkJBQ0EsdUJBQ0EsMEJBQ0EsZ0NBR0FHLE9BQUEsU0FBQUMsRUFBQUMsR0FDQUEsRUFBQUMsVUFBQSxpQkFHQUMsSUFBQSxjQUdBQyxXQUFBLFdBQUEsU0FBQSxZQUFBLFNBQUFDLEVBQUFDLEdBQ0FELEVBQUFFLElBQUEsc0JB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RUFBQW5CLEVBQUF2RixPQUFBMEcsSUFBQSxDQUNBLEdBQUFqQixHQUFBRixFQUFBbUIsRUFDQXRKLEdBQUFzSSxPQUFBRixFQUFBQyxLQU1BckksRUFBQStGLHNCQUNBL0YsRUFBQWdHLG1CQUFBLFdBQ0ExRCxTQUFBdEMsRUFBQTBILFFBQUF6QixrQkFDQWpHLEVBQUEwSCxRQUFBekIsb0JBRUFqRyxFQUFBMEgsUUFBQXpCLGdCQUFBeEQsS0FBQXpDLEVBQUErRixvQkFDQS9GLEVBQUErRix1QkFHQS9GLEVBQUFrRyx1QkFBQSxTQUFBRCxHQUNBLE1BQUEzRCxVQUFBMkQsRUFBQUUsTUFBQSxJQUFBRixFQUFBRSxLQUFBdkQsUUFDQSxFQUNBTixTQUFBMkQsRUFBQUcsT0FBQSxJQUFBSCxFQUFBRyxNQUFBeEQsUUFDQSxHQUVBLEdBS0E1QyxFQUFBdUosY0FDQXZKLEVBQUF3SixXQUFBLFdBQ0FsSCxTQUFBdEMsRUFBQTBILFFBQUErQixXQUNBekosRUFBQTBILFFBQUErQixhQUVBekosRUFBQTBILFFBQUErQixTQUFBaEgsS0FBQXpDLEVBQUF1SixZQUNBdkosRUFBQXVKLGVBR0F2SixFQUFBMEosZUFBQSxTQUFBQyxHQUNBLE1BQUFySCxVQUFBcUgsRUFBQUMsU0FBQSxJQUFBRCxFQUFBQyxRQUFBaEgsUUFDQSxFQUNBTixTQUFBcUgsRUFBQUUsS0FBQSxJQUFBRixFQUFBRSxJQUFBakgsUUFDQSxHQUVBIiwiZmlsZSI6Imp1Z2VuZHN0YWR0cGxhbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZSggJ2p1Z2VuZHN0YWR0cGxhbi5saW5rcycsIFtcbl0pOyIsImFuZ3VsYXIubW9kdWxlKCAnanVnZW5kc3RhZHRwbGFuLnBpbnMnLCBbXG4gICd1aS5yb3V0ZXInLCAnanVnZW5kc3RhZHRwbGFuLmxpbmtzJ1xuXSk7IiwiYW5ndWxhci5tb2R1bGUoICdqdWdlbmRzdGFkdHBsYW4uc3RhcnRzZWl0ZScsIFtcbiAgJ3VpLnJvdXRlcicsXG4gICdsZWFmbGV0LWRpcmVjdGl2ZSdcbl0pOyIsImFuZ3VsYXIubW9kdWxlKCAnanVnZW5kc3RhZHRwbGFuLnRyYWVnZXInLCBbXG4gICd1aS5yb3V0ZXInXG5dKTsiLCJ2YXIgSnVnZW5kc3RhZHRwbGFuID0gSnVnZW5kc3RhZHRwbGFuIHx8IHt9O1xuSnVnZW5kc3RhZHRwbGFuLkNvbnRyb2xsZXJzID0gYW5ndWxhci5tb2R1bGUoJ2p1Z2VuZHN0YWR0cGxhbi5jb250cm9sbGVycycsIFtdKTtcblxuYW5ndWxhci5tb2R1bGUoICdqdWdlbmRzdGFkdHBsYW4nLCBbXG4gICduZ1Jlc291cmNlJyxcbiAgJ25nU2FuaXRpemUnLFxuICAndWkucm91dGVyJyxcbiAgJ2xlYWZsZXQtZGlyZWN0aXZlJyxcbiAgJ3RleHRBbmd1bGFyJyxcbiAgJ2FuZ3VsYXJGaWxlVXBsb2FkJyxcbiAgJ2p1Z2VuZHN0YWR0cGxhbi5hcGknLFxuICAnanVnZW5kc3RhZHRwbGFuLnN0YXJ0c2VpdGUnLFxuICAnanVnZW5kc3RhZHRwbGFuLnBpbnMnLFxuICAnanVnZW5kc3RhZHRwbGFuLnRyYWVnZXInLFxuICAnanVnZW5kc3RhZHRwbGFuLmNvbnRyb2xsZXJzJ1xuXSlcblxuLmNvbmZpZyggZnVuY3Rpb24gbXlBcHBDb25maWcgKCAkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyICkge1xuICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCAnL3N0YXJ0c2VpdGUnICk7XG59KVxuXG4ucnVuKCBmdW5jdGlvbiBydW4gKCkge1xufSlcblxuLmNvbnRyb2xsZXIoICdBcHBDdHJsJywgWyAnJHNjb3BlJywgJyRsb2NhdGlvbicsIGZ1bmN0aW9uIEFwcEN0cmwoICRzY29wZSwgJGxvY2F0aW9uICl7XG4gICRzY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbihldmVudCwgdG9TdGF0ZSwgdG9QYXJhbXMsIGZyb21TdGF0ZSwgZnJvbVBhcmFtcyl7XG4gICAgaWYgKCBhbmd1bGFyLmlzRGVmaW5lZCggdG9TdGF0ZS5kYXRhLnBhZ2VUaXRsZSApICkge1xuICAgICAgJHNjb3BlLnBhZ2VUaXRsZSA9IHRvU3RhdGUuZGF0YS5wYWdlVGl0bGUgKyAnIHwgSnVnZW5kc3RhZHRwbGFuJyA7XG4gICAgfVxuICB9KTtcbn1dKVxuXG47IiwiYW5ndWxhci5tb2R1bGUoICdwbHVzT25lJywgW10gKVxuXG4uZGlyZWN0aXZlKCAncGx1c09uZScsIGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIGxpbms6IGZ1bmN0aW9uKCBzY29wZSwgZWxlbWVudCwgYXR0cnMgKSB7XG4gICAgICBnYXBpLnBsdXNvbmUucmVuZGVyKCBlbGVtZW50WzBdLCB7XG4gICAgICAgIFwic2l6ZVwiOiBcIm1lZGl1bVwiLFxuICAgICAgICBcImhyZWZcIjogXCJodHRwOi8vYml0Lmx5L25nQm9pbGVycGxhdGVcIlxuICAgICAgfSk7XG4gICAgfVxuICB9O1xufSlcblxuO1xuXG4iLCJ2YXIganVnZW5kc3RhZHRwbGFuQXBpID0gYW5ndWxhci5tb2R1bGUoJ2p1Z2VuZHN0YWR0cGxhbi5hcGknLCBbJ25nUmVzb3VyY2UnXSk7XG5cbnZhciBiYWNrZW5kUHJlZml4ID0gJy9hcHBfZGV2LnBocCc7XG5cbmp1Z2VuZHN0YWR0cGxhbkFwaS5wcm92aWRlcignUGluJywgZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kZ2V0ID0gWyckcmVzb3VyY2UnLCBmdW5jdGlvbiAoJHJlc291cmNlKSB7XG4gICAgICAgIHZhciBiYWNrZW5kVXJsID0gYmFja2VuZFByZWZpeCArICcvcGlucyc7XG4gICAgICAgIHJldHVybiAkcmVzb3VyY2UoYmFja2VuZFVybCwge30sIHtcbiAgICAgICAgICAgIGdldDoge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgdXJsOiBiYWNrZW5kVXJsICsgJy86aWQnLFxuICAgICAgICAgICAgICAgIHBhcmFtczogeyBpZDonQGlkJ31cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1cGRhdGU6IHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICAgICAgICAgIHVybDogYmFja2VuZFVybCArICcvdXBkYXRlLzppZCcsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiB7IGlkOidAaWQnfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNhdmU6IHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICB1cmw6IGJhY2tlbmRVcmwgKyAnL2NyZWF0ZSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZWxldGU6IHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICAgICAgICAgIHVybDogYmFja2VuZFVybCArICcvZGVsZXRlLzppZCcsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiB7IGlkOidAaWQnfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XTtcbn0pO1xuXG5qdWdlbmRzdGFkdHBsYW5BcGkucHJvdmlkZXIoJ1RyYWVnZXInLCBmdW5jdGlvbigpIHtcbiAgICB0aGlzLiRnZXQgPSBbJyRyZXNvdXJjZScsIGZ1bmN0aW9uICgkcmVzb3VyY2UpIHtcbiAgICAgICAgdmFyIGJhY2tlbmRVcmwgPSBiYWNrZW5kUHJlZml4ICsgJy90cmFlZ2VyJztcbiAgICAgICAgcmV0dXJuICRyZXNvdXJjZShiYWNrZW5kVXJsLCB7fSwge1xuICAgICAgICAgICAgZ2V0OiB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICB1cmw6IGJhY2tlbmRVcmwgKyAnLzppZCcsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiB7IGlkOidAaWQnfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHVwZGF0ZToge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgICAgICAgICAgdXJsOiBiYWNrZW5kVXJsICsgJy91cGRhdGUvOmlkJyxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHsgaWQ6J0BpZCd9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2F2ZToge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIHVybDogYmFja2VuZFVybCArICcvY3JlYXRlJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlbGV0ZToge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgICAgICAgICAgdXJsOiBiYWNrZW5kVXJsICsgJy9kZWxldGUvOmlkJyxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHsgaWQ6J0BpZCd9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1dO1xufSk7XG5cbmp1Z2VuZHN0YWR0cGxhbkFwaS5wcm92aWRlcignS2F0ZWdvcmllJywgZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kZ2V0ID0gWyckcmVzb3VyY2UnLCBmdW5jdGlvbiAoJHJlc291cmNlKSB7XG4gICAgICAgIHZhciBiYWNrZW5kVXJsID0gYmFja2VuZFByZWZpeCArICcva2F0ZWdvcmllJztcbiAgICAgICAgcmV0dXJuICRyZXNvdXJjZShiYWNrZW5kVXJsKTtcbiAgICB9XTtcbn0pOyIsIkp1Z2VuZHN0YWR0cGxhbi5Db250cm9sbGVycy5jb250cm9sbGVyKCAnTGlua3NGb3JtQ29udHJvbGxlcicsIFsgJyRzY29wZScsXG4gICAgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgIC8vIExpbmtzXG4gICAgICAgIC8vIExpbmtzXG4gICAgICAgICRzY29wZS5uZXdMaW5rID0ge307XG4gICAgICAgICRzY29wZS5hZGRMaW5rID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoJHNjb3BlLm1vZGVsLmxpbmtzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUubW9kZWwubGlua3MgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRzY29wZS5tb2RlbC5saW5rcy5wdXNoKCRzY29wZS5uZXdMaW5rKTtcbiAgICAgICAgICAgICRzY29wZS5uZXdMaW5rID0ge307XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmlzTGlua1ZhbGlkID0gZnVuY3Rpb24obGluaykge1xuICAgICAgICAgICAgaWYgKGxpbmsudGl0ZWwgPT09IHVuZGVmaW5lZCB8fCBsaW5rLnRpdGVsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGluay51cmwgPT09IHVuZGVmaW5lZCB8fCBsaW5rLnVybC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICB9XSk7IiwiYW5ndWxhci5tb2R1bGUoJ2p1Z2VuZHN0YWR0cGxhbi5waW5zJykuY29uZmlnKGZ1bmN0aW9uIGNvbmZpZyggJHN0YXRlUHJvdmlkZXIgKSB7XG4gIFxuICAkc3RhdGVQcm92aWRlci5zdGF0ZSggJ0RldGFpbDogUGluJywge1xuICAgIHVybDogJy9waW4ve2lkOlswLTldK30nLFxuICAgIHZpZXdzOiB7XG4gICAgICBcIm1haW5cIjoge1xuICAgICAgICBjb250cm9sbGVyOiAnUGluRGV0YWlsQ29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnc3JjL2FwcC9waW5zL3ZpZXdzL2RldGFpbC50cGwuaHRtbCdcbiAgICAgIH1cbiAgICB9LFxuICAgIHJlc29sdmU6IHtcbiAgICAgIHBpbkRldGFpbDogWyAnJHN0YXRlUGFyYW1zJywgJ1BpbicsIGZ1bmN0aW9uKCRzdGF0ZVBhcmFtcywgUGluKSB7XG4gICAgICAgIHJldHVybiBQaW4uZ2V0KHt9LHtpZDogJHN0YXRlUGFyYW1zLmlkfSk7XG4gICAgICB9XVxuICAgIH0sXG4gICAgZGF0YTp7IHBhZ2VUaXRsZTogJ1BpbicgfVxuICB9KTtcblxufSk7XG5cbkp1Z2VuZHN0YWR0cGxhbi5Db250cm9sbGVycy5jb250cm9sbGVyKCAnUGluRGV0YWlsQ29udHJvbGxlcicsIFsgJyRzY29wZScsICdwaW5EZXRhaWwnLCBmdW5jdGlvbiBQaW5EZXRhaWxDb250cm9sbGVyKCAkc2NvcGUsIHBpbkRldGFpbCApIHtcbiAgICAkc2NvcGUubWFya2VycyA9IFtdO1xuICAgICRzY29wZS5jZW50ZXIgPSB7XG4gICAgICAgIGxhdDogNTAuNzMyODI5MjQ2NzI2LFxuICAgICAgICBsbmc6IDcuMDkzNzAwNDA5MDExNyxcbiAgICAgICAgem9vbTogMTNcbiAgICB9O1xuXG4gICAgcGluRGV0YWlsLiRwcm9taXNlLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkc2NvcGUucGluID0gcGluRGV0YWlsO1xuXG4gICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCgkc2NvcGUsIHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgICAgICAgICBzY3JvbGxXaGVlbFpvb206IGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICRzY29wZS5jZW50ZXIgPSB7XG4gICAgICAgICAgICAgICAgbGF0OiBwaW5EZXRhaWwubGF0aXR1ZGUsXG4gICAgICAgICAgICAgICAgbG5nOiBwaW5EZXRhaWwubG9uZ2l0dWRlLFxuICAgICAgICAgICAgICAgIHpvb206IDE1XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgbWFya2VyID0ge1xuICAgICAgICAgICAgICAgIGxhdDogcGluRGV0YWlsLmxhdGl0dWRlLFxuICAgICAgICAgICAgICAgIGxuZzogcGluRGV0YWlsLmxvbmdpdHVkZSxcbiAgICAgICAgICAgICAgICB0aXRsZTogcGluRGV0YWlsLnRpdGVsLFxuICAgICAgICAgICAgICAgIGZvY3VzOiB0cnVlLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICc8aDM+JyArIHBpbkRldGFpbC50aXRlbCArICc8L2gzPicgKyBwaW5EZXRhaWwuYmVzY2hyZWlidW5nLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICRzY29wZS5tYXJrZXJzLnB1c2gobWFya2VyKTtcbiAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCgkc2NvcGUsIHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgICAgICAgICBzY3JvbGxXaGVlbFpvb206IGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICApO1xufV0pOyIsImFuZ3VsYXIubW9kdWxlKCdqdWdlbmRzdGFkdHBsYW4ucGlucycpLmNvbmZpZyhmdW5jdGlvbiBjb25maWcoICRzdGF0ZVByb3ZpZGVyICkge1xuXG4gICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoICdGb3JtOiBQaW4nLCB7XG4gICAgICAgIHVybDogJy9waW4vY3JlYXRlJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAgIFwibWFpblwiOiB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1BpbkZvcm1Db250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NyYy9hcHAvcGlucy92aWV3cy9mb3JtLnRwbC5odG1sJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkYXRhOnsgcGFnZVRpdGxlOiAnUGluIGVyc3RlbGxlbicgfVxuICAgIH0pO1xuXG59KTtcblxuSnVnZW5kc3RhZHRwbGFuLkNvbnRyb2xsZXJzLmNvbnRyb2xsZXIoICdQaW5Gb3JtQ29udHJvbGxlcicsIFsgJyRzY29wZScsICckbG9jYXRpb24nLCAnUGluJywgJ1RyYWVnZXInLCAnS2F0ZWdvcmllJywgZnVuY3Rpb24gUGluRm9ybUNvbnRyb2xsZXIoICRzY29wZSwgJGxvY2F0aW9uLCBQaW4sIFRyYWVnZXIsIEthdGVnb3JpZSApIHtcbiAgICAkc2NvcGUua2F0ZWdvcmllbiA9IEthdGVnb3JpZS5xdWVyeSgpO1xuICAgICRzY29wZS5waW4gPSBuZXcgUGluKCk7XG4gICAgJHNjb3BlLnBpbnMgPSBQaW4ucXVlcnkoKTtcbiAgICAkc2NvcGUudHJhZWdlcnMgPSBUcmFlZ2VyLnF1ZXJ5KCk7XG5cbiAgICBhbmd1bGFyLmV4dGVuZCgkc2NvcGUsIHtcbiAgICAgICAgY2VudGVyOiB7XG4gICAgICAgICAgICBsYXQ6IDUwLjczMjgyOTI0NjcyNixcbiAgICAgICAgICAgIGxuZzogNy4wOTM3MDA0MDkwMTE3LFxuICAgICAgICAgICAgem9vbTogMTNcbiAgICAgICAgfSxcbiAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICAgIHNjcm9sbFdoZWVsWm9vbTogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgZXZlbnRzOiB7fVxuICAgIH0pO1xuXG4gICAgJHNjb3BlLnBpbi5tYXJrZXJzID0gW107XG4gICAgJHNjb3BlLiRvbihcImxlYWZsZXREaXJlY3RpdmVNYXAuY2xpY2tcIiwgZnVuY3Rpb24oZXZlbnQsIGFyZ3Mpe1xuICAgICAgICB2YXIgbGVhZkV2ZW50ID0gYXJncy5sZWFmbGV0RXZlbnQ7XG5cbiAgICAgICAgJHNjb3BlLnBpbi5tYXJrZXJzWzBdID0ge1xuICAgICAgICAgICAgbGF0OiBsZWFmRXZlbnQubGF0bG5nLmxhdCxcbiAgICAgICAgICAgIGxuZzogbGVhZkV2ZW50LmxhdGxuZy5sbmcsXG4gICAgICAgICAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgICAgICAgICBmb2N1czogdHJ1ZVxuICAgICAgICB9O1xuICAgIH0pO1xuXG4gICAgJHNjb3BlLm5ld1BpbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2NvcGUucGluID0gbmV3IFBpbigpO1xuICAgICAgICAkc2NvcGUucGluLm1hcmtlcnMgPSBbXTtcbiAgICAgICAgJHNjb3BlLmVkaXRpbmcgPSBmYWxzZTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNhdmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCRzY29wZS5waW4uaWQpIHtcbiAgICAgICAgICAgIFBpbi51cGRhdGUoJHNjb3BlLnBpbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkc2NvcGUucGluLiRzYXZlKCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5waW5zLnB1c2gocmVzcG9uc2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgJHNjb3BlLm5ld1BpbigpO1xuICAgIH07XG5cbiAgICAkc2NvcGUuc2V0QWN0aXZlUGluID0gZnVuY3Rpb24ocGluKSB7XG4gICAgICAgICRzY29wZS5waW4gPSBwaW47XG4gICAgICAgICRzY29wZS5waW4ubWFya2VycyA9IFtdO1xuICAgICAgICBpZiAocGluLmxvbmdpdHVkZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAkc2NvcGUucGluLm1hcmtlcnNbMF0gPSB7XG4gICAgICAgICAgICAgICAgbGF0OiBwaW4ubGF0aXR1ZGUsXG4gICAgICAgICAgICAgICAgbG5nOiBwaW4ubG9uZ2l0dWRlLFxuICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBmb2N1czogdHJ1ZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAkc2NvcGUuZWRpdGluZyA9IHRydWU7XG4gICAgfTtcblxuICAgICRzY29wZS5yZW1vdmUgPSBmdW5jdGlvbihwaW4pIHtcbiAgICAgICAgUGluLmRlbGV0ZShwaW4sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gJHNjb3BlLnBpbnMuaW5kZXhPZihwaW4pO1xuICAgICAgICAgICAgaWYgKGluZGV4ICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnBpbnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuXG4gICAgLy8gQmFycmllcmVmcmVpaGVpdHNncmFkZVxuICAgICRzY29wZS5iYXJyaWVyZWZyZWloZWl0c2dyYWRlID0gWyAnR3V0JywgJ1RlaWx3ZWlzZScsICdOaWNodCBiYXJyaWVyZWZyZWknIF07XG5cblxuICAgIC8vIEtvc3RlbmFydGVuXG4gICAgJHNjb3BlLmtvc3RlbmFydGVuID0gWyAnS29zdGVubG9zJywgJ0tvc3RlbnBmbGljaHRpZycgXTtcblxuXG4gICAgLy8gTWluZGVzdGFsdGVyXG4gICAgJHNjb3BlLm1pbmRlc3RhbHRlcnMgPSBbICdhYiAxMicsICdhYiAxNicsICdhYiAxOCcsICdhYiAyMScgXTtcblxuXG4gICAgLy8gQW5zcHJlY2hwYXJ0bmVyXG4gICAgJHNjb3BlLm5ld0Fuc3ByZWNocGFydG5lciA9IHt9O1xuICAgICRzY29wZS5hZGRBbnNwcmVjaHBhcnRuZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCRzY29wZS5waW4uYW5zcHJlY2hwYXJ0bmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICRzY29wZS5waW4uYW5zcHJlY2hwYXJ0bmVyID0gW107XG4gICAgICAgIH1cbiAgICAgICAgJHNjb3BlLnBpbi5hbnNwcmVjaHBhcnRuZXIucHVzaCgkc2NvcGUubmV3QW5zcHJlY2hwYXJ0bmVyKTtcbiAgICAgICAgJHNjb3BlLm5ld0Fuc3ByZWNocGFydG5lciA9IHt9O1xuICAgIH07XG5cbiAgICAkc2NvcGUuaXNBbnNwcmVjaHBhcnRuZXJWYWxpZCA9IGZ1bmN0aW9uKGFuc3ByZWNocGFydG5lcikge1xuICAgICAgICBpZiAoYW5zcHJlY2hwYXJ0bmVyLm5hbWUgPT09IHVuZGVmaW5lZCB8fCBhbnNwcmVjaHBhcnRuZXIubmFtZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIGlmIChhbnNwcmVjaHBhcnRuZXIuZW1haWwgPT09IHVuZGVmaW5lZCB8fCBhbnNwcmVjaHBhcnRuZXIuZW1haWwubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuXG4gICAgLy8gV29jaGVudGFnZVxuICAgICRzY29wZS53b2NoZW50YWdlID0gWyAnTW9udGFnJywgJ0RpZW5zdGFnJywgJ01pdHR3b2NoJywgJ0Rvbm5lcnN0YWcnLCAnRnJlaXRhZycsICdTYW1zdGFnJywgJ1Nvbm50YWcnIF07XG5cblxuICAgIC8vIFRlcm1pblxuICAgICRzY29wZS5uZXdUZXJtaW4gPSB7fTtcbiAgICAkc2NvcGUuYWRkVGVybWluID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkc2NvcGUucGluLnRlcm1pbmUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgJHNjb3BlLnBpbi50ZXJtaW5lID0gW107XG4gICAgICAgIH1cbiAgICAgICAgJHNjb3BlLnBpbi50ZXJtaW5lLnB1c2goJHNjb3BlLm5ld1Rlcm1pbik7XG4gICAgICAgICRzY29wZS5uZXdUZXJtaW4gPSB7fTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmlzVGVybWluVmFsaWQgPSBmdW5jdGlvbih0ZXJtaW4pIHtcbiAgICAgICAgaWYgKHRlcm1pbi5iZWdpbm4gPT09IHVuZGVmaW5lZCB8fCB0ZXJtaW4uYmVnaW5uID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAodGVybWluLmdhbnp0YWVnaWcgIT09IHRydWUgJiYgKHRlcm1pbi5iZWdpbm5fdWhyemVpdCA9PT0gdW5kZWZpbmVkIHx8IHRlcm1pbi5iZWdpbm5fdWhyemVpdCA9PT0gMCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG5cbiAgICAvLyBXaWVkZXJob2x1bmdcbiAgICAkc2NvcGUud29jaGVfZGVzX21vbmF0cyA9IFtcbiAgICAgICAgeyBpZDogMCwgbGFiZWw6ICdKZWRlIFdvY2hlJyB9LFxuICAgICAgICB7IGlkOiAxLCBsYWJlbDogJ0plZGUgMS4gV29jaGUnIH0sXG4gICAgICAgIHsgaWQ6IDIsIGxhYmVsOiAnSmVkZSAyLiBXb2NoZScgfSxcbiAgICAgICAgeyBpZDogMywgbGFiZWw6ICdKZWRlIDMuIFdvY2hlJyB9LFxuICAgICAgICB7IGlkOiA0LCBsYWJlbDogJ0plZGUgNC4gV29jaGUnIH0sXG4gICAgICAgIHsgaWQ6IDUsIGxhYmVsOiAnSmVkZSA1LiBXb2NoZScgfVxuICAgIF07XG4gICAgJHNjb3BlLm5ld1dpZWRlcmhvbHVuZyA9IHt9O1xuICAgICRzY29wZS5hZGRXaWVkZXJob2x1bmcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCRzY29wZS5uZXdUZXJtaW4ud2llZGVyaG9sdW5nZW4gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgJHNjb3BlLm5ld1Rlcm1pbi53aWVkZXJob2x1bmdlbiA9IFtdO1xuICAgICAgICB9XG4gICAgICAgICRzY29wZS5uZXdUZXJtaW4ud2llZGVyaG9sdW5nZW4ucHVzaCgkc2NvcGUubmV3V2llZGVyaG9sdW5nKTtcbiAgICAgICAgJHNjb3BlLm5ld1dpZWRlcmhvbHVuZyA9IHt9O1xuICAgIH07XG5cbiAgICAkc2NvcGUuaXNXaWVkZXJob2x1bmdWYWxpZCA9IGZ1bmN0aW9uKHdpZWRlcmhvbHVuZykge1xuICAgICAgICBpZiAod2llZGVyaG9sdW5nLndvY2hlbnRhZyA9PT0gdW5kZWZpbmVkIHx8IHdpZWRlcmhvbHVuZy53b2NoZW50YWcgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG5cbiAgICAvLyBMaW5rc1xuICAgICRzY29wZS5uZXdMaW5rID0ge307XG4gICAgJHNjb3BlLmFkZExpbmsgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCRzY29wZS5waW4ubGlua3MgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgJHNjb3BlLnBpbi5saW5rcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgICRzY29wZS5waW4ubGlua3MucHVzaCgkc2NvcGUubmV3TGluayk7XG4gICAgICAgICRzY29wZS5uZXdMaW5rID0ge307XG4gICAgfTtcblxuICAgICRzY29wZS5pc0xpbmtWYWxpZCA9IGZ1bmN0aW9uKGxpbmspIHtcbiAgICAgICAgaWYgKGxpbmsudGl0ZWwgPT09IHVuZGVmaW5lZCB8fCBsaW5rLnRpdGVsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKGxpbmsudXJsID09PSB1bmRlZmluZWQgfHwgbGluay51cmwubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxufV0pOyIsImFuZ3VsYXIubW9kdWxlKCdqdWdlbmRzdGFkdHBsYW4ucGlucycpLmNvbmZpZyhmdW5jdGlvbiBjb25maWcoICRzdGF0ZVByb3ZpZGVyICkge1xuICBcbiAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoICdMaXN0ZTogUGluJywge1xuICAgIHVybDogJy9waW5zJyxcbiAgICB2aWV3czoge1xuICAgICAgXCJtYWluXCI6IHtcbiAgICAgICAgY29udHJvbGxlcjogJ1BpbnNDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdzcmMvYXBwL3BpbnMvdmlld3MvbGlzdC50cGwuaHRtbCdcbiAgICAgIH1cbiAgICB9LFxuICAgIGRhdGE6eyBwYWdlVGl0bGU6ICdQaW5zJyB9XG4gIH0pO1xuXG59KTtcblxuSnVnZW5kc3RhZHRwbGFuLkNvbnRyb2xsZXJzLmNvbnRyb2xsZXIoICdQaW5zQ29udHJvbGxlcicsIFsgJyRzY29wZScsICckbG9jYXRpb24nLCAnUGluJywgZnVuY3Rpb24gUGluc0NvbnRyb2xsZXIoICRzY29wZSwgJGxvY2F0aW9uLCBQaW4gKSB7XG4gICAgJHNjb3BlLnBpbnMgPSBQaW4ucXVlcnkoKTtcblxuICAgICRzY29wZS52aWV3UGluID0gZnVuY3Rpb24gKHBpbikge1xuICAgICAgJGxvY2F0aW9uLnBhdGgoJy9waW4vJytwaW4uaWQpO1xuICAgIH07XG5cbn1dKTsiLCJhbmd1bGFyLm1vZHVsZSgnanVnZW5kc3RhZHRwbGFuLnN0YXJ0c2VpdGUnKS5jb25maWcoZnVuY3Rpb24gY29uZmlnKCAkc3RhdGVQcm92aWRlciApIHtcbiAgXG4gICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCAnU3RhcnRzZWl0ZScsIHtcbiAgICB1cmw6ICcvc3RhcnRzZWl0ZScsXG4gICAgdmlld3M6IHtcbiAgICAgIFwibWFpblwiOiB7XG4gICAgICAgIGNvbnRyb2xsZXI6ICdTdGFydHNlaXRlQ29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnc3JjL2FwcC9zdGFydHNlaXRlL3ZpZXdzL3N0YXJ0c2VpdGUudHBsLmh0bWwnXG4gICAgICB9XG4gICAgfSxcbiAgICBkYXRhOnsgcGFnZVRpdGxlOiAnU3RhcnRzZWl0ZScgfVxuICB9KTtcblxufSk7XG5cbmFuZ3VsYXIubW9kdWxlKCdqdWdlbmRzdGFkdHBsYW4uc3RhcnRzZWl0ZScpLmNvbnRyb2xsZXIoICdTdGFydHNlaXRlQ29udHJvbGxlcicsIFsgJyRzY29wZScsICckbG9jYXRpb24nLCAnUGluJywgZnVuY3Rpb24gU3RhcnRzZWl0ZUNvbnRyb2xsZXIoICRzY29wZSwgJGxvY2F0aW9uLCBQaW4gKSB7XG4gICAgIGFuZ3VsYXIuZXh0ZW5kKCRzY29wZSwge1xuICAgICAgICBjZW50ZXI6IHtcbiAgICAgICAgICAgIGxhdDogNTAuNzMyODI5MjQ2NzI2LFxuICAgICAgICAgICAgbG5nOiA3LjA5MzcwMDQwOTAxMTcsXG4gICAgICAgICAgICB6b29tOiAxM1xuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgc2Nyb2xsV2hlZWxab29tOiBmYWxzZVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAkc2NvcGUubWFya2VycyA9IFtdO1xuXG4gICAgUGluLnF1ZXJ5KGZ1bmN0aW9uKHBpbnMpIHtcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKHBpbnMsIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICAgIGlmIChpdGVtLmxvbmdpdHVkZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1hcmtlciA9IHtcbiAgICAgICAgICAgICAgICAgICAgbGF0OiBpdGVtLmxhdGl0dWRlLFxuICAgICAgICAgICAgICAgICAgICBsbmc6IGl0ZW0ubG9uZ2l0dWRlLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogaXRlbS50aXRlbCxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJzxoMz4nICsgaXRlbS50aXRlbCArICc8L2gzPicgKyBpdGVtLmJlc2NocmVpYnVuZyArICc8c21hbGw+PGEgaHJlZj1cIicgKyAnLyMvcGluLycgKyBpdGVtLmlkICsgJ1wiPk1laHI8L2E+PC9zbWFsbD4nXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAkc2NvcGUubWFya2Vycy5wdXNoKG1hcmtlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG59XSk7IiwiYW5ndWxhci5tb2R1bGUoJ2p1Z2VuZHN0YWR0cGxhbi50cmFlZ2VyJykuY29uZmlnKGZ1bmN0aW9uIGNvbmZpZyggJHN0YXRlUHJvdmlkZXIgKSB7XG4gIFxuICAkc3RhdGVQcm92aWRlci5zdGF0ZSggJ0xpc3RlOiBUcmFlZ2VyJywge1xuICAgIHVybDogJy90cmFlZ2VyJyxcbiAgICB2aWV3czoge1xuICAgICAgXCJtYWluXCI6IHtcbiAgICAgICAgY29udHJvbGxlcjogJ1RyYWVnZXJDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdzcmMvYXBwL3RyYWVnZXIvdmlld3MvbGlzdGUudHBsLmh0bWwnXG4gICAgICB9XG4gICAgfSxcbiAgICBkYXRhOnsgcGFnZVRpdGxlOiAnVHLDpGdlcicgfVxuICB9KTtcblxufSk7XG5cbkp1Z2VuZHN0YWR0cGxhbi5Db250cm9sbGVycy5jb250cm9sbGVyKCAnVHJhZWdlckNvbnRyb2xsZXInLCBbICckc2NvcGUnLCAnJGxvY2F0aW9uJywgJ1RyYWVnZXInLCBmdW5jdGlvbiBUcmFlZ2VyQ29udHJvbGxlciggJHNjb3BlLCAkbG9jYXRpb24sIFRyYWVnZXIgKSB7XG4gICAgJHNjb3BlLnRyYWVnZXIgPSBUcmFlZ2VyLnF1ZXJ5KCk7XG5cbiAgICAkc2NvcGUudmlld1RyYWVnZXIgPSBmdW5jdGlvbiAodHJhZWdlcikge1xuICAgICAgJGxvY2F0aW9uLnBhdGgoJy90cmFlZ2VyLycrdHJhZWdlci5pZCk7XG4gICAgfTtcblxufV0pOyIsImFuZ3VsYXIubW9kdWxlKCdqdWdlbmRzdGFkdHBsYW4udHJhZWdlcicpLmNvbmZpZyhmdW5jdGlvbiBjb25maWcoICRzdGF0ZVByb3ZpZGVyICkge1xuICBcbiAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoICdEZXRhaWw6IFRyYWVnZXInLCB7XG4gICAgdXJsOiAnL3RyYWVnZXIve2lkOlswLTldK30nLFxuICAgIHZpZXdzOiB7XG4gICAgICBcIm1haW5cIjoge1xuICAgICAgICBjb250cm9sbGVyOiAnVHJhZWdlckRldGFpbENvbnRyb2xsZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3NyYy9hcHAvdHJhZWdlci92aWV3cy9kZXRhaWwudHBsLmh0bWwnXG4gICAgICB9XG4gICAgfSxcbiAgICByZXNvbHZlOiB7XG4gICAgICB0cmFlZ2VyRGV0YWlsOiBbICckc3RhdGVQYXJhbXMnLCAnVHJhZWdlcicsIGZ1bmN0aW9uKCRzdGF0ZVBhcmFtcywgVHJhZWdlcikge1xuICAgICAgICByZXR1cm4gVHJhZWdlci5nZXQoe30se2lkOiAkc3RhdGVQYXJhbXMuaWR9KTtcbiAgICAgIH1dXG4gICAgfSxcbiAgICBkYXRhOnsgcGFnZVRpdGxlOiAnVHLDpGdlcicgfVxuICB9KTtcblxufSk7XG5cbkp1Z2VuZHN0YWR0cGxhbi5Db250cm9sbGVycy5jb250cm9sbGVyKCAnVHJhZWdlckRldGFpbENvbnRyb2xsZXInLCBbICckc2NvcGUnLCAndHJhZWdlckRldGFpbCcsIGZ1bmN0aW9uIFRyYWVnZXJEZXRhaWxDb250cm9sbGVyKCAkc2NvcGUsIHRyYWVnZXJEZXRhaWwgKSB7XG4gICAgJHNjb3BlLnRyYWVnZXIgPSB0cmFlZ2VyRGV0YWlsO1xuXG4gICAgYW5ndWxhci5leHRlbmQoJHNjb3BlLCB7XG4gICAgICAgIGNlbnRlcjoge1xuICAgICAgICAgICAgbGF0OiA1MC43MzI4MjkyNDY3MjYsXG4gICAgICAgICAgICBsbmc6IDcuMDkzNzAwNDA5MDExNyxcbiAgICAgICAgICAgIHpvb206IDEzXG4gICAgICAgIH0sXG4gICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICBzY3JvbGxXaGVlbFpvb206IGZhbHNlXG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgICRzY29wZS5tYXJrZXJzID0gW107XG5cbiAgICB0cmFlZ2VyRGV0YWlsLiRwcm9taXNlLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh0cmFlZ2VyRGV0YWlsLnBpbnMsIGZ1bmN0aW9uKGl0ZW0sIGtleSkge1xuICAgICAgICAgICAgdmFyIG1hcmtlciA9IHtcbiAgICAgICAgICAgICAgICBsYXQ6IGl0ZW0ubGF0aXR1ZGUsXG4gICAgICAgICAgICAgICAgbG5nOiBpdGVtLmxvbmdpdHVkZSxcbiAgICAgICAgICAgICAgICB0aXRsZTogaXRlbS50aXRlbCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnPGgzPicgKyBpdGVtLnRpdGVsICsgJzwvaDM+JyArIGl0ZW0uYmVzY2hyZWlidW5nICsgJzxzbWFsbD48YSBocmVmPVwiJyArICcvIy9waW4vJytpdGVtLmlkICsgJ1wiPk1laHI8L2E+PC9zbWFsbD4nXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgJHNjb3BlLm1hcmtlcnMucHVzaChtYXJrZXIpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1dKTsiLCJhbmd1bGFyLm1vZHVsZSgnanVnZW5kc3RhZHRwbGFuLnRyYWVnZXInKS5jb25maWcoZnVuY3Rpb24gY29uZmlnKCAkc3RhdGVQcm92aWRlciApIHtcblxuICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCAnRm9ybTogVHJhZWdlcicsIHtcbiAgICAgICAgdXJsOiAnL3RyYWVnZXIvY3JlYXRlJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAgIFwibWFpblwiOiB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1RyYWVnZXJGb3JtQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzcmMvYXBwL3RyYWVnZXIvdmlld3MvZm9ybS50cGwuaHRtbCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGF0YTp7IHBhZ2VUaXRsZTogJ1Ryw6RnZXIgZXJzdGVsbGVuJyB9XG4gICAgfSk7XG5cbn0pO1xuXG5KdWdlbmRzdGFkdHBsYW4uQ29udHJvbGxlcnMuY29udHJvbGxlciggJ1RyYWVnZXJGb3JtQ29udHJvbGxlcicsIFsgJyRzY29wZScsICckbG9jYXRpb24nLCAnVHJhZWdlcicsICdLYXRlZ29yaWUnLCAnJHVwbG9hZCcsIGZ1bmN0aW9uIFRyYWVnZXJGb3JtQ29udHJvbGxlciggJHNjb3BlLCAkbG9jYXRpb24sIFRyYWVnZXIsIEthdGVnb3JpZSwgJHVwbG9hZCApIHtcbiAgICAkc2NvcGUua2F0ZWdvcmllbiA9IEthdGVnb3JpZS5xdWVyeSgpO1xuICAgICRzY29wZS50cmFlZ2VyID0gbmV3IFRyYWVnZXIoKTtcbiAgICAkc2NvcGUudHJhZWdlcnMgPSBUcmFlZ2VyLnF1ZXJ5KCk7XG5cbiAgICAkc2NvcGUubmV3VHJhZWdlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2NvcGUudHJhZWdlciA9IG5ldyBUcmFlZ2VyKCk7XG4gICAgICAgICRzY29wZS5lZGl0aW5nID0gZmFsc2U7XG4gICAgfTtcblxuICAgICRzY29wZS5zYXZlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkc2NvcGUudHJhZWdlci5pZCkge1xuICAgICAgICAgICAgVHJhZWdlci51cGRhdGUoJHNjb3BlLnRyYWVnZXIpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLm5ld1RyYWVnZXIoKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGFsZXJ0KCdFaW4gVHLDpGdlciBtaXQgZGllc2VyIEVtYWlsLUFkcmVzc2UgZXhpc3RpZXJ0IGJlcmVpdHMhJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRzY29wZS50cmFlZ2VyLiRzYXZlKCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICRzY29wZS50cmFlZ2Vycy5wdXNoKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAkc2NvcGUubmV3VHJhZWdlcigpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoJ0VpbiBUcsOkZ2VyIG1pdCBkaWVzZXIgRW1haWwtQWRyZXNzZSBleGlzdGllcnQgYmVyZWl0cyEnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgICRzY29wZS5zZXRBY3RpdmVUcmFlZ2VyID0gZnVuY3Rpb24odHJhZWdlcikge1xuICAgICAgICAkc2NvcGUudHJhZWdlciA9IHRyYWVnZXI7XG4gICAgICAgICRzY29wZS5lZGl0aW5nID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnJlbW92ZSA9IGZ1bmN0aW9uKHRyYWVnZXIpIHtcbiAgICAgICAgVHJhZWdlci5kZWxldGUodHJhZWdlciwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAkc2NvcGUudHJhZWdlcnMuaW5kZXhPZih0cmFlZ2VyKTtcbiAgICAgICAgICAgIGlmIChpbmRleCAhPSAtMSkge1xuICAgICAgICAgICAgICAgICRzY29wZS50cmFlZ2Vycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8gQmlsZGVyXG4gICAgJHNjb3BlLm9uRmlsZVNlbGVjdCA9IGZ1bmN0aW9uKCRmaWxlcykge1xuICAgICAgICB2YXIgZG9VcGxvYWQgPSBmdW5jdGlvbihmaWxlKSB7XG4gICAgICAgICAgICAkdXBsb2FkLnVwbG9hZCh7XG4gICAgICAgICAgICAgICAgdXJsOiAnYXBwX2Rldi5waHAvaW1nL3VwbG9hZCcsIC8vdXBsb2FkLnBocCBzY3JpcHQsIG5vZGUuanMgcm91dGUsIG9yIHNlcnZsZXQgdXJsXG4gICAgICAgICAgICAgICAgLy8gbWV0aG9kOiAnUE9TVCcgb3IgJ1BVVCcsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgLy8gaGVhZGVyczogeydoZWFkZXIta2V5JzogJ2hlYWRlci12YWx1ZSd9LFxuICAgICAgICAgICAgICAgIC8vIHdpdGhDcmVkZW50aWFsczogdHJ1ZSxcbiAgICAgICAgICAgICAgICBkYXRhOiB7bXlPYmo6ICRzY29wZS5teU1vZGVsT2JqfSxcbiAgICAgICAgICAgICAgICBmaWxlOiBmaWxlIC8vIG9yIGxpc3Qgb2YgZmlsZXM6ICRmaWxlcyBmb3IgaHRtbDUgb25seVxuICAgICAgICAgICAgICAgIC8vIGZpbGVOYW1lOiAnZG9jLmpwZycgb3IgWycxLmpwZycsICcyLmpwZycsIC4uLl0gLy8gdG8gbW9kaWZ5IHRoZSBuYW1lIG9mIHRoZSBmaWxlXG4gICAgICAgICAgICAgICAgLyogY3VzdG9taXplIGZpbGUgZm9ybURhdGEgbmFtZSAoJ0NvbnRlbnQtRGVzcG9zaXRpb24nKSwgc2VydmVyIHNpZGUgZmlsZSB2YXJpYWJsZSBuYW1lLlxuICAgICAgICAgICAgICAgICBEZWZhdWx0IGlzICdmaWxlJyAqL1xuICAgICAgICAgICAgICAgIC8vZmlsZUZvcm1EYXRhTmFtZTogbXlGaWxlLCAvL29yIGEgbGlzdCBvZiBuYW1lcyBmb3IgbXVsdGlwbGUgZmlsZXMgKGh0bWw1KS5cbiAgICAgICAgICAgICAgICAvKiBjdXN0b21pemUgaG93IGRhdGEgaXMgYWRkZWQgdG8gZm9ybURhdGEuIFNlZSAjNDAjaXNzdWVjb21tZW50LTI4NjEyMDAwIGZvciBzYW1wbGUgY29kZSAqL1xuICAgICAgICAgICAgICAgIC8vZm9ybURhdGFBcHBlbmRlcjogZnVuY3Rpb24oZm9ybURhdGEsIGtleSwgdmFsKXt9XG4gICAgICAgICAgICB9KS5wcm9ncmVzcyhmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3BlcmNlbnQ6ICcgKyBwYXJzZUludCgxMDAuMCAqIGV2dC5sb2FkZWQgLyBldnQudG90YWwpKTtcbiAgICAgICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgLy8gZmlsZSBpcyB1cGxvYWRlZCBzdWNjZXNzZnVsbHlcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnRyYWVnZXIuYmlsZGVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRyYWVnZXIuYmlsZGVyID0gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbGUudG1wX25hbWUgPSBkYXRhLmZvbGRlcjtcbiAgICAgICAgICAgICAgICAkc2NvcGUudHJhZWdlci5iaWxkZXIucHVzaChmaWxlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8uZXJyb3IoLi4uKVxuICAgICAgICAgICAgLy8udGhlbihzdWNjZXNzLCBlcnJvciwgcHJvZ3Jlc3MpO1xuICAgICAgICAgICAgLy8ueGhyKGZ1bmN0aW9uKHhocil7eGhyLnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKC4uLil9KS8vIGFjY2VzcyBhbmQgYXR0YWNoIGFueSBldmVudCBsaXN0ZW5lciB0byBYTUxIdHRwUmVxdWVzdC5cbiAgICAgICAgfTtcblxuICAgICAgICAvLyRmaWxlczogYW4gYXJyYXkgb2YgZmlsZXMgc2VsZWN0ZWQsIGVhY2ggZmlsZSBoYXMgbmFtZSwgc2l6ZSwgYW5kIHR5cGUuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJGZpbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgZmlsZSA9ICRmaWxlc1tpXTtcbiAgICAgICAgICAgICRzY29wZS51cGxvYWQgPSBkb1VwbG9hZChmaWxlKTtcbiAgICAgICAgfVxuICAgIH07XG5cblxuICAgIC8vIEFuc3ByZWNocGFydG5lclxuICAgICRzY29wZS5uZXdBbnNwcmVjaHBhcnRuZXIgPSB7fTtcbiAgICAkc2NvcGUuYWRkQW5zcHJlY2hwYXJ0bmVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkc2NvcGUudHJhZWdlci5hbnNwcmVjaHBhcnRuZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgJHNjb3BlLnRyYWVnZXIuYW5zcHJlY2hwYXJ0bmVyID0gW107XG4gICAgICAgIH1cbiAgICAgICAgJHNjb3BlLnRyYWVnZXIuYW5zcHJlY2hwYXJ0bmVyLnB1c2goJHNjb3BlLm5ld0Fuc3ByZWNocGFydG5lcik7XG4gICAgICAgICRzY29wZS5uZXdBbnNwcmVjaHBhcnRuZXIgPSB7fTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmlzQW5zcHJlY2hwYXJ0bmVyVmFsaWQgPSBmdW5jdGlvbihhbnNwcmVjaHBhcnRuZXIpIHtcbiAgICAgICAgaWYgKGFuc3ByZWNocGFydG5lci5uYW1lID09PSB1bmRlZmluZWQgfHwgYW5zcHJlY2hwYXJ0bmVyLm5hbWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAoYW5zcHJlY2hwYXJ0bmVyLmVtYWlsID09PSB1bmRlZmluZWQgfHwgYW5zcHJlY2hwYXJ0bmVyLmVtYWlsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG5cblxuICAgIC8vIEFkcmVzc2VuXG4gICAgJHNjb3BlLm5ld0FkcmVzc2UgPSB7fTtcbiAgICAkc2NvcGUuYWRkQWRyZXNzZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoJHNjb3BlLnRyYWVnZXIuYWRyZXNzZW4gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgJHNjb3BlLnRyYWVnZXIuYWRyZXNzZW4gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICAkc2NvcGUudHJhZWdlci5hZHJlc3Nlbi5wdXNoKCRzY29wZS5uZXdBZHJlc3NlKTtcbiAgICAgICAgJHNjb3BlLm5ld0FkcmVzc2UgPSB7fTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmlzQWRyZXNzZVZhbGlkID0gZnVuY3Rpb24oYWRyZXNzZSkge1xuICAgICAgICBpZiAoYWRyZXNzZS5zdHJhc3NlID09PSB1bmRlZmluZWQgfHwgYWRyZXNzZS5zdHJhc3NlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKGFkcmVzc2Uub3J0ID09PSB1bmRlZmluZWQgfHwgYWRyZXNzZS5vcnQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxufV0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==