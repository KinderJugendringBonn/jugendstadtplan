angular.module("jugendstadtplan.ansprechpartner",[]),angular.module("jugendstadtplan.pins",["ui.router","jugendstadtplan.links","jugendstadtplan.ansprechpartner","jugendstadtplan.termin"]),angular.module("jugendstadtplan.adresse",[]),angular.module("jugendstadtplan.termin",[]),angular.module("jugendstadtplan.traeger",["ui.router","jugendstadtplan.links","jugendstadtplan.ansprechpartner"]),angular.module("jugendstadtplan.links",[]),angular.module("jugendstadtplan.startseite",["ui.router","leaflet-directive"]);var Jugendstadtplan=Jugendstadtplan||{};Jugendstadtplan.Controllers=angular.module("jugendstadtplan.controllers",[]),angular.module("jugendstadtplan",["ngResource","ngSanitize","ui.router","leaflet-directive","textAngular","ngFileUpload","jugendstadtplan.templates","jugendstadtplan.api","jugendstadtplan.startseite","jugendstadtplan.pins","jugendstadtplan.traeger","jugendstadtplan.controllers"]).config(function(e,t){t.otherwise("/startseite")}).run(function(){}).controller("AppCtrl",["$scope","$location",function(e,t){e.$on("$stateChangeSuccess",function(t,n,r,a,l){angular.isDefined(n.data.pageTitle)&&(e.pageTitle=n.data.pageTitle+" | Jugendstadtplan")})}]),angular.module("plusOne",[]).directive("plusOne",function(){return{link:function(e,t,n){gapi.plusone.render(t[0],{size:"medium",href:"http://bit.ly/ngBoilerplate"})}}});var jugendstadtplanApi=angular.module("jugendstadtplan.api",["ngResource"]),backendPrefix="http://api.jugendstadtplan.dev";jugendstadtplanApi.provider("Pin",function(){this.$get=["$resource",function(e){var t=backendPrefix+"/pins";return e(t,{},{get:{method:"GET",url:t+"/:id",params:{id:"@id"}},update:{method:"PUT",url:t+"/update/:id",params:{id:"@id"}},save:{method:"POST",url:t+"/create"},"delete":{method:"DELETE",url:t+"/delete/:id",params:{id:"@id"}}})}]}),jugendstadtplanApi.provider("Traeger",function(){this.$get=["$resource",function(e){var t=backendPrefix+"/traeger";return e(t,{},{get:{method:"GET",url:t+"/:id",params:{id:"@id"}},update:{method:"PUT",url:t+"/update/:id",params:{id:"@id"}},save:{method:"POST",url:t+"/create"},"delete":{method:"DELETE",url:t+"/delete/:id",params:{id:"@id"}}})}]}),jugendstadtplanApi.provider("Kategorie",function(){this.$get=["$resource",function(e){var t=backendPrefix+"/kategorie";return e(t)}]}),Jugendstadtplan.Controllers.controller("AnsprechpartnerFormController",["$scope",function(e){e.newAnsprechpartner={},e.addAnsprechpartner=function(){void 0===e.model.ansprechpartner&&(e.model.ansprechpartner=[]),e.model.ansprechpartner.push(e.newAnsprechpartner),e.newAnsprechpartner={}},e.isAnsprechpartnerValid=function(e){return void 0===e.name||0===e.name.length?!1:void 0===e.email||0===e.email.length?!1:!0}}]),angular.module("jugendstadtplan.pins").config(function(e){e.state("Detail: Pin",{url:"/pin/{id:[0-9]+}",views:{main:{controller:"PinDetailController",templateUrl:"app/pins/views/detail.tpl.html"}},resolve:{pinDetail:["$stateParams","Pin",function(e,t){return t.get({},{id:e.id})}]},data:{pageTitle:"Pin"}})}),Jugendstadtplan.Controllers.controller("PinDetailController",["$scope","pinDetail",function(e,t){e.markers=[],e.center={lat:50.732829246726,lng:7.0937004090117,zoom:13},t.$promise.then(function(){e.pin=t,angular.extend(e,{defaults:{scrollWheelZoom:!1}}),e.center={lat:t.latitude,lng:t.longitude,zoom:15};var n={lat:t.latitude,lng:t.longitude,title:t.titel,focus:!0,message:"<h3>"+t.titel+"</h3>"+t.beschreibung};e.markers.push(n)},function(){angular.extend(e,{defaults:{scrollWheelZoom:!1}})})}]),angular.module("jugendstadtplan.pins").config(function(e){e.state("Form: Pin",{url:"/pin/create",views:{main:{controller:"PinFormController",templateUrl:"app/pins/views/form.tpl.html"}},data:{pageTitle:"Pin erstellen"}})}),Jugendstadtplan.Controllers.controller("PinFormController",["$scope","$location","Pin","Traeger","Kategorie",function(e,t,n,r,a){e.kategorien=a.query(),e.pin=new n,e.pins=n.query(),e.traegers=r.query(),angular.extend(e,{center:{lat:50.732829246726,lng:7.0937004090117,zoom:13},defaults:{scrollWheelZoom:!1},events:{}}),e.pin.markers=[],e.$on("leafletDirectiveMap.click",function(t,n){var r=n.leafletEvent;e.pin.markers[0]={lat:r.latlng.lat,lng:r.latlng.lng,draggable:!0,focus:!0}}),e.newPin=function(){e.pin=new n,e.pin.markers=[],e.editing=!1},e.save=function(){e.pin.id?n.update(e.pin):e.pin.$save().then(function(t){e.pins.push(t)}),e.newPin()},e.setActivePin=function(t){e.pin=t,e.pin.markers=[],null!=t.longitude&&(e.pin.markers[0]={lat:t.latitude,lng:t.longitude,draggable:!0,focus:!0}),e.editing=!0},e.remove=function(t){n["delete"](t,function(){var n=e.pins.indexOf(t);-1!=n&&e.pins.splice(n,1)})},e.barrierefreiheitsgrade=["Gut","Teilweise","Nicht barrierefrei"],e.kostenarten=["Kostenlos","Kostenpflichtig"],e.mindestalters=["ab 12","ab 16","ab 18","ab 21"]}]),angular.module("jugendstadtplan.pins").config(function(e){e.state("Liste: Pin",{url:"/pins",views:{main:{controller:"PinsController",templateUrl:"app/pins/views/list.tpl.html"}},data:{pageTitle:"Pins"}})}),Jugendstadtplan.Controllers.controller("PinsController",["$scope","$location","Pin",function(e,t,n){e.pins=n.query(),e.viewPin=function(e){t.path("/pin/"+e.id)}}]),Jugendstadtplan.Controllers.controller("AdresseFormController",["$scope",function(e){e.isAdresseValid=function(e){return void 0===e.strasse||0===e.strasse.length?!1:void 0===e.ort||0===e.ort.length?!1:!0}}]),Jugendstadtplan.Controllers.controller("TerminFormController",["$scope",function(e){e.wochentage=["Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag","Sonntag"],e.newTermin={},e.addTermin=function(){void 0===e.pin.termine&&(e.pin.termine=[]),e.pin.termine.push(e.newTermin),e.newTermin={}},e.isTerminValid=function(e){return void 0===e.beginn||0===e.beginn?!1:e.ganztaegig===!0||void 0!==e.beginn_uhrzeit&&0!==e.beginn_uhrzeit?!0:!1},e.woche_des_monats=[{id:0,label:"Jede Woche"},{id:1,label:"Jede 1. Woche"},{id:2,label:"Jede 2. Woche"},{id:3,label:"Jede 3. Woche"},{id:4,label:"Jede 4. Woche"},{id:5,label:"Jede 5. Woche"}],e.newWiederholung={},e.addWiederholung=function(){void 0===e.newTermin.wiederholungen&&(e.newTermin.wiederholungen=[]),e.newTermin.wiederholungen.push(e.newWiederholung),e.newWiederholung={}},e.isWiederholungValid=function(e){return void 0===e.wochentag||0===e.wochentag?!1:!0}}]),angular.module("jugendstadtplan.traeger").config(function(e){e.state("Liste: Traeger",{url:"/traeger",views:{main:{controller:"TraegerController",templateUrl:"app/traeger/views/liste.tpl.html"}},data:{pageTitle:"Träger"}})}),Jugendstadtplan.Controllers.controller("TraegerController",["$scope","$location","Traeger",function(e,t,n){e.traeger=n.query(),e.viewTraeger=function(e){t.path("/traeger/"+e.id)}}]),angular.module("jugendstadtplan.traeger").config(function(e){e.state("Detail: Traeger",{url:"/traeger/{id:[0-9]+}",views:{main:{controller:"TraegerDetailController",templateUrl:"app/traeger/views/detail.tpl.html"}},resolve:{traegerDetail:["$stateParams","Traeger",function(e,t){return t.get({},{id:e.id})}]},data:{pageTitle:"Träger"}})}),Jugendstadtplan.Controllers.controller("TraegerDetailController",["$scope","traegerDetail",function(e,t){e.traeger=t,angular.extend(e,{center:{lat:50.732829246726,lng:7.0937004090117,zoom:13},defaults:{scrollWheelZoom:!1}}),e.markers=[],t.$promise.then(function(){angular.forEach(t.pins,function(t,n){var r={lat:t.latitude,lng:t.longitude,title:t.titel,message:"<h3>"+t.titel+"</h3>"+t.beschreibung+'<small><a href="/#/pin/'+t.id+'">Mehr</a></small>'};e.markers.push(r)})})}]),angular.module("jugendstadtplan.traeger").config(function(e){e.state("Form: Traeger",{url:"/traeger/create",views:{main:{controller:"TraegerFormController",templateUrl:"app/traeger/views/form.tpl.html"}},data:{pageTitle:"Träger erstellen"}})}),Jugendstadtplan.Controllers.controller("TraegerFormController",["$scope","$location","Traeger","Kategorie","Upload",function(e,t,n,r,a){e.kategorien=r.query(),e.traeger=new n,e.traegers=n.query(),e.newTraeger=function(){e.traeger=new n,e.editing=!1},e.save=function(){e.traeger.id?n.update(e.traeger).then(function(){e.newTraeger()},function(){alert("Ein Träger mit dieser Email-Adresse existiert bereits!")}):e.traeger.$save().then(function(t){e.traegers.push(t),e.newTraeger()},function(){alert("Ein Träger mit dieser Email-Adresse existiert bereits!")})},e.setActiveTraeger=function(t){e.traeger=t,e.editing=!0},e.remove=function(t){n["delete"](t,function(){var n=e.traegers.indexOf(t);-1!=n&&e.traegers.splice(n,1)})},e.onFileSelect=function(t){for(var n=function(t){a.upload({url:"app_dev.php/img/upload",method:"POST",data:{myObj:e.myModelObj},file:t}).progress(function(e){console.log("percent: "+parseInt(100*e.loaded/e.total))}).success(function(n,r,a,l){void 0===e.traeger.bilder&&(e.traeger.bilder=[]),t.tmp_name=n.folder,e.traeger.bilder.push(t)})},r=0;r<t.length;r++){var l=t[r];e.upload=n(l)}},e.newAdresse={},e.addAdresse=function(){void 0===e.traeger.adressen&&(e.traeger.adressen=[]),e.traeger.adressen.push(e.newAdresse),e.newAdresse={}},e.isAdresseValid=function(e){return void 0===e.strasse||0===e.strasse.length?!1:void 0===e.ort||0===e.ort.length?!1:!0}}]),Jugendstadtplan.Controllers.controller("LinksFormController",["$scope",function(e){e.newLink={},e.addLink=function(){void 0===e.model.links&&(e.model.links=[]),e.model.links.push(e.newLink),e.newLink={}},e.isLinkValid=function(e){return void 0===e.titel||0===e.titel.length?!1:void 0===e.url||0===e.url.length?!1:!0}}]),angular.module("jugendstadtplan.startseite").config(function(e){e.state("Startseite",{url:"/startseite",views:{main:{controller:"StartseiteController",templateUrl:"app/startseite/views/startseite.tpl.html"}},data:{pageTitle:"Startseite"}})}),angular.module("jugendstadtplan.startseite").controller("StartseiteController",["$scope","$location","Pin","$templateCache",function(e,t,n,r){angular.extend(e,{center:{lat:50.732829246726,lng:7.0937004090117,zoom:13},defaults:{scrollWheelZoom:!1}}),e.markers=[],n.query(function(t){angular.forEach(t,function(t){if(null!=t.longitude){var n={lat:t.latitude,lng:t.longitude,title:t.titel,message:"<h3>"+t.titel+"</h3>"+t.beschreibung+'<small><a href="/#/pin/'+t.id+'">Mehr</a></small>'};e.markers.push(n)}})})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9hbnNwcmVjaHBhcnRuZXIvQW5zcHJlY2hwYXJ0bmVyTW9kdWxlLmpzIiwiYXBwL3BpbnMvUGluc01vZHVsZS5qcyIsImFwcC9hZHJlc3NlL0FkcmVzc2VNb2R1bGUuanMiLCJhcHAvdGVybWluL1Rlcm1pbk1vZHVsZS5qcyIsImFwcC90cmFlZ2VyL1RyYWVnZXJNb2R1bGUuanMiLCJhcHAvbGlua3MvTGlua3NNb2R1bGUuanMiLCJhcHAvc3RhcnRzZWl0ZS9TdGFydHNlaXRlTW9kdWxlLmpzIiwiYXBwL2FwcC5qcyIsImNvbW1vbi9wbHVzT25lL3BsdXNPbmUuanMiLCJjb21tb24vcmVzb3VyY2VzL0p1Z2VuZHN0YWR0cGxhbkFwaS5qcyIsImFwcC9hbnNwcmVjaHBhcnRuZXIvQW5zcHJlY2hwYXJ0bmVyRm9ybUNvbnRyb2xsZXIuanMiLCJhcHAvcGlucy9QaW5EZXRhaWxDb250cm9sbGVyLmpzIiwiYXBwL3BpbnMvUGluRm9ybUNvbnRyb2xsZXIuanMiLCJhcHAvcGlucy9QaW5zQ29udHJvbGxlci5qcyIsImFwcC9hZHJlc3NlL0FkcmVzc2VGb3JtQ29udHJvbGxlci5qcyIsImFwcC90ZXJtaW4vVGVybWluRm9ybUNvbnRyb2xsZXIuanMiLCJhcHAvdHJhZWdlci9UcmFlZ2VyQ29udHJvbGxlci5qcyIsImFwcC90cmFlZ2VyL1RyYWVnZXJEZXRhaWxDb250cm9sbGVyLmpzIiwiYXBwL3RyYWVnZXIvVHJhZWdlckZvcm1Db250cm9sbGVyLmpzIiwiYXBwL2xpbmtzL0xpbmtzRm9ybUNvbnRyb2xsZXIuanMiLCJhcHAvc3RhcnRzZWl0ZS9TdGFydHNlaXRlQ29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiSnVnZW5kc3RhZHRwbGFuIiwiQ29udHJvbGxlcnMiLCJjb25maWciLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIm90aGVyd2lzZSIsInJ1biIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCIkbG9jYXRpb24iLCIkb24iLCJldmVudCIsInRvU3RhdGUiLCJ0b1BhcmFtcyIsImZyb21TdGF0ZSIsImZyb21QYXJhbXMiLCJpc0RlZmluZWQiLCJkYXRhIiwicGFnZVRpdGxlIiwiZGlyZWN0aXZlIiwibGluayIsInNjb3BlIiwiZWxlbWVudCIsImF0dHJzIiwiZ2FwaSIsInBsdXNvbmUiLCJyZW5kZXIiLCJzaXplIiwiaHJlZiIsImp1Z2VuZHN0YWR0cGxhbkFwaSIsImJhY2tlbmRQcmVmaXgiLCJwcm92aWRlciIsInRoaXMiLCIkZ2V0IiwiJHJlc291cmNlIiwiYmFja2VuZFVybCIsImdldCIsIm1ldGhvZCIsInVybCIsInBhcmFtcyIsImlkIiwidXBkYXRlIiwic2F2ZSIsImRlbGV0ZSIsIm5ld0Fuc3ByZWNocGFydG5lciIsImFkZEFuc3ByZWNocGFydG5lciIsInVuZGVmaW5lZCIsIm1vZGVsIiwiYW5zcHJlY2hwYXJ0bmVyIiwicHVzaCIsImlzQW5zcHJlY2hwYXJ0bmVyVmFsaWQiLCJuYW1lIiwibGVuZ3RoIiwiZW1haWwiLCJzdGF0ZSIsInZpZXdzIiwibWFpbiIsInRlbXBsYXRlVXJsIiwicmVzb2x2ZSIsInBpbkRldGFpbCIsIiRzdGF0ZVBhcmFtcyIsIlBpbiIsIm1hcmtlcnMiLCJjZW50ZXIiLCJsYXQiLCJsbmciLCJ6b29tIiwiJHByb21pc2UiLCJ0aGVuIiwicGluIiwiZXh0ZW5kIiwiZGVmYXVsdHMiLCJzY3JvbGxXaGVlbFpvb20iLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsIm1hcmtlciIsInRpdGxlIiwidGl0ZWwiLCJmb2N1cyIsIm1lc3NhZ2UiLCJiZXNjaHJlaWJ1bmciLCJUcmFlZ2VyIiwiS2F0ZWdvcmllIiwia2F0ZWdvcmllbiIsInF1ZXJ5IiwicGlucyIsInRyYWVnZXJzIiwiZXZlbnRzIiwiYXJncyIsImxlYWZFdmVudCIsImxlYWZsZXRFdmVudCIsImxhdGxuZyIsImRyYWdnYWJsZSIsIm5ld1BpbiIsImVkaXRpbmciLCIkc2F2ZSIsInJlc3BvbnNlIiwic2V0QWN0aXZlUGluIiwicmVtb3ZlIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiYmFycmllcmVmcmVpaGVpdHNncmFkZSIsImtvc3RlbmFydGVuIiwibWluZGVzdGFsdGVycyIsInZpZXdQaW4iLCJwYXRoIiwiaXNBZHJlc3NlVmFsaWQiLCJhZHJlc3NlIiwic3RyYXNzZSIsIm9ydCIsIndvY2hlbnRhZ2UiLCJuZXdUZXJtaW4iLCJhZGRUZXJtaW4iLCJ0ZXJtaW5lIiwiaXNUZXJtaW5WYWxpZCIsInRlcm1pbiIsImJlZ2lubiIsImdhbnp0YWVnaWciLCJiZWdpbm5fdWhyemVpdCIsIndvY2hlX2Rlc19tb25hdHMiLCJsYWJlbCIsIm5ld1dpZWRlcmhvbHVuZyIsImFkZFdpZWRlcmhvbHVuZyIsIndpZWRlcmhvbHVuZ2VuIiwiaXNXaWVkZXJob2x1bmdWYWxpZCIsIndpZWRlcmhvbHVuZyIsIndvY2hlbnRhZyIsInRyYWVnZXIiLCJ2aWV3VHJhZWdlciIsInRyYWVnZXJEZXRhaWwiLCJmb3JFYWNoIiwiaXRlbSIsImtleSIsIlVwbG9hZCIsIm5ld1RyYWVnZXIiLCJhbGVydCIsInNldEFjdGl2ZVRyYWVnZXIiLCJvbkZpbGVTZWxlY3QiLCIkZmlsZXMiLCJkb1VwbG9hZCIsImZpbGUiLCJ1cGxvYWQiLCJteU9iaiIsIm15TW9kZWxPYmoiLCJwcm9ncmVzcyIsImV2dCIsImNvbnNvbGUiLCJsb2ciLCJwYXJzZUludCIsImxvYWRlZCIsInRvdGFsIiwic3VjY2VzcyIsInN0YXR1cyIsImhlYWRlcnMiLCJiaWxkZXIiLCJ0bXBfbmFtZSIsImZvbGRlciIsImkiLCJuZXdBZHJlc3NlIiwiYWRkQWRyZXNzZSIsImFkcmVzc2VuIiwibmV3TGluayIsImFkZExpbmsiLCJsaW5rcyIsImlzTGlua1ZhbGlkIiwiJHRlbXBsYXRlQ2FjaGUiXSwibWFwcGluZ3MiOiJBQUFBQSxRQUFBQyxPQUFBLHNDQ0FBRCxRQUFBQyxPQUFBLHdCQUNBLFlBQUEsd0JBQUEsa0NBQUEsMkJDREFELFFBQUFDLE9BQUEsOEJDQUFELFFB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QUFBNkosWUFBQSxTQUFBakosR0FDQSxNQUFBMEIsVUFBQTFCLEVBQUF5RCxPQUFBLElBQUF6RCxFQUFBeUQsTUFBQXpCLFFBQ0EsRUFDQU4sU0FBQTFCLEVBQUFrQixLQUFBLElBQUFsQixFQUFBa0IsSUFBQWMsUUFDQSxHQUVBLE1DbkJBdEQsUUFBQUMsT0FBQSw4QkFBQUcsT0FBQSxTQUFBQyxHQUVBQSxFQUFBbUQsTUFBQSxjQUNBaEIsSUFBQSxjQUNBaUIsT0FDQUMsTUFDQWpELFdBQUEsdUJBQ0FrRCxZQUFBLDZDQUdBeEMsTUFBQUMsVUFBQSxrQkFLQXBCLFFBQUFDLE9BQUEsOEJBQUFRLFdBQUEsd0JBQUEsU0FBQSxZQUFBLE1BQUEsaUJBQUEsU0FBQUMsRUFBQUMsRUFBQW9ELEVBQUF5RyxHQUNBeEssUUFBQXdFLE9BQUE5RCxHQUNBdUQsUUFDQUMsSUFBQSxnQkFDQUMsSUFBQSxnQkFDQUMsS0FBQSxJQUVBSyxVQUNBQyxpQkFBQSxLQUlBaEUsRUFBQXNELFdBRUFELEVBQUF1QixNQUFBLFNBQUFDLEdBQ0F2RixRQUFBcUksUUFBQTlDLEVBQUEsU0FBQStDLEdBQ0EsR0FBQSxNQUFBQSxFQUFBMUQsVUFBQSxDQUNBLEdBQUFDLElBQ0FYLElBQUFvRSxFQUFBM0QsU0FDQVIsSUFBQW1FLEVBQUExRCxVQUNBRSxNQUFBd0QsRUFBQXZELE1BQ0FFLFFBQUEsT0FBQXFELEVBQUF2RCxNQUFBLFFBQUF1RCxFQUFBcEQsYUFBQSwwQkFBQW9ELEVBQUE1RixHQUFBLHFCQUVBaEMsR0FBQXNELFFBQUFiLEtBQUEwQiIsImZpbGUiOiJqdWdlbmRzdGFkdHBsYW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhci5tb2R1bGUoICdqdWdlbmRzdGFkdHBsYW4uYW5zcHJlY2hwYXJ0bmVyJywgW1xuXSk7IiwiYW5ndWxhci5tb2R1bGUoICdqdWdlbmRzdGFkdHBsYW4ucGlucycsIFtcbiAgJ3VpLnJvdXRlcicsICdqdWdlbmRzdGFkdHBsYW4ubGlua3MnLCAnanVnZW5kc3RhZHRwbGFuLmFuc3ByZWNocGFydG5lcicsICdqdWdlbmRzdGFkdHBsYW4udGVybWluJ1xuXSk7IiwiYW5ndWxhci5tb2R1bGUoICdqdWdlbmRzdGFkdHBsYW4uYWRyZXNzZScsIFtcbl0pOyIsImFuZ3VsYXIubW9kdWxlKCAnanVnZW5kc3RhZHRwbGFuLnRlcm1pbicsIFtcbl0pOyIsImFuZ3VsYXIubW9kdWxlKCAnanVnZW5kc3RhZHRwbGFuLnRyYWVnZXInLCBbXG4gICd1aS5yb3V0ZXInLCAnanVnZW5kc3RhZHRwbGFuLmxpbmtzJywgJ2p1Z2VuZHN0YWR0cGxhbi5hbnNwcmVjaHBhcnRuZXInXG5dKTsiLCJhbmd1bGFyLm1vZHVsZSggJ2p1Z2VuZHN0YWR0cGxhbi5saW5rcycsIFtcbl0pOyIsImFuZ3VsYXIubW9kdWxlKCAnanVnZW5kc3RhZHRwbGFuLnN0YXJ0c2VpdGUnLCBbXG4gICd1aS5yb3V0ZXInLFxuICAnbGVhZmxldC1kaXJlY3RpdmUnXG5dKTsiLCJ2YXIgSnVnZW5kc3RhZHRwbGFuID0gSnVnZW5kc3RhZHRwbGFuIHx8IHt9O1xuSnVnZW5kc3RhZHRwbGFuLkNvbnRyb2xsZXJzID0gYW5ndWxhci5tb2R1bGUoJ2p1Z2VuZHN0YWR0cGxhbi5jb250cm9sbGVycycsIFtdKTtcblxuYW5ndWxhci5tb2R1bGUoICdqdWdlbmRzdGFkdHBsYW4nLCBbXG4gICduZ1Jlc291cmNlJyxcbiAgJ25nU2FuaXRpemUnLFxuICAndWkucm91dGVyJyxcbiAgJ2xlYWZsZXQtZGlyZWN0aXZlJyxcbiAgJ3RleHRBbmd1bGFyJyxcbiAgJ25nRmlsZVVwbG9hZCcsXG4gICdqdWdlbmRzdGFkdHBsYW4udGVtcGxhdGVzJyxcbiAgJ2p1Z2VuZHN0YWR0cGxhbi5hcGknLFxuICAnanVnZW5kc3RhZHRwbGFuLnN0YXJ0c2VpdGUnLFxuICAnanVnZW5kc3RhZHRwbGFuLnBpbnMnLFxuICAnanVnZW5kc3RhZHRwbGFuLnRyYWVnZXInLFxuICAnanVnZW5kc3RhZHRwbGFuLmNvbnRyb2xsZXJzJ1xuXSlcblxuLmNvbmZpZyggZnVuY3Rpb24gbXlBcHBDb25maWcgKCAkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyICkge1xuICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCAnL3N0YXJ0c2VpdGUnICk7XG59KVxuXG4ucnVuKCBmdW5jdGlvbiBydW4gKCkge1xufSlcblxuLmNvbnRyb2xsZXIoICdBcHBDdHJsJywgWyAnJHNjb3BlJywgJyRsb2NhdGlvbicsIGZ1bmN0aW9uIEFwcEN0cmwoICRzY29wZSwgJGxvY2F0aW9uICl7XG4gICRzY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbihldmVudCwgdG9TdGF0ZSwgdG9QYXJhbXMsIGZyb21TdGF0ZSwgZnJvbVBhcmFtcyl7XG4gICAgaWYgKCBhbmd1bGFyLmlzRGVmaW5lZCggdG9TdGF0ZS5kYXRhLnBhZ2VUaXRsZSApICkge1xuICAgICAgJHNjb3BlLnBhZ2VUaXRsZSA9IHRvU3RhdGUuZGF0YS5wYWdlVGl0bGUgKyAnIHwgSnVnZW5kc3RhZHRwbGFuJyA7XG4gICAgfVxuICB9KTtcbn1dKVxuXG47IiwiYW5ndWxhci5tb2R1bGUoICdwbHVzT25lJywgW10gKVxuXG4uZGlyZWN0aXZlKCAncGx1c09uZScsIGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIGxpbms6IGZ1bmN0aW9uKCBzY29wZSwgZWxlbWVudCwgYXR0cnMgKSB7XG4gICAgICBnYXBpLnBsdXNvbmUucmVuZGVyKCBlbGVtZW50WzBdLCB7XG4gICAgICAgIFwic2l6ZVwiOiBcIm1lZGl1bVwiLFxuICAgICAgICBcImhyZWZcIjogXCJodHRwOi8vYml0Lmx5L25nQm9pbGVycGxhdGVcIlxuICAgICAgfSk7XG4gICAgfVxuICB9O1xufSlcblxuO1xuXG4iLCJ2YXIganVnZW5kc3RhZHRwbGFuQXBpID0gYW5ndWxhci5tb2R1bGUoJ2p1Z2VuZHN0YWR0cGxhbi5hcGknLCBbJ25nUmVzb3VyY2UnXSk7XG5cbnZhciBiYWNrZW5kUHJlZml4ID0gJ2h0dHA6Ly9hcGkuanVnZW5kc3RhZHRwbGFuLmRldic7XG5cbmp1Z2VuZHN0YWR0cGxhbkFwaS5wcm92aWRlcignUGluJywgZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kZ2V0ID0gWyckcmVzb3VyY2UnLCBmdW5jdGlvbiAoJHJlc291cmNlKSB7XG4gICAgICAgIHZhciBiYWNrZW5kVXJsID0gYmFja2VuZFByZWZpeCArICcvcGlucyc7XG4gICAgICAgIHJldHVybiAkcmVzb3VyY2UoYmFja2VuZFVybCwge30sIHtcbiAgICAgICAgICAgIGdldDoge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgdXJsOiBiYWNrZW5kVXJsICsgJy86aWQnLFxuICAgICAgICAgICAgICAgIHBhcmFtczogeyBpZDonQGlkJ31cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1cGRhdGU6IHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICAgICAgICAgIHVybDogYmFja2VuZFVybCArICcvdXBkYXRlLzppZCcsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiB7IGlkOidAaWQnfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNhdmU6IHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICB1cmw6IGJhY2tlbmRVcmwgKyAnL2NyZWF0ZSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZWxldGU6IHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICAgICAgICAgIHVybDogYmFja2VuZFVybCArICcvZGVsZXRlLzppZCcsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiB7IGlkOidAaWQnfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XTtcbn0pO1xuXG5qdWdlbmRzdGFkdHBsYW5BcGkucHJvdmlkZXIoJ1RyYWVnZXInLCBmdW5jdGlvbigpIHtcbiAgICB0aGlzLiRnZXQgPSBbJyRyZXNvdXJjZScsIGZ1bmN0aW9uICgkcmVzb3VyY2UpIHtcbiAgICAgICAgdmFyIGJhY2tlbmRVcmwgPSBiYWNrZW5kUHJlZml4ICsgJy90cmFlZ2VyJztcbiAgICAgICAgcmV0dXJuICRyZXNvdXJjZShiYWNrZW5kVXJsLCB7fSwge1xuICAgICAgICAgICAgZ2V0OiB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICB1cmw6IGJhY2tlbmRVcmwgKyAnLzppZCcsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiB7IGlkOidAaWQnfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHVwZGF0ZToge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgICAgICAgICAgdXJsOiBiYWNrZW5kVXJsICsgJy91cGRhdGUvOmlkJyxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHsgaWQ6J0BpZCd9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2F2ZToge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIHVybDogYmFja2VuZFVybCArICcvY3JlYXRlJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlbGV0ZToge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgICAgICAgICAgdXJsOiBiYWNrZW5kVXJsICsgJy9kZWxldGUvOmlkJyxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHsgaWQ6J0BpZCd9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1dO1xufSk7XG5cbmp1Z2VuZHN0YWR0cGxhbkFwaS5wcm92aWRlcignS2F0ZWdvcmllJywgZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kZ2V0ID0gWyckcmVzb3VyY2UnLCBmdW5jdGlvbiAoJHJlc291cmNlKSB7XG4gICAgICAgIHZhciBiYWNrZW5kVXJsID0gYmFja2VuZFByZWZpeCArICcva2F0ZWdvcmllJztcbiAgICAgICAgcmV0dXJuICRyZXNvdXJjZShiYWNrZW5kVXJsKTtcbiAgICB9XTtcbn0pOyIsIkp1Z2VuZHN0YWR0cGxhbi5Db250cm9sbGVycy5jb250cm9sbGVyKCAnQW5zcHJlY2hwYXJ0bmVyRm9ybUNvbnRyb2xsZXInLCBbICckc2NvcGUnLFxuICAgIGZ1bmN0aW9uKCRzY29wZSkge1xuXG4gICAgICAgIC8vIEFuc3ByZWNocGFydG5lclxuICAgICAgICAkc2NvcGUubmV3QW5zcHJlY2hwYXJ0bmVyID0ge307XG4gICAgICAgICRzY29wZS5hZGRBbnNwcmVjaHBhcnRuZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICgkc2NvcGUubW9kZWwuYW5zcHJlY2hwYXJ0bmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUubW9kZWwuYW5zcHJlY2hwYXJ0bmVyID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkc2NvcGUubW9kZWwuYW5zcHJlY2hwYXJ0bmVyLnB1c2goJHNjb3BlLm5ld0Fuc3ByZWNocGFydG5lcik7XG4gICAgICAgICAgICAkc2NvcGUubmV3QW5zcHJlY2hwYXJ0bmVyID0ge307XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmlzQW5zcHJlY2hwYXJ0bmVyVmFsaWQgPSBmdW5jdGlvbihhbnNwcmVjaHBhcnRuZXIpIHtcbiAgICAgICAgICAgIGlmIChhbnNwcmVjaHBhcnRuZXIubmFtZSA9PT0gdW5kZWZpbmVkIHx8IGFuc3ByZWNocGFydG5lci5uYW1lLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYW5zcHJlY2hwYXJ0bmVyLmVtYWlsID09PSB1bmRlZmluZWQgfHwgYW5zcHJlY2hwYXJ0bmVyLmVtYWlsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9O1xuXG4gICAgfV0pOyIsImFuZ3VsYXIubW9kdWxlKCdqdWdlbmRzdGFkdHBsYW4ucGlucycpLmNvbmZpZyhmdW5jdGlvbiBjb25maWcoICRzdGF0ZVByb3ZpZGVyICkge1xuICBcbiAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoICdEZXRhaWw6IFBpbicsIHtcbiAgICB1cmw6ICcvcGluL3tpZDpbMC05XSt9JyxcbiAgICB2aWV3czoge1xuICAgICAgXCJtYWluXCI6IHtcbiAgICAgICAgY29udHJvbGxlcjogJ1BpbkRldGFpbENvbnRyb2xsZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9waW5zL3ZpZXdzL2RldGFpbC50cGwuaHRtbCdcbiAgICAgIH1cbiAgICB9LFxuICAgIHJlc29sdmU6IHtcbiAgICAgIHBpbkRldGFpbDogWyAnJHN0YXRlUGFyYW1zJywgJ1BpbicsIGZ1bmN0aW9uKCRzdGF0ZVBhcmFtcywgUGluKSB7XG4gICAgICAgIHJldHVybiBQaW4uZ2V0KHt9LHtpZDogJHN0YXRlUGFyYW1zLmlkfSk7XG4gICAgICB9XVxuICAgIH0sXG4gICAgZGF0YTp7IHBhZ2VUaXRsZTogJ1BpbicgfVxuICB9KTtcblxufSk7XG5cbkp1Z2VuZHN0YWR0cGxhbi5Db250cm9sbGVycy5jb250cm9sbGVyKCAnUGluRGV0YWlsQ29udHJvbGxlcicsIFsgJyRzY29wZScsICdwaW5EZXRhaWwnLCBmdW5jdGlvbiBQaW5EZXRhaWxDb250cm9sbGVyKCAkc2NvcGUsIHBpbkRldGFpbCApIHtcbiAgICAkc2NvcGUubWFya2VycyA9IFtdO1xuICAgICRzY29wZS5jZW50ZXIgPSB7XG4gICAgICAgIGxhdDogNTAuNzMyODI5MjQ2NzI2LFxuICAgICAgICBsbmc6IDcuMDkzNzAwNDA5MDExNyxcbiAgICAgICAgem9vbTogMTNcbiAgICB9O1xuXG4gICAgcGluRGV0YWlsLiRwcm9taXNlLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkc2NvcGUucGluID0gcGluRGV0YWlsO1xuXG4gICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCgkc2NvcGUsIHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgICAgICAgICBzY3JvbGxXaGVlbFpvb206IGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICRzY29wZS5jZW50ZXIgPSB7XG4gICAgICAgICAgICAgICAgbGF0OiBwaW5EZXRhaWwubGF0aXR1ZGUsXG4gICAgICAgICAgICAgICAgbG5nOiBwaW5EZXRhaWwubG9uZ2l0dWRlLFxuICAgICAgICAgICAgICAgIHpvb206IDE1XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgbWFya2VyID0ge1xuICAgICAgICAgICAgICAgIGxhdDogcGluRGV0YWlsLmxhdGl0dWRlLFxuICAgICAgICAgICAgICAgIGxuZzogcGluRGV0YWlsLmxvbmdpdHVkZSxcbiAgICAgICAgICAgICAgICB0aXRsZTogcGluRGV0YWlsLnRpdGVsLFxuICAgICAgICAgICAgICAgIGZvY3VzOiB0cnVlLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICc8aDM+JyArIHBpbkRldGFpbC50aXRlbCArICc8L2gzPicgKyBwaW5EZXRhaWwuYmVzY2hyZWlidW5nLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICRzY29wZS5tYXJrZXJzLnB1c2gobWFya2VyKTtcbiAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCgkc2NvcGUsIHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgICAgICAgICBzY3JvbGxXaGVlbFpvb206IGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICApO1xufV0pOyIsImFuZ3VsYXIubW9kdWxlKCdqdWdlbmRzdGFkdHBsYW4ucGlucycpLmNvbmZpZyhmdW5jdGlvbiBjb25maWcoICRzdGF0ZVByb3ZpZGVyICkge1xuXG4gICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoICdGb3JtOiBQaW4nLCB7XG4gICAgICAgIHVybDogJy9waW4vY3JlYXRlJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAgIFwibWFpblwiOiB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1BpbkZvcm1Db250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9waW5zL3ZpZXdzL2Zvcm0udHBsLmh0bWwnXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGRhdGE6eyBwYWdlVGl0bGU6ICdQaW4gZXJzdGVsbGVuJyB9XG4gICAgfSk7XG5cbn0pO1xuXG5KdWdlbmRzdGFkdHBsYW4uQ29udHJvbGxlcnMuY29udHJvbGxlciggJ1BpbkZvcm1Db250cm9sbGVyJywgWyAnJHNjb3BlJywgJyRsb2NhdGlvbicsICdQaW4nLCAnVHJhZWdlcicsICdLYXRlZ29yaWUnLCBmdW5jdGlvbiBQaW5Gb3JtQ29udHJvbGxlciggJHNjb3BlLCAkbG9jYXRpb24sIFBpbiwgVHJhZWdlciwgS2F0ZWdvcmllICkge1xuICAgICRzY29wZS5rYXRlZ29yaWVuID0gS2F0ZWdvcmllLnF1ZXJ5KCk7XG4gICAgJHNjb3BlLnBpbiA9IG5ldyBQaW4oKTtcbiAgICAkc2NvcGUucGlucyA9IFBpbi5xdWVyeSgpO1xuICAgICRzY29wZS50cmFlZ2VycyA9IFRyYWVnZXIucXVlcnkoKTtcblxuICAgIGFuZ3VsYXIuZXh0ZW5kKCRzY29wZSwge1xuICAgICAgICBjZW50ZXI6IHtcbiAgICAgICAgICAgIGxhdDogNTAuNzMyODI5MjQ2NzI2LFxuICAgICAgICAgICAgbG5nOiA3LjA5MzcwMDQwOTAxMTcsXG4gICAgICAgICAgICB6b29tOiAxM1xuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgc2Nyb2xsV2hlZWxab29tOiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBldmVudHM6IHt9XG4gICAgfSk7XG5cbiAgICAkc2NvcGUucGluLm1hcmtlcnMgPSBbXTtcbiAgICAkc2NvcGUuJG9uKFwibGVhZmxldERpcmVjdGl2ZU1hcC5jbGlja1wiLCBmdW5jdGlvbihldmVudCwgYXJncyl7XG4gICAgICAgIHZhciBsZWFmRXZlbnQgPSBhcmdzLmxlYWZsZXRFdmVudDtcblxuICAgICAgICAkc2NvcGUucGluLm1hcmtlcnNbMF0gPSB7XG4gICAgICAgICAgICBsYXQ6IGxlYWZFdmVudC5sYXRsbmcubGF0LFxuICAgICAgICAgICAgbG5nOiBsZWFmRXZlbnQubGF0bG5nLmxuZyxcbiAgICAgICAgICAgIGRyYWdnYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGZvY3VzOiB0cnVlXG4gICAgICAgIH07XG4gICAgfSk7XG5cbiAgICAkc2NvcGUubmV3UGluID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICRzY29wZS5waW4gPSBuZXcgUGluKCk7XG4gICAgICAgICRzY29wZS5waW4ubWFya2VycyA9IFtdO1xuICAgICAgICAkc2NvcGUuZWRpdGluZyA9IGZhbHNlO1xuICAgIH07XG5cbiAgICAkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoJHNjb3BlLnBpbi5pZCkge1xuICAgICAgICAgICAgUGluLnVwZGF0ZSgkc2NvcGUucGluKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRzY29wZS5waW4uJHNhdmUoKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnBpbnMucHVzaChyZXNwb25zZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAkc2NvcGUubmV3UGluKCk7XG4gICAgfTtcblxuICAgICRzY29wZS5zZXRBY3RpdmVQaW4gPSBmdW5jdGlvbihwaW4pIHtcbiAgICAgICAgJHNjb3BlLnBpbiA9IHBpbjtcbiAgICAgICAgJHNjb3BlLnBpbi5tYXJrZXJzID0gW107XG4gICAgICAgIGlmIChwaW4ubG9uZ2l0dWRlICE9IG51bGwpIHtcbiAgICAgICAgICAgICRzY29wZS5waW4ubWFya2Vyc1swXSA9IHtcbiAgICAgICAgICAgICAgICBsYXQ6IHBpbi5sYXRpdHVkZSxcbiAgICAgICAgICAgICAgICBsbmc6IHBpbi5sb25naXR1ZGUsXG4gICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGZvY3VzOiB0cnVlXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgICRzY29wZS5lZGl0aW5nID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnJlbW92ZSA9IGZ1bmN0aW9uKHBpbikge1xuICAgICAgICBQaW4uZGVsZXRlKHBpbiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAkc2NvcGUucGlucy5pbmRleE9mKHBpbik7XG4gICAgICAgICAgICBpZiAoaW5kZXggIT0gLTEpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUucGlucy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG5cbiAgICAvLyBCYXJyaWVyZWZyZWloZWl0c2dyYWRlXG4gICAgJHNjb3BlLmJhcnJpZXJlZnJlaWhlaXRzZ3JhZGUgPSBbICdHdXQnLCAnVGVpbHdlaXNlJywgJ05pY2h0IGJhcnJpZXJlZnJlaScgXTtcblxuXG4gICAgLy8gS29zdGVuYXJ0ZW5cbiAgICAkc2NvcGUua29zdGVuYXJ0ZW4gPSBbICdLb3N0ZW5sb3MnLCAnS29zdGVucGZsaWNodGlnJyBdO1xuXG5cbiAgICAvLyBNaW5kZXN0YWx0ZXJcbiAgICAkc2NvcGUubWluZGVzdGFsdGVycyA9IFsgJ2FiIDEyJywgJ2FiIDE2JywgJ2FiIDE4JywgJ2FiIDIxJyBdO1xuXG5cblxufV0pOyIsImFuZ3VsYXIubW9kdWxlKCdqdWdlbmRzdGFkdHBsYW4ucGlucycpLmNvbmZpZyhmdW5jdGlvbiBjb25maWcoICRzdGF0ZVByb3ZpZGVyICkge1xuICBcbiAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoICdMaXN0ZTogUGluJywge1xuICAgIHVybDogJy9waW5zJyxcbiAgICB2aWV3czoge1xuICAgICAgXCJtYWluXCI6IHtcbiAgICAgICAgY29udHJvbGxlcjogJ1BpbnNDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvcGlucy92aWV3cy9saXN0LnRwbC5odG1sJ1xuICAgICAgfVxuICAgIH0sXG4gICAgZGF0YTp7IHBhZ2VUaXRsZTogJ1BpbnMnIH1cbiAgfSk7XG5cbn0pO1xuXG5KdWdlbmRzdGFkdHBsYW4uQ29udHJvbGxlcnMuY29udHJvbGxlciggJ1BpbnNDb250cm9sbGVyJywgWyAnJHNjb3BlJywgJyRsb2NhdGlvbicsICdQaW4nLCBmdW5jdGlvbiBQaW5zQ29udHJvbGxlciggJHNjb3BlLCAkbG9jYXRpb24sIFBpbiApIHtcbiAgICAkc2NvcGUucGlucyA9IFBpbi5xdWVyeSgpO1xuXG4gICAgJHNjb3BlLnZpZXdQaW4gPSBmdW5jdGlvbiAocGluKSB7XG4gICAgICAkbG9jYXRpb24ucGF0aCgnL3Bpbi8nK3Bpbi5pZCk7XG4gICAgfTtcblxufV0pOyIsIkp1Z2VuZHN0YWR0cGxhbi5Db250cm9sbGVycy5jb250cm9sbGVyKCAnQWRyZXNzZUZvcm1Db250cm9sbGVyJywgWyAnJHNjb3BlJyxcbiAgICBmdW5jdGlvbigkc2NvcGUpIHtcblxuICAgICAgICAkc2NvcGUuaXNBZHJlc3NlVmFsaWQgPSBmdW5jdGlvbihhZHJlc3NlKSB7XG4gICAgICAgICAgICBpZiAoYWRyZXNzZS5zdHJhc3NlID09PSB1bmRlZmluZWQgfHwgYWRyZXNzZS5zdHJhc3NlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYWRyZXNzZS5vcnQgPT09IHVuZGVmaW5lZCB8fCBhZHJlc3NlLm9ydC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcblxuICAgIH1dKTsiLCJKdWdlbmRzdGFkdHBsYW4uQ29udHJvbGxlcnMuY29udHJvbGxlciggJ1Rlcm1pbkZvcm1Db250cm9sbGVyJywgWyAnJHNjb3BlJyxcbiAgICBmdW5jdGlvbigkc2NvcGUpIHtcblxuICAgICAgICAvLyBXb2NoZW50YWdlXG4gICAgICAgICRzY29wZS53b2NoZW50YWdlID0gWyAnTW9udGFnJywgJ0RpZW5zdGFnJywgJ01pdHR3b2NoJywgJ0Rvbm5lcnN0YWcnLCAnRnJlaXRhZycsICdTYW1zdGFnJywgJ1Nvbm50YWcnIF07XG5cblxuICAgICAgICAvLyBUZXJtaW5cbiAgICAgICAgJHNjb3BlLm5ld1Rlcm1pbiA9IHt9O1xuICAgICAgICAkc2NvcGUuYWRkVGVybWluID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoJHNjb3BlLnBpbi50ZXJtaW5lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUucGluLnRlcm1pbmUgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRzY29wZS5waW4udGVybWluZS5wdXNoKCRzY29wZS5uZXdUZXJtaW4pO1xuICAgICAgICAgICAgJHNjb3BlLm5ld1Rlcm1pbiA9IHt9O1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5pc1Rlcm1pblZhbGlkID0gZnVuY3Rpb24odGVybWluKSB7XG4gICAgICAgICAgICBpZiAodGVybWluLmJlZ2lubiA9PT0gdW5kZWZpbmVkIHx8IHRlcm1pbi5iZWdpbm4gPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRlcm1pbi5nYW56dGFlZ2lnICE9PSB0cnVlICYmICh0ZXJtaW4uYmVnaW5uX3VocnplaXQgPT09IHVuZGVmaW5lZCB8fCB0ZXJtaW4uYmVnaW5uX3VocnplaXQgPT09IDApKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH07XG5cblxuICAgICAgICAvLyBXaWVkZXJob2x1bmdcbiAgICAgICAgJHNjb3BlLndvY2hlX2Rlc19tb25hdHMgPSBbXG4gICAgICAgICAgICB7IGlkOiAwLCBsYWJlbDogJ0plZGUgV29jaGUnIH0sXG4gICAgICAgICAgICB7IGlkOiAxLCBsYWJlbDogJ0plZGUgMS4gV29jaGUnIH0sXG4gICAgICAgICAgICB7IGlkOiAyLCBsYWJlbDogJ0plZGUgMi4gV29jaGUnIH0sXG4gICAgICAgICAgICB7IGlkOiAzLCBsYWJlbDogJ0plZGUgMy4gV29jaGUnIH0sXG4gICAgICAgICAgICB7IGlkOiA0LCBsYWJlbDogJ0plZGUgNC4gV29jaGUnIH0sXG4gICAgICAgICAgICB7IGlkOiA1LCBsYWJlbDogJ0plZGUgNS4gV29jaGUnIH1cbiAgICAgICAgXTtcbiAgICAgICAgJHNjb3BlLm5ld1dpZWRlcmhvbHVuZyA9IHt9O1xuICAgICAgICAkc2NvcGUuYWRkV2llZGVyaG9sdW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoJHNjb3BlLm5ld1Rlcm1pbi53aWVkZXJob2x1bmdlbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLm5ld1Rlcm1pbi53aWVkZXJob2x1bmdlbiA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHNjb3BlLm5ld1Rlcm1pbi53aWVkZXJob2x1bmdlbi5wdXNoKCRzY29wZS5uZXdXaWVkZXJob2x1bmcpO1xuICAgICAgICAgICAgJHNjb3BlLm5ld1dpZWRlcmhvbHVuZyA9IHt9O1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5pc1dpZWRlcmhvbHVuZ1ZhbGlkID0gZnVuY3Rpb24od2llZGVyaG9sdW5nKSB7XG4gICAgICAgICAgICBpZiAod2llZGVyaG9sdW5nLndvY2hlbnRhZyA9PT0gdW5kZWZpbmVkIHx8IHdpZWRlcmhvbHVuZy53b2NoZW50YWcgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcblxuICAgIH1dKTsiLCJhbmd1bGFyLm1vZHVsZSgnanVnZW5kc3RhZHRwbGFuLnRyYWVnZXInKS5jb25maWcoZnVuY3Rpb24gY29uZmlnKCAkc3RhdGVQcm92aWRlciApIHtcbiAgXG4gICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCAnTGlzdGU6IFRyYWVnZXInLCB7XG4gICAgdXJsOiAnL3RyYWVnZXInLFxuICAgIHZpZXdzOiB7XG4gICAgICBcIm1haW5cIjoge1xuICAgICAgICBjb250cm9sbGVyOiAnVHJhZWdlckNvbnRyb2xsZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC90cmFlZ2VyL3ZpZXdzL2xpc3RlLnRwbC5odG1sJ1xuICAgICAgfVxuICAgIH0sXG4gICAgZGF0YTp7IHBhZ2VUaXRsZTogJ1Ryw6RnZXInIH1cbiAgfSk7XG5cbn0pO1xuXG5KdWdlbmRzdGFkdHBsYW4uQ29udHJvbGxlcnMuY29udHJvbGxlciggJ1RyYWVnZXJDb250cm9sbGVyJywgWyAnJHNjb3BlJywgJyRsb2NhdGlvbicsICdUcmFlZ2VyJywgZnVuY3Rpb24gVHJhZWdlckNvbnRyb2xsZXIoICRzY29wZSwgJGxvY2F0aW9uLCBUcmFlZ2VyICkge1xuICAgICRzY29wZS50cmFlZ2VyID0gVHJhZWdlci5xdWVyeSgpO1xuXG4gICAgJHNjb3BlLnZpZXdUcmFlZ2VyID0gZnVuY3Rpb24gKHRyYWVnZXIpIHtcbiAgICAgICRsb2NhdGlvbi5wYXRoKCcvdHJhZWdlci8nK3RyYWVnZXIuaWQpO1xuICAgIH07XG5cbn1dKTsiLCJhbmd1bGFyLm1vZHVsZSgnanVnZW5kc3RhZHRwbGFuLnRyYWVnZXInKS5jb25maWcoZnVuY3Rpb24gY29uZmlnKCAkc3RhdGVQcm92aWRlciApIHtcbiAgXG4gICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCAnRGV0YWlsOiBUcmFlZ2VyJywge1xuICAgIHVybDogJy90cmFlZ2VyL3tpZDpbMC05XSt9JyxcbiAgICB2aWV3czoge1xuICAgICAgXCJtYWluXCI6IHtcbiAgICAgICAgY29udHJvbGxlcjogJ1RyYWVnZXJEZXRhaWxDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvdHJhZWdlci92aWV3cy9kZXRhaWwudHBsLmh0bWwnXG4gICAgICB9XG4gICAgfSxcbiAgICByZXNvbHZlOiB7XG4gICAgICB0cmFlZ2VyRGV0YWlsOiBbICckc3RhdGVQYXJhbXMnLCAnVHJhZWdlcicsIGZ1bmN0aW9uKCRzdGF0ZVBhcmFtcywgVHJhZWdlcikge1xuICAgICAgICByZXR1cm4gVHJhZWdlci5nZXQoe30se2lkOiAkc3RhdGVQYXJhbXMuaWR9KTtcbiAgICAgIH1dXG4gICAgfSxcbiAgICBkYXRhOnsgcGFnZVRpdGxlOiAnVHLDpGdlcicgfVxuICB9KTtcblxufSk7XG5cbkp1Z2VuZHN0YWR0cGxhbi5Db250cm9sbGVycy5jb250cm9sbGVyKCAnVHJhZWdlckRldGFpbENvbnRyb2xsZXInLCBbICckc2NvcGUnLCAndHJhZWdlckRldGFpbCcsIGZ1bmN0aW9uIFRyYWVnZXJEZXRhaWxDb250cm9sbGVyKCAkc2NvcGUsIHRyYWVnZXJEZXRhaWwgKSB7XG4gICAgJHNjb3BlLnRyYWVnZXIgPSB0cmFlZ2VyRGV0YWlsO1xuXG4gICAgYW5ndWxhci5leHRlbmQoJHNjb3BlLCB7XG4gICAgICAgIGNlbnRlcjoge1xuICAgICAgICAgICAgbGF0OiA1MC43MzI4MjkyNDY3MjYsXG4gICAgICAgICAgICBsbmc6IDcuMDkzNzAwNDA5MDExNyxcbiAgICAgICAgICAgIHpvb206IDEzXG4gICAgICAgIH0sXG4gICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICBzY3JvbGxXaGVlbFpvb206IGZhbHNlXG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgICRzY29wZS5tYXJrZXJzID0gW107XG5cbiAgICB0cmFlZ2VyRGV0YWlsLiRwcm9taXNlLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh0cmFlZ2VyRGV0YWlsLnBpbnMsIGZ1bmN0aW9uKGl0ZW0sIGtleSkge1xuICAgICAgICAgICAgdmFyIG1hcmtlciA9IHtcbiAgICAgICAgICAgICAgICBsYXQ6IGl0ZW0ubGF0aXR1ZGUsXG4gICAgICAgICAgICAgICAgbG5nOiBpdGVtLmxvbmdpdHVkZSxcbiAgICAgICAgICAgICAgICB0aXRsZTogaXRlbS50aXRlbCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnPGgzPicgKyBpdGVtLnRpdGVsICsgJzwvaDM+JyArIGl0ZW0uYmVzY2hyZWlidW5nICsgJzxzbWFsbD48YSBocmVmPVwiJyArICcvIy9waW4vJytpdGVtLmlkICsgJ1wiPk1laHI8L2E+PC9zbWFsbD4nXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgJHNjb3BlLm1hcmtlcnMucHVzaChtYXJrZXIpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1dKTsiLCJhbmd1bGFyLm1vZHVsZSgnanVnZW5kc3RhZHRwbGFuLnRyYWVnZXInKS5jb25maWcoZnVuY3Rpb24gY29uZmlnKCAkc3RhdGVQcm92aWRlciApIHtcblxuICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCAnRm9ybTogVHJhZWdlcicsIHtcbiAgICAgICAgdXJsOiAnL3RyYWVnZXIvY3JlYXRlJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAgIFwibWFpblwiOiB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1RyYWVnZXJGb3JtQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvdHJhZWdlci92aWV3cy9mb3JtLnRwbC5odG1sJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkYXRhOnsgcGFnZVRpdGxlOiAnVHLDpGdlciBlcnN0ZWxsZW4nIH1cbiAgICB9KTtcblxufSk7XG5cbkp1Z2VuZHN0YWR0cGxhbi5Db250cm9sbGVycy5jb250cm9sbGVyKCAnVHJhZWdlckZvcm1Db250cm9sbGVyJywgWyAnJHNjb3BlJywgJyRsb2NhdGlvbicsICdUcmFlZ2VyJywgJ0thdGVnb3JpZScsICdVcGxvYWQnLCBmdW5jdGlvbiBUcmFlZ2VyRm9ybUNvbnRyb2xsZXIoICRzY29wZSwgJGxvY2F0aW9uLCBUcmFlZ2VyLCBLYXRlZ29yaWUsIFVwbG9hZCApIHtcbiAgICAkc2NvcGUua2F0ZWdvcmllbiA9IEthdGVnb3JpZS5xdWVyeSgpO1xuICAgICRzY29wZS50cmFlZ2VyID0gbmV3IFRyYWVnZXIoKTtcbiAgICAkc2NvcGUudHJhZWdlcnMgPSBUcmFlZ2VyLnF1ZXJ5KCk7XG5cbiAgICAkc2NvcGUubmV3VHJhZWdlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2NvcGUudHJhZWdlciA9IG5ldyBUcmFlZ2VyKCk7XG4gICAgICAgICRzY29wZS5lZGl0aW5nID0gZmFsc2U7XG4gICAgfTtcblxuICAgICRzY29wZS5zYXZlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkc2NvcGUudHJhZWdlci5pZCkge1xuICAgICAgICAgICAgVHJhZWdlci51cGRhdGUoJHNjb3BlLnRyYWVnZXIpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLm5ld1RyYWVnZXIoKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGFsZXJ0KCdFaW4gVHLDpGdlciBtaXQgZGllc2VyIEVtYWlsLUFkcmVzc2UgZXhpc3RpZXJ0IGJlcmVpdHMhJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRzY29wZS50cmFlZ2VyLiRzYXZlKCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICRzY29wZS50cmFlZ2Vycy5wdXNoKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAkc2NvcGUubmV3VHJhZWdlcigpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoJ0VpbiBUcsOkZ2VyIG1pdCBkaWVzZXIgRW1haWwtQWRyZXNzZSBleGlzdGllcnQgYmVyZWl0cyEnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgICRzY29wZS5zZXRBY3RpdmVUcmFlZ2VyID0gZnVuY3Rpb24odHJhZWdlcikge1xuICAgICAgICAkc2NvcGUudHJhZWdlciA9IHRyYWVnZXI7XG4gICAgICAgICRzY29wZS5lZGl0aW5nID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnJlbW92ZSA9IGZ1bmN0aW9uKHRyYWVnZXIpIHtcbiAgICAgICAgVHJhZWdlci5kZWxldGUodHJhZWdlciwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAkc2NvcGUudHJhZWdlcnMuaW5kZXhPZih0cmFlZ2VyKTtcbiAgICAgICAgICAgIGlmIChpbmRleCAhPSAtMSkge1xuICAgICAgICAgICAgICAgICRzY29wZS50cmFlZ2Vycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8gQmlsZGVyXG4gICAgJHNjb3BlLm9uRmlsZVNlbGVjdCA9IGZ1bmN0aW9uKCRmaWxlcykge1xuICAgICAgICB2YXIgZG9VcGxvYWQgPSBmdW5jdGlvbihmaWxlKSB7XG4gICAgICAgICAgICBVcGxvYWQudXBsb2FkKHtcbiAgICAgICAgICAgICAgICB1cmw6ICdhcHBfZGV2LnBocC9pbWcvdXBsb2FkJywgLy91cGxvYWQucGhwIHNjcmlwdCwgbm9kZS5qcyByb3V0ZSwgb3Igc2VydmxldCB1cmxcbiAgICAgICAgICAgICAgICAvLyBtZXRob2Q6ICdQT1NUJyBvciAnUFVUJyxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAvLyBoZWFkZXJzOiB7J2hlYWRlci1rZXknOiAnaGVhZGVyLXZhbHVlJ30sXG4gICAgICAgICAgICAgICAgLy8gd2l0aENyZWRlbnRpYWxzOiB0cnVlLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtteU9iajogJHNjb3BlLm15TW9kZWxPYmp9LFxuICAgICAgICAgICAgICAgIGZpbGU6IGZpbGUgLy8gb3IgbGlzdCBvZiBmaWxlczogJGZpbGVzIGZvciBodG1sNSBvbmx5XG4gICAgICAgICAgICAgICAgLy8gZmlsZU5hbWU6ICdkb2MuanBnJyBvciBbJzEuanBnJywgJzIuanBnJywgLi4uXSAvLyB0byBtb2RpZnkgdGhlIG5hbWUgb2YgdGhlIGZpbGVcbiAgICAgICAgICAgICAgICAvKiBjdXN0b21pemUgZmlsZSBmb3JtRGF0YSBuYW1lICgnQ29udGVudC1EZXNwb3NpdGlvbicpLCBzZXJ2ZXIgc2lkZSBmaWxlIHZhcmlhYmxlIG5hbWUuXG4gICAgICAgICAgICAgICAgIERlZmF1bHQgaXMgJ2ZpbGUnICovXG4gICAgICAgICAgICAgICAgLy9maWxlRm9ybURhdGFOYW1lOiBteUZpbGUsIC8vb3IgYSBsaXN0IG9mIG5hbWVzIGZvciBtdWx0aXBsZSBmaWxlcyAoaHRtbDUpLlxuICAgICAgICAgICAgICAgIC8qIGN1c3RvbWl6ZSBob3cgZGF0YSBpcyBhZGRlZCB0byBmb3JtRGF0YS4gU2VlICM0MCNpc3N1ZWNvbW1lbnQtMjg2MTIwMDAgZm9yIHNhbXBsZSBjb2RlICovXG4gICAgICAgICAgICAgICAgLy9mb3JtRGF0YUFwcGVuZGVyOiBmdW5jdGlvbihmb3JtRGF0YSwga2V5LCB2YWwpe31cbiAgICAgICAgICAgIH0pLnByb2dyZXNzKGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncGVyY2VudDogJyArIHBhcnNlSW50KDEwMC4wICogZXZ0LmxvYWRlZCAvIGV2dC50b3RhbCkpO1xuICAgICAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpIHtcbiAgICAgICAgICAgICAgICAvLyBmaWxlIGlzIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseVxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUudHJhZWdlci5iaWxkZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudHJhZWdlci5iaWxkZXIgPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmlsZS50bXBfbmFtZSA9IGRhdGEuZm9sZGVyO1xuICAgICAgICAgICAgICAgICRzY29wZS50cmFlZ2VyLmJpbGRlci5wdXNoKGZpbGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLy5lcnJvciguLi4pXG4gICAgICAgICAgICAvLy50aGVuKHN1Y2Nlc3MsIGVycm9yLCBwcm9ncmVzcyk7XG4gICAgICAgICAgICAvLy54aHIoZnVuY3Rpb24oeGhyKXt4aHIudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoLi4uKX0pLy8gYWNjZXNzIGFuZCBhdHRhY2ggYW55IGV2ZW50IGxpc3RlbmVyIHRvIFhNTEh0dHBSZXF1ZXN0LlxuICAgICAgICB9O1xuXG4gICAgICAgIC8vJGZpbGVzOiBhbiBhcnJheSBvZiBmaWxlcyBzZWxlY3RlZCwgZWFjaCBmaWxlIGhhcyBuYW1lLCBzaXplLCBhbmQgdHlwZS5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkZmlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBmaWxlID0gJGZpbGVzW2ldO1xuICAgICAgICAgICAgJHNjb3BlLnVwbG9hZCA9IGRvVXBsb2FkKGZpbGUpO1xuICAgICAgICB9XG4gICAgfTtcblxuXG4gICAgLy8gQWRyZXNzZW5cbiAgICAkc2NvcGUubmV3QWRyZXNzZSA9IHt9O1xuICAgICRzY29wZS5hZGRBZHJlc3NlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkc2NvcGUudHJhZWdlci5hZHJlc3NlbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAkc2NvcGUudHJhZWdlci5hZHJlc3NlbiA9IFtdO1xuICAgICAgICB9XG4gICAgICAgICRzY29wZS50cmFlZ2VyLmFkcmVzc2VuLnB1c2goJHNjb3BlLm5ld0FkcmVzc2UpO1xuICAgICAgICAkc2NvcGUubmV3QWRyZXNzZSA9IHt9O1xuICAgIH07XG5cbiAgICAkc2NvcGUuaXNBZHJlc3NlVmFsaWQgPSBmdW5jdGlvbihhZHJlc3NlKSB7XG4gICAgICAgIGlmIChhZHJlc3NlLnN0cmFzc2UgPT09IHVuZGVmaW5lZCB8fCBhZHJlc3NlLnN0cmFzc2UubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAoYWRyZXNzZS5vcnQgPT09IHVuZGVmaW5lZCB8fCBhZHJlc3NlLm9ydC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG59XSk7IiwiSnVnZW5kc3RhZHRwbGFuLkNvbnRyb2xsZXJzLmNvbnRyb2xsZXIoICdMaW5rc0Zvcm1Db250cm9sbGVyJywgWyAnJHNjb3BlJyxcbiAgICBmdW5jdGlvbigkc2NvcGUpIHtcblxuICAgICAgICAvLyBMaW5rc1xuICAgICAgICAkc2NvcGUubmV3TGluayA9IHt9O1xuICAgICAgICAkc2NvcGUuYWRkTGluayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCRzY29wZS5tb2RlbC5saW5rcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLm1vZGVsLmxpbmtzID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkc2NvcGUubW9kZWwubGlua3MucHVzaCgkc2NvcGUubmV3TGluayk7XG4gICAgICAgICAgICAkc2NvcGUubmV3TGluayA9IHt9O1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5pc0xpbmtWYWxpZCA9IGZ1bmN0aW9uKGxpbmspIHtcbiAgICAgICAgICAgIGlmIChsaW5rLnRpdGVsID09PSB1bmRlZmluZWQgfHwgbGluay50aXRlbC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxpbmsudXJsID09PSB1bmRlZmluZWQgfHwgbGluay51cmwubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH07XG5cbiAgICB9XSk7IiwiYW5ndWxhci5tb2R1bGUoJ2p1Z2VuZHN0YWR0cGxhbi5zdGFydHNlaXRlJykuY29uZmlnKGZ1bmN0aW9uIGNvbmZpZyggJHN0YXRlUHJvdmlkZXIgKSB7XG4gIFxuICAkc3RhdGVQcm92aWRlci5zdGF0ZSggJ1N0YXJ0c2VpdGUnLCB7XG4gICAgdXJsOiAnL3N0YXJ0c2VpdGUnLFxuICAgIHZpZXdzOiB7XG4gICAgICBcIm1haW5cIjoge1xuICAgICAgICBjb250cm9sbGVyOiAnU3RhcnRzZWl0ZUNvbnRyb2xsZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9zdGFydHNlaXRlL3ZpZXdzL3N0YXJ0c2VpdGUudHBsLmh0bWwnXG4gICAgICB9XG4gICAgfSxcbiAgICBkYXRhOnsgcGFnZVRpdGxlOiAnU3RhcnRzZWl0ZScgfVxuICB9KTtcblxufSk7XG5cbmFuZ3VsYXIubW9kdWxlKCdqdWdlbmRzdGFkdHBsYW4uc3RhcnRzZWl0ZScpLmNvbnRyb2xsZXIoICdTdGFydHNlaXRlQ29udHJvbGxlcicsIFsgJyRzY29wZScsICckbG9jYXRpb24nLCAnUGluJywgJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24gU3RhcnRzZWl0ZUNvbnRyb2xsZXIoICRzY29wZSwgJGxvY2F0aW9uLCBQaW4sICR0ZW1wbGF0ZUNhY2hlICkge1xuICAgICBhbmd1bGFyLmV4dGVuZCgkc2NvcGUsIHtcbiAgICAgICAgY2VudGVyOiB7XG4gICAgICAgICAgICBsYXQ6IDUwLjczMjgyOTI0NjcyNixcbiAgICAgICAgICAgIGxuZzogNy4wOTM3MDA0MDkwMTE3LFxuICAgICAgICAgICAgem9vbTogMTNcbiAgICAgICAgfSxcbiAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICAgIHNjcm9sbFdoZWVsWm9vbTogZmFsc2VcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgJHNjb3BlLm1hcmtlcnMgPSBbXTtcblxuICAgIFBpbi5xdWVyeShmdW5jdGlvbihwaW5zKSB7XG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaChwaW5zLCBmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS5sb25naXR1ZGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHZhciBtYXJrZXIgPSB7XG4gICAgICAgICAgICAgICAgICAgIGxhdDogaXRlbS5sYXRpdHVkZSxcbiAgICAgICAgICAgICAgICAgICAgbG5nOiBpdGVtLmxvbmdpdHVkZSxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGl0ZW0udGl0ZWwsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICc8aDM+JyArIGl0ZW0udGl0ZWwgKyAnPC9oMz4nICsgaXRlbS5iZXNjaHJlaWJ1bmcgKyAnPHNtYWxsPjxhIGhyZWY9XCInICsgJy8jL3Bpbi8nICsgaXRlbS5pZCArICdcIj5NZWhyPC9hPjwvc21hbGw+J1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgJHNjb3BlLm1hcmtlcnMucHVzaChtYXJrZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcblxufV0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
