function LoginInterceptor(e){return{request:function(t){return e.localStorage.token&&(t.headers.Authorization="Bearer "+e.localStorage.token),t}}}var jugendstadtplanLogin=angular.module("jugendstadtplan.login",[]);jugendstadtplanLogin.service("LoginService",function(){var e=!1,t=null;return{isLoggedIn:function(){return e},setLoggedIn:function(t){e=t},setJugendstadtplanUser:function(e){t=e},getJugendstadtplanUser:function(){return t}}}),angular.module("jugendstadtplan.pins",["ui.router","jugendstadtplan.links","jugendstadtplan.ansprechpartner","jugendstadtplan.termin"]),angular.module("jugendstadtplan.links",[]),angular.module("jugendstadtplan.traeger",["ui.router","jugendstadtplan.login","jugendstadtplan.links","jugendstadtplan.ansprechpartner"]),angular.module("jugendstadtplan.termin",[]),angular.module("jugendstadtplan.startseite",["ui.router","leaflet-directive"]),angular.module("jugendstadtplan.ansprechpartner",[]);var Jugendstadtplan=Jugendstadtplan||{};Jugendstadtplan.Controllers=angular.module("jugendstadtplan.controllers",[]),angular.module("jugendstadtplan",["ngResource","ngSanitize","ui.router","leaflet-directive","textAngular","ngFileUpload","angular-jwt","jugendstadtplan.templates","jugendstadtplan.login","jugendstadtplan.api","jugendstadtplan.startseite","jugendstadtplan.pins","jugendstadtplan.traeger","jugendstadtplan.controllers"]).config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/startseite")}]).run(function(){}).controller("AppCtrl",["$scope","LoginService",function(e,t){e.$on("$stateChangeSuccess",function(t,n,r,a,i){angular.isDefined(n.data.pageTitle)&&(e.pageTitle=n.data.pageTitle+" | Jugendstadtplan")}),e.isLoggedIn=function(){return t.isLoggedIn()},e.getJugendstadtplanUser=function(){return t.getJugendstadtplanUser()}}]),angular.module("plusOne",[]).directive("plusOne",function(){return{link:function(e,t,n){gapi.plusone.render(t[0],{size:"medium",href:"http://bit.ly/ngBoilerplate"})}}}),angular.module("jugendstadtplan.pins").config(["$stateProvider",function(e){e.state("Detail: Pin",{url:"/pin/{id:[0-9]+}",views:{main:{controller:"PinDetailController",templateUrl:"app/pins/views/detail.tpl.html"}},resolve:{pinDetail:["$stateParams","Pin",function(e,t){return t.get({},{id:e.id})}]},data:{pageTitle:"Pin"}})}]),Jugendstadtplan.Controllers.controller("PinDetailController",["$scope","pinDetail",function(e,t){e.markers=[],e.center={lat:50.732829246726,lng:7.0937004090117,zoom:13},t.$promise.then(function(){e.pin=t,angular.extend(e,{defaults:{scrollWheelZoom:!1}}),e.center={lat:t.latitude,lng:t.longitude,zoom:15};var n={lat:t.latitude,lng:t.longitude,title:t.titel,focus:!0,message:"<h3>"+t.titel+"</h3>"+t.beschreibung};e.markers.push(n)},function(){angular.extend(e,{defaults:{scrollWheelZoom:!1}})})}]),angular.module("jugendstadtplan.pins").config(["$stateProvider",function(e){e.state("Form: Pin",{url:"/pin/create",views:{main:{controller:"PinFormController",templateUrl:"app/pins/views/form.tpl.html"}},data:{pageTitle:"Pin erstellen"}})}]),Jugendstadtplan.Controllers.controller("PinFormController",["$scope","$location","Pin","Traeger","Kategorie",function(e,t,n,r,a){e.kategorien=a.query(),e.pin=new n,e.pins=n.query(),e.traegers=r.query(),angular.extend(e,{center:{lat:50.732829246726,lng:7.0937004090117,zoom:13},defaults:{scrollWheelZoom:!1},events:{}}),e.pin.markers=[],e.$on("leafletDirectiveMap.click",function(t,n){var r=n.leafletEvent;e.pin.markers[0]={lat:r.latlng.lat,lng:r.latlng.lng,draggable:!0,focus:!0}}),e.newPin=function(){e.pin=new n,e.pin.markers=[],e.editing=!1},e.save=function(){e.pin.id?n.update(e.pin):e.pin.$save().then(function(t){e.pins.push(t)}),e.newPin()},e.setActivePin=function(t){e.pin=t,e.pin.markers=[],null!=t.longitude&&(e.pin.markers[0]={lat:t.latitude,lng:t.longitude,draggable:!0,focus:!0}),e.editing=!0},e.remove=function(t){n["delete"](t,function(){var n=e.pins.indexOf(t);-1!=n&&e.pins.splice(n,1)})},e.barrierefreiheitsgrade=["Gut","Teilweise","Nicht barrierefrei"],e.kostenarten=["Kostenlos","Kostenpflichtig"],e.mindestalters=["ab 12","ab 16","ab 18","ab 21"]}]),angular.module("jugendstadtplan.pins").config(["$stateProvider",function(e){e.state("Liste: Pin",{url:"/pins",views:{main:{controller:"PinsController",templateUrl:"app/pins/views/list.tpl.html"}},data:{pageTitle:"Pins"}})}]),Jugendstadtplan.Controllers.controller("PinsController",["$scope","$location","Pin",function(e,t,n){e.pins=n.query(),e.viewPin=function(e){t.path("/pin/"+e.id)}}]),Jugendstadtplan.Controllers.controller("LinksFormController",["$scope",function(e){e.newLink={},e.addLink=function(){void 0===e.model.links&&(e.model.links=[]),e.model.links.push(e.newLink),e.newLink={}},e.isLinkValid=function(e){return void 0===e.titel||0===e.titel.length?!1:void 0!==e.url&&0!==e.url.length}}]),angular.module("jugendstadtplan.traeger").config(["$stateProvider",function(e){e.state("Liste: Traeger",{url:"/traeger",views:{main:{controller:"TraegerController",templateUrl:"app/traeger/views/liste.tpl.html"}},data:{pageTitle:"Träger"}})}]),Jugendstadtplan.Controllers.controller("TraegerController",["$scope","$location","Traeger",function(e,t,n){e.traeger=n.query(),e.viewTraeger=function(e){t.path("/traeger/"+e.id)}}]),angular.module("jugendstadtplan.traeger").config(["$stateProvider",function(e){e.state("Detail: Traeger",{url:"/traeger/{id:[0-9]+}",views:{main:{controller:"TraegerDetailController",templateUrl:"app/traeger/views/detail.tpl.html"}},resolve:{traegerDetail:["$stateParams","Traeger",function(e,t){return t.get({},{id:e.id})}]},data:{pageTitle:"Träger"}})}]),Jugendstadtplan.Controllers.controller("TraegerDetailController",["$scope","traegerDetail",function(e,t){e.traeger=t,angular.extend(e,{center:{lat:50.732829246726,lng:7.0937004090117,zoom:13},defaults:{scrollWheelZoom:!1}}),e.markers=[],t.$promise.then(function(){angular.forEach(t.pins,function(t,n){var r={lat:t.latitude,lng:t.longitude,title:t.titel,message:"<h3>"+t.titel+"</h3>"+t.beschreibung+'<small><a href="/#/pin/'+t.id+'">Mehr</a></small>'};e.markers.push(r)})})}]),angular.module("jugendstadtplan.traeger").config(["$stateProvider",function(e){e.state("Form: Traeger",{url:"/traeger/create",views:{main:{controller:"TraegerFormController",templateUrl:"app/traeger/views/form.tpl.html"}},data:{pageTitle:"Träger erstellen"}})}]),Jugendstadtplan.Controllers.controller("TraegerFormController",["$scope","$location","Traeger","Kategorie","Upload",function(e,t,n,r,a){e.kategorien=r.query(),e.traeger=new n,e.traegers=n.query(),e.newTraeger=function(){e.traeger=new n,e.editing=!1},e.save=function(){e.traeger.id?n.update(e.traeger).then(function(){e.newTraeger()},function(){alert("Ein Träger mit dieser Email-Adresse existiert bereits!")}):e.traeger.$save().then(function(t){e.traegers.push(t),e.newTraeger()},function(){alert("Ein Träger mit dieser Email-Adresse existiert bereits!")})},e.setActiveTraeger=function(t){e.traeger=t,e.editing=!0},e.remove=function(t){n["delete"](t,function(){var n=e.traegers.indexOf(t);-1!=n&&e.traegers.splice(n,1)})},e.onFileSelect=function(t){for(var n=function(t){a.upload({url:"app_dev.php/img/upload",method:"POST",data:{myObj:e.myModelObj},file:t}).progress(function(e){console.log("percent: "+parseInt(100*e.loaded/e.total))}).success(function(n,r,a,i){void 0===e.traeger.bilder&&(e.traeger.bilder=[]),t.tmp_name=n.folder,e.traeger.bilder.push(t)})},r=0;r<t.length;r++){var i=t[r];e.upload=n(i)}},e.newAdresse={},e.addAdresse=function(){void 0===e.traeger.adressen&&(e.traeger.adressen=[]),e.traeger.adressen.push(e.newAdresse),e.newAdresse={}},e.isAdresseValid=function(e){return void 0===e.strasse||0===e.strasse.length?!1:void 0!==e.ort&&0!==e.ort.length}}]),angular.module("jugendstadtplan.traeger").config(["$stateProvider",function(e){e.state("Login: Traeger",{url:"/traeger/login",views:{main:{controller:"TraegerLoginController",templateUrl:"app/traeger/views/login.tpl.html"}},data:{pageTitle:"Einloggen"}})}]),Jugendstadtplan.Controllers.controller("TraegerLoginController",["$scope","$state","$window","LoginService","jwtHelper","Traeger",function(e,t,n,r,a,i){e.traeger=new i,e.login=function(){e.traeger.$login().then(function(e){n.localStorage.token=e.token;var i=a.decodeToken(e.token);r.setLoggedIn(!0),r.setJugendstadtplanUser(i.traeger),t.go("Startseite")},function(t){e.error={msg:"Authentifizierung fehlgeschlagen!"}})}}]),Jugendstadtplan.Controllers.controller("TerminFormController",["$scope",function(e){e.wochentage=["Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag","Sonntag"],e.newTermin={},e.addTermin=function(){void 0===e.pin.termine&&(e.pin.termine=[]),e.pin.termine.push(e.newTermin),e.newTermin={}},e.isTerminValid=function(e){return void 0===e.beginn||0===e.beginn?!1:e.ganztaegig===!0||void 0!==e.beginn_uhrzeit&&0!==e.beginn_uhrzeit},e.woche_des_monats=[{id:0,label:"Jede Woche"},{id:1,label:"Jede 1. Woche"},{id:2,label:"Jede 2. Woche"},{id:3,label:"Jede 3. Woche"},{id:4,label:"Jede 4. Woche"},{id:5,label:"Jede 5. Woche"}],e.newWiederholung={},e.addWiederholung=function(){void 0===e.newTermin.wiederholungen&&(e.newTermin.wiederholungen=[]),e.newTermin.wiederholungen.push(e.newWiederholung),e.newWiederholung={}},e.isWiederholungValid=function(e){return void 0!==e.wochentag&&0!==e.wochentag}}]),angular.module("jugendstadtplan.startseite").config(["$stateProvider",function(e){e.state("Startseite",{url:"/startseite",views:{main:{controller:"StartseiteController",templateUrl:"app/startseite/views/startseite.tpl.html"}},data:{pageTitle:"Startseite"}})}]),angular.module("jugendstadtplan.startseite").controller("StartseiteController",["$scope","$location","Pin",function(e,t,n){angular.extend(e,{center:{lat:50.732829246726,lng:7.0937004090117,zoom:13},defaults:{scrollWheelZoom:!1}}),e.markers=[],n.query(function(t){angular.forEach(t,function(t){if(null!=t.longitude){var n={lat:t.latitude,lng:t.longitude,title:t.titel,message:"<h3>"+t.titel+"</h3>"+t.beschreibung+'<small><a href="/#/pin/'+t.id+'">Mehr</a></small>'};e.markers.push(n)}})})}]);var jugendstadtplanApi=angular.module("jugendstadtplan.api",["ngResource"]),backendPrefix="http://api.jugendstadtplan.dev";jugendstadtplanApi.provider("Pin",function(){this.$get=["$resource",function(e){var t=backendPrefix+"/pins";return e(t,{},{get:{method:"GET",url:t+"/:id",params:{id:"@id"}},update:{method:"PUT",url:t+"/update/:id",params:{id:"@id"},interceptor:LoginInterceptor},save:{method:"POST",url:t+"/create",interceptor:LoginInterceptor},"delete":{method:"DELETE",url:t+"/delete/:id",params:{id:"@id"},interceptor:LoginInterceptor}})}]}),jugendstadtplanApi.provider("Traeger",function(){this.$get=["$resource",function(e){var t=backendPrefix+"/traeger";return e(t,{},{get:{method:"GET",url:t+"/:id",params:{id:"@id"}},update:{method:"PUT",url:t+"/update/:id",params:{id:"@id"},interceptor:LoginInterceptor},save:{method:"POST",url:t+"/create"},"delete":{method:"DELETE",url:t+"/delete/:id",params:{id:"@id"},interceptor:LoginInterceptor},login:{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:backendPrefix+"/authentication/traeger_check",transformRequest:function(e,t){var n=[];for(var r in e)n.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return n.join("&")}}})}]}),jugendstadtplanApi.provider("Kategorie",function(){this.$get=["$resource",function(e){var t=backendPrefix+"/kategorie";return e(t)}]}),Jugendstadtplan.Controllers.controller("AnsprechpartnerFormController",["$scope",function(e){e.newAnsprechpartner={},e.addAnsprechpartner=function(){void 0===e.model.ansprechpartner&&(e.model.ansprechpartner=[]),e.model.ansprechpartner.push(e.newAnsprechpartner),e.newAnsprechpartner={}},e.isAnsprechpartnerValid=function(e){return void 0===e.name||0===e.name.length?!1:void 0!==e.email&&0!==e.email.length}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi9yZXNvdXJjZXMvSnVnZW5kc3RhZHRwbGFuQXBpLmpzIiwiY29tbW9uL3Jlc291cmNlcy9Mb2dpblNlcnZpY2UuanMiLCJhcHAvcGlucy9QaW5zTW9kdWxlLmpzIiwiYXBwL2xpbmtzL0xpbmtzTW9kdWxlLmpzIiwiYXBwL3RyYWVnZXIvVHJhZWdlck1vZHVsZS5qcyIsImFwcC90ZXJtaW4vVGVybWluTW9kdWxlLmpzIiwiYXBwL3N0YXJ0c2VpdGUvU3RhcnRzZWl0ZU1vZHVsZS5qcyIsImFwcC9hbnNwcmVjaHBhcnRuZXIvQW5zcHJlY2hwYXJ0bmVyTW9kdWxlLmpzIiwiYXBwL2FwcC5qcyIsImNvbW1vbi9wbHVzT25lL3BsdXNPbmUuanMiLCJhcHAvcGlucy9QaW5EZXRhaWxDb250cm9sbGVyLmpzIiwiYXBwL3BpbnMvUGluRm9ybUNvbnRyb2xsZXIuanMiLCJhcHAvcGlucy9QaW5zQ29udHJvbGxlci5qcyIsImFwcC9saW5rcy9MaW5rc0Zvcm1Db250cm9sbGVyLmpzIiwiYXBwL3RyYWVnZXIvVHJhZWdlckNvbnRyb2xsZXIuanMiLCJhcHAvdHJhZWdlci9UcmFlZ2VyRGV0YWlsQ29udHJvbGxlci5qcyIsImFwcC90cmFlZ2VyL1RyYWVnZXJGb3JtQ29udHJvbGxlci5qcyIsImFwcC90cmFlZ2VyL1RyYWVnZXJMb2dpbkNvbnRyb2xsZXIuanMiLCJhcHAvdGVybWluL1Rlcm1pbkZvcm1Db250cm9sbGVyLmpzIiwiYXBwL3N0YXJ0c2VpdGUvU3RhcnRzZWl0ZUNvbnRyb2xsZXIuanMiLCJhcHAvYW5zcHJlY2hwYXJ0bmVyL0Fuc3ByZWNocGFydG5lckZvcm1Db250cm9sbGVyLmpzIl0sIm5hbWVzIjpbIkxvZ2luSW50ZXJjZXB0b3IiLCIkd2luZG93IiwicmVxdWVzdCIsImNvbmZpZyIsImxvY2FsU3RvcmFnZSIsInRva2VuIiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJqdWdlbmRzdGFkdHBsYW5Mb2dpbiIsImFuZ3VsYXIiLCJtb2R1bGUiLCJzZXJ2aWNlIiwiYXV0aGVudGljYXRlZCIsInRyYWVnZXIiLCJpc0xvZ2dlZEluIiwic2V0TG9nZ2VkSW4iLCJsb2dnZWRJbiIsInNldEp1Z2VuZHN0YWR0cGxhblVzZXIiLCJ1c2VyIiwiZ2V0SnVnZW5kc3RhZHRwbGFuVXNlciIsIkp1Z2VuZHN0YWR0cGxhbiIsIkNvbnRyb2xsZXJzIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJvdGhlcndpc2UiLCJydW4iLCJjb250cm9sbGVyIiwiJHNjb3BlIiwiTG9naW5TZXJ2aWNlIiwiJG9uIiwiZXZlbnQiLCJ0b1N0YXRlIiwidG9QYXJhbXMiLCJmcm9tU3RhdGUiLCJmcm9tUGFyYW1zIiwiaXNEZWZpbmVkIiwiZGF0YSIsInBhZ2VUaXRsZSIsImRpcmVjdGl2ZSIsImxpbmsiLCJzY29wZSIsImVsZW1lbnQiLCJhdHRycyIsImdhcGkiLCJwbHVzb25lIiwicmVuZGVyIiwic2l6ZSIsImhyZWYiLCJzdGF0ZSIsInVybCIsInZpZXdzIiwibWFpbiIsInRlbXBsYXRlVXJsIiwicmVzb2x2ZSIsInBpbkRldGFpbCIsIiRzdGF0ZVBhcmFtcyIsIlBpbiIsImdldCIsImlkIiwibWFya2VycyIsImNlbnRlciIsImxhdCIsImxuZyIsInpvb20iLCIkcHJvbWlzZSIsInRoZW4iLCJwaW4iLCJleHRlbmQiLCJkZWZhdWx0cyIsInNjcm9sbFdoZWVsWm9vbSIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwibWFya2VyIiwidGl0bGUiLCJ0aXRlbCIsImZvY3VzIiwibWVzc2FnZSIsImJlc2NocmVpYnVuZyIsInB1c2giLCIkbG9jYXRpb24iLCJUcmFlZ2VyIiwiS2F0ZWdvcmllIiwia2F0ZWdvcmllbiIsInF1ZXJ5IiwicGlucyIsInRyYWVnZXJzIiwiZXZlbnRzIiwiYXJncyIsImxlYWZFdmVudCIsImxlYWZsZXRFdmVudCIsImxhdGxuZyIsImRyYWdnYWJsZSIsIm5ld1BpbiIsImVkaXRpbmciLCJzYXZlIiwidXBkYXRlIiwiJHNhdmUiLCJyZXNwb25zZSIsInNldEFjdGl2ZVBpbiIsInJlbW92ZSIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsImJhcnJpZXJlZnJlaWhlaXRzZ3JhZGUiLCJrb3N0ZW5hcnRlbiIsIm1pbmRlc3RhbHRlcnMiLCJ2aWV3UGluIiwicGF0aCIsIm5ld0xpbmsiLCJhZGRMaW5rIiwidW5kZWZpbmVkIiwibW9kZWwiLCJsaW5rcyIsImlzTGlua1ZhbGlkIiwibGVuZ3RoIiwidmlld1RyYWVnZXIiLCJ0cmFlZ2VyRGV0YWlsIiwiZm9yRWFjaCIsIml0ZW0iLCJrZXkiLCJVcGxvYWQiLCJuZXdUcmFlZ2VyIiwiYWxlcnQiLCJzZXRBY3RpdmVUcmFlZ2VyIiwib25GaWxlU2VsZWN0IiwiJGZpbGVzIiwiZG9VcGxvYWQiLCJmaWxlIiwidXBsb2FkIiwibWV0aG9kIiwibXlPYmoiLCJteU1vZGVsT2JqIiwicHJvZ3Jlc3MiLCJldnQiLCJjb25zb2xlIiwibG9nIiwicGFyc2VJbnQiLCJsb2FkZWQiLCJ0b3RhbCIsInN1Y2Nlc3MiLCJzdGF0dXMiLCJiaWxkZXIiLCJ0bXBfbmFtZSIsImZvbGRlciIsImkiLCJuZXdBZHJlc3NlIiwiYWRkQWRyZXNzZSIsImFkcmVzc2VuIiwiaXNBZHJlc3NlVmFsaWQiLCJhZHJlc3NlIiwic3RyYXNzZSIsIm9ydCIsIiRzdGF0ZSIsImp3dEhlbHBlciIsImxvZ2luIiwiJGxvZ2luIiwiZGVjb2RlZCIsImRlY29kZVRva2VuIiwiZ28iLCJlcnJvciIsIm1zZyIsIndvY2hlbnRhZ2UiLCJuZXdUZXJtaW4iLCJhZGRUZXJtaW4iLCJ0ZXJtaW5lIiwiaXNUZXJtaW5WYWxpZCIsInRlcm1pbiIsImJlZ2lubiIsImdhbnp0YWVnaWciLCJiZWdpbm5fdWhyemVpdCIsIndvY2hlX2Rlc19tb25hdHMiLCJsYWJlbCIsIm5ld1dpZWRlcmhvbHVuZyIsImFkZFdpZWRlcmhvbHVuZyIsIndpZWRlcmhvbHVuZ2VuIiwiaXNXaWVkZXJob2x1bmdWYWxpZCIsIndpZWRlcmhvbHVuZyIsIndvY2hlbnRhZyIsImp1Z2VuZHN0YWR0cGxhbkFwaSIsImJhY2tlbmRQcmVmaXgiLCJwcm92aWRlciIsInRoaXMiLCIkZ2V0IiwiJHJlc291cmNlIiwiYmFja2VuZFVybCIsInBhcmFtcyIsImludGVyY2VwdG9yIiwiZGVsZXRlIiwiQ29udGVudC1UeXBlIiwidHJhbnNmb3JtUmVxdWVzdCIsImhlYWRlcnNHZXR0ZXIiLCJzdHIiLCJkIiwiZW5jb2RlVVJJQ29tcG9uZW50Iiwiam9pbiIsIm5ld0Fuc3ByZWNocGFydG5lciIsImFkZEFuc3ByZWNocGFydG5lciIsImFuc3ByZWNocGFydG5lciIsImlzQW5zcHJlY2hwYXJ0bmVyVmFsaWQiLCJuYW1lIiwiZW1haWwiXSwibWFwcGluZ3MiOiJBQUVBLFFBQUFBLGtCQUFBQyxHQUNBLE9BQ0FDLFFBQUEsU0FBQUMsR0FLQSxNQUpBRixHQUFBRyxhQUFBQyxRQUNBRixFQUFBRyxRQUFBQyxjQUFBLFVBQUFOLEVBQUFHLGFBQUFDLE9BR0FGLElDVEEsR0FBQUssc0JBQUFDLFFBQUFDLE9BQUEsMkJBRUFGLHNCQUFBRyxRQUFBLGVBQUEsV0FDQSxHQUFBQyxJQUFBLEVBQ0FDLEVBQUEsSUFFQSxRQUNBQyxXQUFBLFdBQ0EsTUFBQUYsSUFHQUcsWUFBQSxTQUFBQyxHQUNBSixFQUFBSSxHQUdBQyx1QkFBQSxTQUFBQyxHQUNBTCxFQUFBSyxHQUdBQyx1QkFBQSxXQUNBLE1BQUFOLE9DcEJBSixRQUFBQyxPQUFBLHdCQUNBLFlBQ0Esd0JBQ0Esa0NBQ0EsMkJDSkFELFFBQUFDLE9BQUEsNEJDQUFELFFBQUFDLE9BQUEsMkJBQ0EsWUFDQSx3QkFDQSx3QkFDQSxvQ0NKQUQsUUFBQUMsT0FBQSw2QkNBQUQsUUFBQUMsT0FBQSw4QkFDQSxZQUNBLHNCQ0ZBRCxRQUFBQyxPQUFBLHFDQ0FBLElBQUFVLGlCQUFBQSxtQkFDQUEsaUJBQUFDLFlBQUFaLFFBQUFDLE9BQUEsa0NBRUFELFFBQUFDLE9BQUEsbUJBQ0EsYUFDQSxhQUNBLFlBQ0Esb0JBQ0EsY0FDQSxlQUNBLGNBQ0EsNEJB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QUdBQSxFQUFBd0ssc0JBQ0F4SyxFQUFBeUssbUJBQUEsV0FDQXRGLFNBQUFuRixFQUFBb0YsTUFBQXNGLGtCQUNBMUssRUFBQW9GLE1BQUFzRixvQkFFQTFLLEVBQUFvRixNQUFBc0YsZ0JBQUF2SCxLQUFBbkQsRUFBQXdLLG9CQUNBeEssRUFBQXdLLHVCQUdBeEssRUFBQTJLLHVCQUFBLFNBQUFELEdBQ0EsTUFBQXZGLFVBQUF1RixFQUFBRSxNQUFBLElBQUFGLEVBQUFFLEtBQUFyRixRQUNBLEVBQ0FKLFNBQUF1RixFQUFBRyxPQUFBLElBQUFILEVBQUFHLE1BQUF0RiIsImZpbGUiOiJqdWdlbmRzdGFkdHBsYW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGp1Z2VuZHN0YWR0cGxhbkFwaSA9IGFuZ3VsYXIubW9kdWxlKCdqdWdlbmRzdGFkdHBsYW4uYXBpJywgWyduZ1Jlc291cmNlJ10pO1xuXG5mdW5jdGlvbiBMb2dpbkludGVyY2VwdG9yKCR3aW5kb3cpe1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlcXVlc3Q6IGZ1bmN0aW9uKGNvbmZpZykge1xuICAgICAgICAgICAgaWYgKCR3aW5kb3cubG9jYWxTdG9yYWdlLnRva2VuKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9ICdCZWFyZXIgJyArICR3aW5kb3cubG9jYWxTdG9yYWdlLnRva2VuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gY29uZmlnO1xuICAgICAgICB9XG4gICAgfVxufVxuXG52YXIgYmFja2VuZFByZWZpeCA9ICdodHRwOi8vYXBpLmp1Z2VuZHN0YWR0cGxhbi5kZXYnO1xuXG5qdWdlbmRzdGFkdHBsYW5BcGkucHJvdmlkZXIoJ1BpbicsIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuJGdldCA9IFsnJHJlc291cmNlJywgZnVuY3Rpb24gKCRyZXNvdXJjZSkge1xuICAgICAgICB2YXIgYmFja2VuZFVybCA9IGJhY2tlbmRQcmVmaXggKyAnL3BpbnMnO1xuICAgICAgICByZXR1cm4gJHJlc291cmNlKGJhY2tlbmRVcmwsIHt9LCB7XG4gICAgICAgICAgICBnZXQ6IHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIHVybDogYmFja2VuZFVybCArICcvOmlkJyxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHsgaWQ6J0BpZCd9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdXBkYXRlOiB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICAgICAgICB1cmw6IGJhY2tlbmRVcmwgKyAnL3VwZGF0ZS86aWQnLFxuICAgICAgICAgICAgICAgIHBhcmFtczogeyBpZDonQGlkJ30sXG4gICAgICAgICAgICAgICAgaW50ZXJjZXB0b3I6IExvZ2luSW50ZXJjZXB0b3JcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzYXZlOiB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgdXJsOiBiYWNrZW5kVXJsICsgJy9jcmVhdGUnLFxuICAgICAgICAgICAgICAgIGludGVyY2VwdG9yOiBMb2dpbkludGVyY2VwdG9yXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVsZXRlOiB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgICAgICAgICB1cmw6IGJhY2tlbmRVcmwgKyAnL2RlbGV0ZS86aWQnLFxuICAgICAgICAgICAgICAgIHBhcmFtczogeyBpZDonQGlkJ30sXG4gICAgICAgICAgICAgICAgaW50ZXJjZXB0b3I6IExvZ2luSW50ZXJjZXB0b3JcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfV07XG59KTtcblxuanVnZW5kc3RhZHRwbGFuQXBpLnByb3ZpZGVyKCdUcmFlZ2VyJywgZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kZ2V0ID0gWyckcmVzb3VyY2UnLCBmdW5jdGlvbiAoJHJlc291cmNlKSB7XG4gICAgICAgIHZhciBiYWNrZW5kVXJsID0gYmFja2VuZFByZWZpeCArICcvdHJhZWdlcic7XG4gICAgICAgIHJldHVybiAkcmVzb3VyY2UoYmFja2VuZFVybCwge30sIHtcbiAgICAgICAgICAgIGdldDoge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgdXJsOiBiYWNrZW5kVXJsICsgJy86aWQnLFxuICAgICAgICAgICAgICAgIHBhcmFtczogeyBpZDonQGlkJ31cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1cGRhdGU6IHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICAgICAgICAgIHVybDogYmFja2VuZFVybCArICcvdXBkYXRlLzppZCcsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiB7IGlkOidAaWQnfSxcbiAgICAgICAgICAgICAgICBpbnRlcmNlcHRvcjogTG9naW5JbnRlcmNlcHRvclxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNhdmU6IHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICB1cmw6IGJhY2tlbmRVcmwgKyAnL2NyZWF0ZSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZWxldGU6IHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICAgICAgICAgIHVybDogYmFja2VuZFVybCArICcvZGVsZXRlLzppZCcsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiB7IGlkOidAaWQnfSxcbiAgICAgICAgICAgICAgICBpbnRlcmNlcHRvcjogTG9naW5JbnRlcmNlcHRvclxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxvZ2luOiB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ30sXG4gICAgICAgICAgICAgICAgdXJsOiBiYWNrZW5kUHJlZml4ICsgJy9hdXRoZW50aWNhdGlvbi90cmFlZ2VyX2NoZWNrJyxcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1SZXF1ZXN0OiBmdW5jdGlvbiAoZGF0YSwgaGVhZGVyc0dldHRlcikge1xuICAgICAgICAgICAgICAgICAgICAvLyBUcmFuc2Zvcm0gSlNPTiBpbnRvIHJlZ3VsYXIgZm9ybSB2YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0ciA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBkIGluIGRhdGEpXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIucHVzaChlbmNvZGVVUklDb21wb25lbnQoZCkgKyBcIj1cIiArIGVuY29kZVVSSUNvbXBvbmVudChkYXRhW2RdKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHIuam9pbihcIiZcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XTtcbn0pO1xuXG5qdWdlbmRzdGFkdHBsYW5BcGkucHJvdmlkZXIoJ0thdGVnb3JpZScsIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuJGdldCA9IFsnJHJlc291cmNlJywgZnVuY3Rpb24gKCRyZXNvdXJjZSkge1xuICAgICAgICB2YXIgYmFja2VuZFVybCA9IGJhY2tlbmRQcmVmaXggKyAnL2thdGVnb3JpZSc7XG4gICAgICAgIHJldHVybiAkcmVzb3VyY2UoYmFja2VuZFVybCk7XG4gICAgfV07XG59KTsiLCJ2YXIganVnZW5kc3RhZHRwbGFuTG9naW4gPSBhbmd1bGFyLm1vZHVsZSgnanVnZW5kc3RhZHRwbGFuLmxvZ2luJywgW10pO1xuXG5qdWdlbmRzdGFkdHBsYW5Mb2dpbi5zZXJ2aWNlKCdMb2dpblNlcnZpY2UnLCBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXV0aGVudGljYXRlZCA9IGZhbHNlO1xuICAgIHZhciB0cmFlZ2VyID0gbnVsbDtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGlzTG9nZ2VkSW46IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBhdXRoZW50aWNhdGVkO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNldExvZ2dlZEluOiBmdW5jdGlvbiAobG9nZ2VkSW4pIHtcbiAgICAgICAgICAgIGF1dGhlbnRpY2F0ZWQgPSBsb2dnZWRJbjtcbiAgICAgICAgfSxcblxuICAgICAgICBzZXRKdWdlbmRzdGFkdHBsYW5Vc2VyOiBmdW5jdGlvbih1c2VyKSB7XG4gICAgICAgICAgICB0cmFlZ2VyID0gdXNlcjtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRKdWdlbmRzdGFkdHBsYW5Vc2VyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0cmFlZ2VyO1xuICAgICAgICB9XG4gICAgfVxufSk7IiwiYW5ndWxhci5tb2R1bGUoICdqdWdlbmRzdGFkdHBsYW4ucGlucycsIFtcbiAgJ3VpLnJvdXRlcicsXG4gICdqdWdlbmRzdGFkdHBsYW4ubGlua3MnLFxuICAnanVnZW5kc3RhZHRwbGFuLmFuc3ByZWNocGFydG5lcicsXG4gICdqdWdlbmRzdGFkdHBsYW4udGVybWluJ1xuXSk7IiwiYW5ndWxhci5tb2R1bGUoICdqdWdlbmRzdGFkdHBsYW4ubGlua3MnLCBbXG5dKTsiLCJhbmd1bGFyLm1vZHVsZSggJ2p1Z2VuZHN0YWR0cGxhbi50cmFlZ2VyJywgW1xuICAndWkucm91dGVyJyxcbiAgJ2p1Z2VuZHN0YWR0cGxhbi5sb2dpbicsXG4gICdqdWdlbmRzdGFkdHBsYW4ubGlua3MnLFxuICAnanVnZW5kc3RhZHRwbGFuLmFuc3ByZWNocGFydG5lcidcbl0pOyIsImFuZ3VsYXIubW9kdWxlKCAnanVnZW5kc3RhZHRwbGFuLnRlcm1pbicsIFtcbl0pOyIsImFuZ3VsYXIubW9kdWxlKCAnanVnZW5kc3RhZHRwbGFuLnN0YXJ0c2VpdGUnLCBbXG4gICd1aS5yb3V0ZXInLFxuICAnbGVhZmxldC1kaXJlY3RpdmUnXG5dKTsiLCJhbmd1bGFyLm1vZHVsZSggJ2p1Z2VuZHN0YWR0cGxhbi5hbnNwcmVjaHBhcnRuZXInLCBbXG5dKTsiLCJ2YXIgSnVnZW5kc3RhZHRwbGFuID0gSnVnZW5kc3RhZHRwbGFuIHx8IHt9O1xuSnVnZW5kc3RhZHRwbGFuLkNvbnRyb2xsZXJzID0gYW5ndWxhci5tb2R1bGUoJ2p1Z2VuZHN0YWR0cGxhbi5jb250cm9sbGVycycsIFtdKTtcblxuYW5ndWxhci5tb2R1bGUoICdqdWdlbmRzdGFkdHBsYW4nLCBbXG4gICduZ1Jlc291cmNlJyxcbiAgJ25nU2FuaXRpemUnLFxuICAndWkucm91dGVyJyxcbiAgJ2xlYWZsZXQtZGlyZWN0aXZlJyxcbiAgJ3RleHRBbmd1bGFyJyxcbiAgJ25nRmlsZVVwbG9hZCcsXG4gICdhbmd1bGFyLWp3dCcsXG4gICdqdWdlbmRzdGFkdHBsYW4udGVtcGxhdGVzJyxcbiAgJ2p1Z2VuZHN0YWR0cGxhbi5sb2dpbicsXG4gICdqdWdlbmRzdGFkdHBsYW4uYXBpJyxcbiAgJ2p1Z2VuZHN0YWR0cGxhbi5zdGFydHNlaXRlJyxcbiAgJ2p1Z2VuZHN0YWR0cGxhbi5waW5zJyxcbiAgJ2p1Z2VuZHN0YWR0cGxhbi50cmFlZ2VyJyxcbiAgJ2p1Z2VuZHN0YWR0cGxhbi5jb250cm9sbGVycydcbl0pXG5cbi5jb25maWcoWyAnJHN0YXRlUHJvdmlkZXInLCAnJHVybFJvdXRlclByb3ZpZGVyJywgZnVuY3Rpb24gbXlBcHBDb25maWcoICRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIgKSB7XG4gICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoICcvc3RhcnRzZWl0ZScgKTtcbn1dKVxuXG4ucnVuKCBmdW5jdGlvbiBydW4gKCkge1xufSlcblxuLmNvbnRyb2xsZXIoICdBcHBDdHJsJywgWyAnJHNjb3BlJywgJ0xvZ2luU2VydmljZScsIGZ1bmN0aW9uIEFwcEN0cmwoJHNjb3BlLCBMb2dpblNlcnZpY2Upe1xuXG4gICRzY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbihldmVudCwgdG9TdGF0ZSwgdG9QYXJhbXMsIGZyb21TdGF0ZSwgZnJvbVBhcmFtcyl7XG4gICAgaWYgKCBhbmd1bGFyLmlzRGVmaW5lZCggdG9TdGF0ZS5kYXRhLnBhZ2VUaXRsZSApICkge1xuICAgICAgJHNjb3BlLnBhZ2VUaXRsZSA9IHRvU3RhdGUuZGF0YS5wYWdlVGl0bGUgKyAnIHwgSnVnZW5kc3RhZHRwbGFuJyA7XG4gICAgfVxuICB9KTtcblxuICAkc2NvcGUuaXNMb2dnZWRJbiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBMb2dpblNlcnZpY2UuaXNMb2dnZWRJbigpO1xuICB9O1xuICBcbiAgJHNjb3BlLmdldEp1Z2VuZHN0YWR0cGxhblVzZXIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gTG9naW5TZXJ2aWNlLmdldEp1Z2VuZHN0YWR0cGxhblVzZXIoKTtcbiAgfTtcblxufV0pXG5cbjsiLCJhbmd1bGFyLm1vZHVsZSggJ3BsdXNPbmUnLCBbXSApXG5cbi5kaXJlY3RpdmUoICdwbHVzT25lJywgZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgbGluazogZnVuY3Rpb24oIHNjb3BlLCBlbGVtZW50LCBhdHRycyApIHtcbiAgICAgIGdhcGkucGx1c29uZS5yZW5kZXIoIGVsZW1lbnRbMF0sIHtcbiAgICAgICAgXCJzaXplXCI6IFwibWVkaXVtXCIsXG4gICAgICAgIFwiaHJlZlwiOiBcImh0dHA6Ly9iaXQubHkvbmdCb2lsZXJwbGF0ZVwiXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59KVxuXG47XG5cbiIsImFuZ3VsYXIubW9kdWxlKCdqdWdlbmRzdGFkdHBsYW4ucGlucycpLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gY29uZmlnKCAkc3RhdGVQcm92aWRlciApIHtcbiAgXG4gICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCAnRGV0YWlsOiBQaW4nLCB7XG4gICAgdXJsOiAnL3Bpbi97aWQ6WzAtOV0rfScsXG4gICAgdmlld3M6IHtcbiAgICAgIFwibWFpblwiOiB7XG4gICAgICAgIGNvbnRyb2xsZXI6ICdQaW5EZXRhaWxDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvcGlucy92aWV3cy9kZXRhaWwudHBsLmh0bWwnXG4gICAgICB9XG4gICAgfSxcbiAgICByZXNvbHZlOiB7XG4gICAgICBwaW5EZXRhaWw6IFsgJyRzdGF0ZVBhcmFtcycsICdQaW4nLCBmdW5jdGlvbigkc3RhdGVQYXJhbXMsIFBpbikge1xuICAgICAgICByZXR1cm4gUGluLmdldCh7fSx7aWQ6ICRzdGF0ZVBhcmFtcy5pZH0pO1xuICAgICAgfV1cbiAgICB9LFxuICAgIGRhdGE6eyBwYWdlVGl0bGU6ICdQaW4nIH1cbiAgfSk7XG5cbn1dKTtcblxuSnVnZW5kc3RhZHRwbGFuLkNvbnRyb2xsZXJzLmNvbnRyb2xsZXIoICdQaW5EZXRhaWxDb250cm9sbGVyJywgWyAnJHNjb3BlJywgJ3BpbkRldGFpbCcsIGZ1bmN0aW9uIFBpbkRldGFpbENvbnRyb2xsZXIoICRzY29wZSwgcGluRGV0YWlsICkge1xuICAgICRzY29wZS5tYXJrZXJzID0gW107XG4gICAgJHNjb3BlLmNlbnRlciA9IHtcbiAgICAgICAgbGF0OiA1MC43MzI4MjkyNDY3MjYsXG4gICAgICAgIGxuZzogNy4wOTM3MDA0MDkwMTE3LFxuICAgICAgICB6b29tOiAxM1xuICAgIH07XG5cbiAgICBwaW5EZXRhaWwuJHByb21pc2UudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5waW4gPSBwaW5EZXRhaWw7XG5cbiAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKCRzY29wZSwge1xuICAgICAgICAgICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFdoZWVsWm9vbTogZmFsc2VcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJHNjb3BlLmNlbnRlciA9IHtcbiAgICAgICAgICAgICAgICBsYXQ6IHBpbkRldGFpbC5sYXRpdHVkZSxcbiAgICAgICAgICAgICAgICBsbmc6IHBpbkRldGFpbC5sb25naXR1ZGUsXG4gICAgICAgICAgICAgICAgem9vbTogMTVcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBtYXJrZXIgPSB7XG4gICAgICAgICAgICAgICAgbGF0OiBwaW5EZXRhaWwubGF0aXR1ZGUsXG4gICAgICAgICAgICAgICAgbG5nOiBwaW5EZXRhaWwubG9uZ2l0dWRlLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBwaW5EZXRhaWwudGl0ZWwsXG4gICAgICAgICAgICAgICAgZm9jdXM6IHRydWUsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJzxoMz4nICsgcGluRGV0YWlsLnRpdGVsICsgJzwvaDM+JyArIHBpbkRldGFpbC5iZXNjaHJlaWJ1bmcsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgJHNjb3BlLm1hcmtlcnMucHVzaChtYXJrZXIpO1xuICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKCRzY29wZSwge1xuICAgICAgICAgICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFdoZWVsWm9vbTogZmFsc2VcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICk7XG59XSk7IiwiYW5ndWxhci5tb2R1bGUoJ2p1Z2VuZHN0YWR0cGxhbi5waW5zJykuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbiBjb25maWcoICRzdGF0ZVByb3ZpZGVyICkge1xuXG4gICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoICdGb3JtOiBQaW4nLCB7XG4gICAgICAgIHVybDogJy9waW4vY3JlYXRlJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAgIFwibWFpblwiOiB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1BpbkZvcm1Db250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9waW5zL3ZpZXdzL2Zvcm0udHBsLmh0bWwnXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGRhdGE6eyBwYWdlVGl0bGU6ICdQaW4gZXJzdGVsbGVuJyB9XG4gICAgfSk7XG5cbn1dKTtcblxuSnVnZW5kc3RhZHRwbGFuLkNvbnRyb2xsZXJzLmNvbnRyb2xsZXIoICdQaW5Gb3JtQ29udHJvbGxlcicsIFsgJyRzY29wZScsICckbG9jYXRpb24nLCAnUGluJywgJ1RyYWVnZXInLCAnS2F0ZWdvcmllJywgZnVuY3Rpb24gUGluRm9ybUNvbnRyb2xsZXIoICRzY29wZSwgJGxvY2F0aW9uLCBQaW4sIFRyYWVnZXIsIEthdGVnb3JpZSApIHtcbiAgICAkc2NvcGUua2F0ZWdvcmllbiA9IEthdGVnb3JpZS5xdWVyeSgpO1xuICAgICRzY29wZS5waW4gPSBuZXcgUGluKCk7XG4gICAgJHNjb3BlLnBpbnMgPSBQaW4ucXVlcnkoKTtcbiAgICAkc2NvcGUudHJhZWdlcnMgPSBUcmFlZ2VyLnF1ZXJ5KCk7XG5cbiAgICBhbmd1bGFyLmV4dGVuZCgkc2NvcGUsIHtcbiAgICAgICAgY2VudGVyOiB7XG4gICAgICAgICAgICBsYXQ6IDUwLjczMjgyOTI0NjcyNixcbiAgICAgICAgICAgIGxuZzogNy4wOTM3MDA0MDkwMTE3LFxuICAgICAgICAgICAgem9vbTogMTNcbiAgICAgICAgfSxcbiAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICAgIHNjcm9sbFdoZWVsWm9vbTogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgZXZlbnRzOiB7fVxuICAgIH0pO1xuXG4gICAgJHNjb3BlLnBpbi5tYXJrZXJzID0gW107XG4gICAgJHNjb3BlLiRvbihcImxlYWZsZXREaXJlY3RpdmVNYXAuY2xpY2tcIiwgZnVuY3Rpb24oZXZlbnQsIGFyZ3Mpe1xuICAgICAgICB2YXIgbGVhZkV2ZW50ID0gYXJncy5sZWFmbGV0RXZlbnQ7XG5cbiAgICAgICAgJHNjb3BlLnBpbi5tYXJrZXJzWzBdID0ge1xuICAgICAgICAgICAgbGF0OiBsZWFmRXZlbnQubGF0bG5nLmxhdCxcbiAgICAgICAgICAgIGxuZzogbGVhZkV2ZW50LmxhdGxuZy5sbmcsXG4gICAgICAgICAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgICAgICAgICBmb2N1czogdHJ1ZVxuICAgICAgICB9O1xuICAgIH0pO1xuXG4gICAgJHNjb3BlLm5ld1BpbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2NvcGUucGluID0gbmV3IFBpbigpO1xuICAgICAgICAkc2NvcGUucGluLm1hcmtlcnMgPSBbXTtcbiAgICAgICAgJHNjb3BlLmVkaXRpbmcgPSBmYWxzZTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNhdmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCRzY29wZS5waW4uaWQpIHtcbiAgICAgICAgICAgIFBpbi51cGRhdGUoJHNjb3BlLnBpbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkc2NvcGUucGluLiRzYXZlKCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5waW5zLnB1c2gocmVzcG9uc2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgJHNjb3BlLm5ld1BpbigpO1xuICAgIH07XG5cbiAgICAkc2NvcGUuc2V0QWN0aXZlUGluID0gZnVuY3Rpb24ocGluKSB7XG4gICAgICAgICRzY29wZS5waW4gPSBwaW47XG4gICAgICAgICRzY29wZS5waW4ubWFya2VycyA9IFtdO1xuICAgICAgICBpZiAocGluLmxvbmdpdHVkZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAkc2NvcGUucGluLm1hcmtlcnNbMF0gPSB7XG4gICAgICAgICAgICAgICAgbGF0OiBwaW4ubGF0aXR1ZGUsXG4gICAgICAgICAgICAgICAgbG5nOiBwaW4ubG9uZ2l0dWRlLFxuICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBmb2N1czogdHJ1ZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAkc2NvcGUuZWRpdGluZyA9IHRydWU7XG4gICAgfTtcblxuICAgICRzY29wZS5yZW1vdmUgPSBmdW5jdGlvbihwaW4pIHtcbiAgICAgICAgUGluLmRlbGV0ZShwaW4sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gJHNjb3BlLnBpbnMuaW5kZXhPZihwaW4pO1xuICAgICAgICAgICAgaWYgKGluZGV4ICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnBpbnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuXG4gICAgLy8gQmFycmllcmVmcmVpaGVpdHNncmFkZVxuICAgICRzY29wZS5iYXJyaWVyZWZyZWloZWl0c2dyYWRlID0gWyAnR3V0JywgJ1RlaWx3ZWlzZScsICdOaWNodCBiYXJyaWVyZWZyZWknIF07XG5cblxuICAgIC8vIEtvc3RlbmFydGVuXG4gICAgJHNjb3BlLmtvc3RlbmFydGVuID0gWyAnS29zdGVubG9zJywgJ0tvc3RlbnBmbGljaHRpZycgXTtcblxuXG4gICAgLy8gTWluZGVzdGFsdGVyXG4gICAgJHNjb3BlLm1pbmRlc3RhbHRlcnMgPSBbICdhYiAxMicsICdhYiAxNicsICdhYiAxOCcsICdhYiAyMScgXTtcblxuXG5cbn1dKTsiLCJhbmd1bGFyLm1vZHVsZSgnanVnZW5kc3RhZHRwbGFuLnBpbnMnKS5jb25maWcoWyAnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbiBjb25maWcoICRzdGF0ZVByb3ZpZGVyICkge1xuICBcbiAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoICdMaXN0ZTogUGluJywge1xuICAgIHVybDogJy9waW5zJyxcbiAgICB2aWV3czoge1xuICAgICAgXCJtYWluXCI6IHtcbiAgICAgICAgY29udHJvbGxlcjogJ1BpbnNDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvcGlucy92aWV3cy9saXN0LnRwbC5odG1sJ1xuICAgICAgfVxuICAgIH0sXG4gICAgZGF0YTp7IHBhZ2VUaXRsZTogJ1BpbnMnIH1cbiAgfSk7XG5cbn1dKTtcblxuSnVnZW5kc3RhZHRwbGFuLkNvbnRyb2xsZXJzLmNvbnRyb2xsZXIoICdQaW5zQ29udHJvbGxlcicsIFsgJyRzY29wZScsICckbG9jYXRpb24nLCAnUGluJywgZnVuY3Rpb24gUGluc0NvbnRyb2xsZXIoICRzY29wZSwgJGxvY2F0aW9uLCBQaW4gKSB7XG4gICAgJHNjb3BlLnBpbnMgPSBQaW4ucXVlcnkoKTtcblxuICAgICRzY29wZS52aWV3UGluID0gZnVuY3Rpb24gKHBpbikge1xuICAgICAgJGxvY2F0aW9uLnBhdGgoJy9waW4vJytwaW4uaWQpO1xuICAgIH07XG5cbn1dKTsiLCJKdWdlbmRzdGFkdHBsYW4uQ29udHJvbGxlcnMuY29udHJvbGxlciggJ0xpbmtzRm9ybUNvbnRyb2xsZXInLCBbICckc2NvcGUnLFxuICAgIGZ1bmN0aW9uKCRzY29wZSkge1xuXG4gICAgICAgIC8vIExpbmtzXG4gICAgICAgICRzY29wZS5uZXdMaW5rID0ge307XG4gICAgICAgICRzY29wZS5hZGRMaW5rID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoJHNjb3BlLm1vZGVsLmxpbmtzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUubW9kZWwubGlua3MgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRzY29wZS5tb2RlbC5saW5rcy5wdXNoKCRzY29wZS5uZXdMaW5rKTtcbiAgICAgICAgICAgICRzY29wZS5uZXdMaW5rID0ge307XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmlzTGlua1ZhbGlkID0gZnVuY3Rpb24obGluaykge1xuICAgICAgICAgICAgaWYgKGxpbmsudGl0ZWwgPT09IHVuZGVmaW5lZCB8fCBsaW5rLnRpdGVsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGluay51cmwgPT09IHVuZGVmaW5lZCB8fCBsaW5rLnVybC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcblxuICAgIH1dKTsiLCJhbmd1bGFyLm1vZHVsZSgnanVnZW5kc3RhZHRwbGFuLnRyYWVnZXInKS5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uIGNvbmZpZyggJHN0YXRlUHJvdmlkZXIgKSB7XG4gIFxuICAkc3RhdGVQcm92aWRlci5zdGF0ZSggJ0xpc3RlOiBUcmFlZ2VyJywge1xuICAgIHVybDogJy90cmFlZ2VyJyxcbiAgICB2aWV3czoge1xuICAgICAgXCJtYWluXCI6IHtcbiAgICAgICAgY29udHJvbGxlcjogJ1RyYWVnZXJDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvdHJhZWdlci92aWV3cy9saXN0ZS50cGwuaHRtbCdcbiAgICAgIH1cbiAgICB9LFxuICAgIGRhdGE6eyBwYWdlVGl0bGU6ICdUcsOkZ2VyJyB9XG4gIH0pO1xuXG59XSk7XG5cbkp1Z2VuZHN0YWR0cGxhbi5Db250cm9sbGVycy5jb250cm9sbGVyKCAnVHJhZWdlckNvbnRyb2xsZXInLCBbICckc2NvcGUnLCAnJGxvY2F0aW9uJywgJ1RyYWVnZXInLCBmdW5jdGlvbiBUcmFlZ2VyQ29udHJvbGxlciggJHNjb3BlLCAkbG9jYXRpb24sIFRyYWVnZXIgKSB7XG4gICAgJHNjb3BlLnRyYWVnZXIgPSBUcmFlZ2VyLnF1ZXJ5KCk7XG5cbiAgICAkc2NvcGUudmlld1RyYWVnZXIgPSBmdW5jdGlvbiAodHJhZWdlcikge1xuICAgICAgJGxvY2F0aW9uLnBhdGgoJy90cmFlZ2VyLycrdHJhZWdlci5pZCk7XG4gICAgfTtcblxufV0pOyIsImFuZ3VsYXIubW9kdWxlKCdqdWdlbmRzdGFkdHBsYW4udHJhZWdlcicpLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gY29uZmlnKCAkc3RhdGVQcm92aWRlciApIHtcbiAgXG4gICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCAnRGV0YWlsOiBUcmFlZ2VyJywge1xuICAgIHVybDogJy90cmFlZ2VyL3tpZDpbMC05XSt9JyxcbiAgICB2aWV3czoge1xuICAgICAgXCJtYWluXCI6IHtcbiAgICAgICAgY29udHJvbGxlcjogJ1RyYWVnZXJEZXRhaWxDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvdHJhZWdlci92aWV3cy9kZXRhaWwudHBsLmh0bWwnXG4gICAgICB9XG4gICAgfSxcbiAgICByZXNvbHZlOiB7XG4gICAgICB0cmFlZ2VyRGV0YWlsOiBbICckc3RhdGVQYXJhbXMnLCAnVHJhZWdlcicsIGZ1bmN0aW9uKCRzdGF0ZVBhcmFtcywgVHJhZWdlcikge1xuICAgICAgICByZXR1cm4gVHJhZWdlci5nZXQoe30se2lkOiAkc3RhdGVQYXJhbXMuaWR9KTtcbiAgICAgIH1dXG4gICAgfSxcbiAgICBkYXRhOnsgcGFnZVRpdGxlOiAnVHLDpGdlcicgfVxuICB9KTtcblxufV0pO1xuXG5KdWdlbmRzdGFkdHBsYW4uQ29udHJvbGxlcnMuY29udHJvbGxlciggJ1RyYWVnZXJEZXRhaWxDb250cm9sbGVyJywgWyAnJHNjb3BlJywgJ3RyYWVnZXJEZXRhaWwnLCBmdW5jdGlvbiBUcmFlZ2VyRGV0YWlsQ29udHJvbGxlciggJHNjb3BlLCB0cmFlZ2VyRGV0YWlsICkge1xuICAgICRzY29wZS50cmFlZ2VyID0gdHJhZWdlckRldGFpbDtcblxuICAgIGFuZ3VsYXIuZXh0ZW5kKCRzY29wZSwge1xuICAgICAgICBjZW50ZXI6IHtcbiAgICAgICAgICAgIGxhdDogNTAuNzMyODI5MjQ2NzI2LFxuICAgICAgICAgICAgbG5nOiA3LjA5MzcwMDQwOTAxMTcsXG4gICAgICAgICAgICB6b29tOiAxM1xuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgc2Nyb2xsV2hlZWxab29tOiBmYWxzZVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAkc2NvcGUubWFya2VycyA9IFtdO1xuXG4gICAgdHJhZWdlckRldGFpbC4kcHJvbWlzZS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICBhbmd1bGFyLmZvckVhY2godHJhZWdlckRldGFpbC5waW5zLCBmdW5jdGlvbihpdGVtLCBrZXkpIHtcbiAgICAgICAgICAgIHZhciBtYXJrZXIgPSB7XG4gICAgICAgICAgICAgICAgbGF0OiBpdGVtLmxhdGl0dWRlLFxuICAgICAgICAgICAgICAgIGxuZzogaXRlbS5sb25naXR1ZGUsXG4gICAgICAgICAgICAgICAgdGl0bGU6IGl0ZW0udGl0ZWwsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJzxoMz4nICsgaXRlbS50aXRlbCArICc8L2gzPicgKyBpdGVtLmJlc2NocmVpYnVuZyArICc8c21hbGw+PGEgaHJlZj1cIicgKyAnLyMvcGluLycraXRlbS5pZCArICdcIj5NZWhyPC9hPjwvc21hbGw+J1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICRzY29wZS5tYXJrZXJzLnB1c2gobWFya2VyKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XSk7IiwiYW5ndWxhci5tb2R1bGUoJ2p1Z2VuZHN0YWR0cGxhbi50cmFlZ2VyJykuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbiBjb25maWcoICRzdGF0ZVByb3ZpZGVyICkge1xuXG4gICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoICdGb3JtOiBUcmFlZ2VyJywge1xuICAgICAgICB1cmw6ICcvdHJhZWdlci9jcmVhdGUnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICAgXCJtYWluXCI6IHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnVHJhZWdlckZvcm1Db250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC90cmFlZ2VyL3ZpZXdzL2Zvcm0udHBsLmh0bWwnXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGRhdGE6eyBwYWdlVGl0bGU6ICdUcsOkZ2VyIGVyc3RlbGxlbicgfVxuICAgIH0pO1xuXG59XSk7XG5cbkp1Z2VuZHN0YWR0cGxhbi5Db250cm9sbGVycy5jb250cm9sbGVyKCAnVHJhZWdlckZvcm1Db250cm9sbGVyJywgWyAnJHNjb3BlJywgJyRsb2NhdGlvbicsICdUcmFlZ2VyJywgJ0thdGVnb3JpZScsICdVcGxvYWQnLCBmdW5jdGlvbiBUcmFlZ2VyRm9ybUNvbnRyb2xsZXIoICRzY29wZSwgJGxvY2F0aW9uLCBUcmFlZ2VyLCBLYXRlZ29yaWUsIFVwbG9hZCApIHtcbiAgICAkc2NvcGUua2F0ZWdvcmllbiA9IEthdGVnb3JpZS5xdWVyeSgpO1xuICAgICRzY29wZS50cmFlZ2VyID0gbmV3IFRyYWVnZXIoKTtcbiAgICAkc2NvcGUudHJhZWdlcnMgPSBUcmFlZ2VyLnF1ZXJ5KCk7XG5cbiAgICAkc2NvcGUubmV3VHJhZWdlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2NvcGUudHJhZWdlciA9IG5ldyBUcmFlZ2VyKCk7XG4gICAgICAgICRzY29wZS5lZGl0aW5nID0gZmFsc2U7XG4gICAgfTtcblxuICAgICRzY29wZS5zYXZlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkc2NvcGUudHJhZWdlci5pZCkge1xuICAgICAgICAgICAgVHJhZWdlci51cGRhdGUoJHNjb3BlLnRyYWVnZXIpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLm5ld1RyYWVnZXIoKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGFsZXJ0KCdFaW4gVHLDpGdlciBtaXQgZGllc2VyIEVtYWlsLUFkcmVzc2UgZXhpc3RpZXJ0IGJlcmVpdHMhJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRzY29wZS50cmFlZ2VyLiRzYXZlKCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICRzY29wZS50cmFlZ2Vycy5wdXNoKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAkc2NvcGUubmV3VHJhZWdlcigpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoJ0VpbiBUcsOkZ2VyIG1pdCBkaWVzZXIgRW1haWwtQWRyZXNzZSBleGlzdGllcnQgYmVyZWl0cyEnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgICRzY29wZS5zZXRBY3RpdmVUcmFlZ2VyID0gZnVuY3Rpb24odHJhZWdlcikge1xuICAgICAgICAkc2NvcGUudHJhZWdlciA9IHRyYWVnZXI7XG4gICAgICAgICRzY29wZS5lZGl0aW5nID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnJlbW92ZSA9IGZ1bmN0aW9uKHRyYWVnZXIpIHtcbiAgICAgICAgVHJhZWdlci5kZWxldGUodHJhZWdlciwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAkc2NvcGUudHJhZWdlcnMuaW5kZXhPZih0cmFlZ2VyKTtcbiAgICAgICAgICAgIGlmIChpbmRleCAhPSAtMSkge1xuICAgICAgICAgICAgICAgICRzY29wZS50cmFlZ2Vycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8gQmlsZGVyXG4gICAgJHNjb3BlLm9uRmlsZVNlbGVjdCA9IGZ1bmN0aW9uKCRmaWxlcykge1xuICAgICAgICB2YXIgZG9VcGxvYWQgPSBmdW5jdGlvbihmaWxlKSB7XG4gICAgICAgICAgICBVcGxvYWQudXBsb2FkKHtcbiAgICAgICAgICAgICAgICB1cmw6ICdhcHBfZGV2LnBocC9pbWcvdXBsb2FkJywgLy91cGxvYWQucGhwIHNjcmlwdCwgbm9kZS5qcyByb3V0ZSwgb3Igc2VydmxldCB1cmxcbiAgICAgICAgICAgICAgICAvLyBtZXRob2Q6ICdQT1NUJyBvciAnUFVUJyxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAvLyBoZWFkZXJzOiB7J2hlYWRlci1rZXknOiAnaGVhZGVyLXZhbHVlJ30sXG4gICAgICAgICAgICAgICAgLy8gd2l0aENyZWRlbnRpYWxzOiB0cnVlLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtteU9iajogJHNjb3BlLm15TW9kZWxPYmp9LFxuICAgICAgICAgICAgICAgIGZpbGU6IGZpbGUgLy8gb3IgbGlzdCBvZiBmaWxlczogJGZpbGVzIGZvciBodG1sNSBvbmx5XG4gICAgICAgICAgICAgICAgLy8gZmlsZU5hbWU6ICdkb2MuanBnJyBvciBbJzEuanBnJywgJzIuanBnJywgLi4uXSAvLyB0byBtb2RpZnkgdGhlIG5hbWUgb2YgdGhlIGZpbGVcbiAgICAgICAgICAgICAgICAvKiBjdXN0b21pemUgZmlsZSBmb3JtRGF0YSBuYW1lICgnQ29udGVudC1EZXNwb3NpdGlvbicpLCBzZXJ2ZXIgc2lkZSBmaWxlIHZhcmlhYmxlIG5hbWUuXG4gICAgICAgICAgICAgICAgIERlZmF1bHQgaXMgJ2ZpbGUnICovXG4gICAgICAgICAgICAgICAgLy9maWxlRm9ybURhdGFOYW1lOiBteUZpbGUsIC8vb3IgYSBsaXN0IG9mIG5hbWVzIGZvciBtdWx0aXBsZSBmaWxlcyAoaHRtbDUpLlxuICAgICAgICAgICAgICAgIC8qIGN1c3RvbWl6ZSBob3cgZGF0YSBpcyBhZGRlZCB0byBmb3JtRGF0YS4gU2VlICM0MCNpc3N1ZWNvbW1lbnQtMjg2MTIwMDAgZm9yIHNhbXBsZSBjb2RlICovXG4gICAgICAgICAgICAgICAgLy9mb3JtRGF0YUFwcGVuZGVyOiBmdW5jdGlvbihmb3JtRGF0YSwga2V5LCB2YWwpe31cbiAgICAgICAgICAgIH0pLnByb2dyZXNzKGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncGVyY2VudDogJyArIHBhcnNlSW50KDEwMC4wICogZXZ0LmxvYWRlZCAvIGV2dC50b3RhbCkpO1xuICAgICAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpIHtcbiAgICAgICAgICAgICAgICAvLyBmaWxlIGlzIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseVxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUudHJhZWdlci5iaWxkZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudHJhZWdlci5iaWxkZXIgPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmlsZS50bXBfbmFtZSA9IGRhdGEuZm9sZGVyO1xuICAgICAgICAgICAgICAgICRzY29wZS50cmFlZ2VyLmJpbGRlci5wdXNoKGZpbGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLy5lcnJvciguLi4pXG4gICAgICAgICAgICAvLy50aGVuKHN1Y2Nlc3MsIGVycm9yLCBwcm9ncmVzcyk7XG4gICAgICAgICAgICAvLy54aHIoZnVuY3Rpb24oeGhyKXt4aHIudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoLi4uKX0pLy8gYWNjZXNzIGFuZCBhdHRhY2ggYW55IGV2ZW50IGxpc3RlbmVyIHRvIFhNTEh0dHBSZXF1ZXN0LlxuICAgICAgICB9O1xuXG4gICAgICAgIC8vJGZpbGVzOiBhbiBhcnJheSBvZiBmaWxlcyBzZWxlY3RlZCwgZWFjaCBmaWxlIGhhcyBuYW1lLCBzaXplLCBhbmQgdHlwZS5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkZmlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBmaWxlID0gJGZpbGVzW2ldO1xuICAgICAgICAgICAgJHNjb3BlLnVwbG9hZCA9IGRvVXBsb2FkKGZpbGUpO1xuICAgICAgICB9XG4gICAgfTtcblxuXG4gICAgLy8gQWRyZXNzZW5cbiAgICAkc2NvcGUubmV3QWRyZXNzZSA9IHt9O1xuICAgICRzY29wZS5hZGRBZHJlc3NlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkc2NvcGUudHJhZWdlci5hZHJlc3NlbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAkc2NvcGUudHJhZWdlci5hZHJlc3NlbiA9IFtdO1xuICAgICAgICB9XG4gICAgICAgICRzY29wZS50cmFlZ2VyLmFkcmVzc2VuLnB1c2goJHNjb3BlLm5ld0FkcmVzc2UpO1xuICAgICAgICAkc2NvcGUubmV3QWRyZXNzZSA9IHt9O1xuICAgIH07XG5cbiAgICAkc2NvcGUuaXNBZHJlc3NlVmFsaWQgPSBmdW5jdGlvbihhZHJlc3NlKSB7XG4gICAgICAgIGlmIChhZHJlc3NlLnN0cmFzc2UgPT09IHVuZGVmaW5lZCB8fCBhZHJlc3NlLnN0cmFzc2UubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAoYWRyZXNzZS5vcnQgPT09IHVuZGVmaW5lZCB8fCBhZHJlc3NlLm9ydC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG59XSk7IiwiYW5ndWxhci5tb2R1bGUoJ2p1Z2VuZHN0YWR0cGxhbi50cmFlZ2VyJykuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbiBjb25maWcoICRzdGF0ZVByb3ZpZGVyICkge1xuXG4gICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoICdMb2dpbjogVHJhZWdlcicsIHtcbiAgICAgICAgdXJsOiAnL3RyYWVnZXIvbG9naW4nLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICAgXCJtYWluXCI6IHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnVHJhZWdlckxvZ2luQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvdHJhZWdlci92aWV3cy9sb2dpbi50cGwuaHRtbCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGF0YTp7IHBhZ2VUaXRsZTogJ0VpbmxvZ2dlbicgfVxuICAgIH0pO1xuXG59XSk7XG5cbkp1Z2VuZHN0YWR0cGxhbi5Db250cm9sbGVycy5jb250cm9sbGVyKCAnVHJhZWdlckxvZ2luQ29udHJvbGxlcicsIFsgJyRzY29wZScsICckc3RhdGUnLCAnJHdpbmRvdycsICdMb2dpblNlcnZpY2UnLCAnand0SGVscGVyJywgJ1RyYWVnZXInLCBmdW5jdGlvbiBUcmFlZ2VyTG9naW5Db250cm9sbGVyKCAkc2NvcGUsICRzdGF0ZSwgJHdpbmRvdywgTG9naW5TZXJ2aWNlLCBqd3RIZWxwZXIsIFRyYWVnZXIpIHtcblxuICAgICRzY29wZS50cmFlZ2VyID0gbmV3IFRyYWVnZXIoKTtcblxuICAgICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2NvcGUudHJhZWdlci4kbG9naW4oKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAkd2luZG93LmxvY2FsU3RvcmFnZS50b2tlbiA9IHJlc3BvbnNlLnRva2VuO1xuXG4gICAgICAgICAgICAgICAgdmFyIGRlY29kZWQgPSBqd3RIZWxwZXIuZGVjb2RlVG9rZW4ocmVzcG9uc2UudG9rZW4pO1xuXG4gICAgICAgICAgICAgICAgTG9naW5TZXJ2aWNlLnNldExvZ2dlZEluKHRydWUpO1xuICAgICAgICAgICAgICAgIExvZ2luU2VydmljZS5zZXRKdWdlbmRzdGFkdHBsYW5Vc2VyKGRlY29kZWQudHJhZWdlcik7XG5cbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ1N0YXJ0c2VpdGUnKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0ge1xuICAgICAgICAgICAgICAgICAgICBtc2c6ICdBdXRoZW50aWZpemllcnVuZyBmZWhsZ2VzY2hsYWdlbiEnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgfTtcbn1dKTtcbiIsIkp1Z2VuZHN0YWR0cGxhbi5Db250cm9sbGVycy5jb250cm9sbGVyKCAnVGVybWluRm9ybUNvbnRyb2xsZXInLCBbICckc2NvcGUnLFxuICAgIGZ1bmN0aW9uKCRzY29wZSkge1xuXG4gICAgICAgIC8vIFdvY2hlbnRhZ2VcbiAgICAgICAgJHNjb3BlLndvY2hlbnRhZ2UgPSBbICdNb250YWcnLCAnRGllbnN0YWcnLCAnTWl0dHdvY2gnLCAnRG9ubmVyc3RhZycsICdGcmVpdGFnJywgJ1NhbXN0YWcnLCAnU29ubnRhZycgXTtcblxuXG4gICAgICAgIC8vIFRlcm1pblxuICAgICAgICAkc2NvcGUubmV3VGVybWluID0ge307XG4gICAgICAgICRzY29wZS5hZGRUZXJtaW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICgkc2NvcGUucGluLnRlcm1pbmUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICRzY29wZS5waW4udGVybWluZSA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHNjb3BlLnBpbi50ZXJtaW5lLnB1c2goJHNjb3BlLm5ld1Rlcm1pbik7XG4gICAgICAgICAgICAkc2NvcGUubmV3VGVybWluID0ge307XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmlzVGVybWluVmFsaWQgPSBmdW5jdGlvbih0ZXJtaW4pIHtcbiAgICAgICAgICAgIGlmICh0ZXJtaW4uYmVnaW5uID09PSB1bmRlZmluZWQgfHwgdGVybWluLmJlZ2lubiA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGVybWluLmdhbnp0YWVnaWcgIT09IHRydWUgJiYgKHRlcm1pbi5iZWdpbm5fdWhyemVpdCA9PT0gdW5kZWZpbmVkIHx8IHRlcm1pbi5iZWdpbm5fdWhyemVpdCA9PT0gMCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8vIFdpZWRlcmhvbHVuZ1xuICAgICAgICAkc2NvcGUud29jaGVfZGVzX21vbmF0cyA9IFtcbiAgICAgICAgICAgIHsgaWQ6IDAsIGxhYmVsOiAnSmVkZSBXb2NoZScgfSxcbiAgICAgICAgICAgIHsgaWQ6IDEsIGxhYmVsOiAnSmVkZSAxLiBXb2NoZScgfSxcbiAgICAgICAgICAgIHsgaWQ6IDIsIGxhYmVsOiAnSmVkZSAyLiBXb2NoZScgfSxcbiAgICAgICAgICAgIHsgaWQ6IDMsIGxhYmVsOiAnSmVkZSAzLiBXb2NoZScgfSxcbiAgICAgICAgICAgIHsgaWQ6IDQsIGxhYmVsOiAnSmVkZSA0LiBXb2NoZScgfSxcbiAgICAgICAgICAgIHsgaWQ6IDUsIGxhYmVsOiAnSmVkZSA1LiBXb2NoZScgfVxuICAgICAgICBdO1xuICAgICAgICAkc2NvcGUubmV3V2llZGVyaG9sdW5nID0ge307XG4gICAgICAgICRzY29wZS5hZGRXaWVkZXJob2x1bmcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICgkc2NvcGUubmV3VGVybWluLndpZWRlcmhvbHVuZ2VuID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUubmV3VGVybWluLndpZWRlcmhvbHVuZ2VuID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkc2NvcGUubmV3VGVybWluLndpZWRlcmhvbHVuZ2VuLnB1c2goJHNjb3BlLm5ld1dpZWRlcmhvbHVuZyk7XG4gICAgICAgICAgICAkc2NvcGUubmV3V2llZGVyaG9sdW5nID0ge307XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmlzV2llZGVyaG9sdW5nVmFsaWQgPSBmdW5jdGlvbih3aWVkZXJob2x1bmcpIHtcbiAgICAgICAgICAgIGlmICh3aWVkZXJob2x1bmcud29jaGVudGFnID09PSB1bmRlZmluZWQgfHwgd2llZGVyaG9sdW5nLndvY2hlbnRhZyA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9O1xuXG4gICAgfV0pOyIsImFuZ3VsYXIubW9kdWxlKCdqdWdlbmRzdGFkdHBsYW4uc3RhcnRzZWl0ZScpLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gY29uZmlnKCAkc3RhdGVQcm92aWRlciApIHtcbiAgXG4gICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCAnU3RhcnRzZWl0ZScsIHtcbiAgICB1cmw6ICcvc3RhcnRzZWl0ZScsXG4gICAgdmlld3M6IHtcbiAgICAgIFwibWFpblwiOiB7XG4gICAgICAgIGNvbnRyb2xsZXI6ICdTdGFydHNlaXRlQ29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL3N0YXJ0c2VpdGUvdmlld3Mvc3RhcnRzZWl0ZS50cGwuaHRtbCdcbiAgICAgIH1cbiAgICB9LFxuICAgIGRhdGE6eyBwYWdlVGl0bGU6ICdTdGFydHNlaXRlJyB9XG4gIH0pO1xuXG59XSk7XG5cbmFuZ3VsYXIubW9kdWxlKCdqdWdlbmRzdGFkdHBsYW4uc3RhcnRzZWl0ZScpLmNvbnRyb2xsZXIoICdTdGFydHNlaXRlQ29udHJvbGxlcicsIFsgJyRzY29wZScsICckbG9jYXRpb24nLCAnUGluJywgZnVuY3Rpb24gU3RhcnRzZWl0ZUNvbnRyb2xsZXIoICRzY29wZSwgJGxvY2F0aW9uLCBQaW4gKSB7XG4gICAgIGFuZ3VsYXIuZXh0ZW5kKCRzY29wZSwge1xuICAgICAgICBjZW50ZXI6IHtcbiAgICAgICAgICAgIGxhdDogNTAuNzMyODI5MjQ2NzI2LFxuICAgICAgICAgICAgbG5nOiA3LjA5MzcwMDQwOTAxMTcsXG4gICAgICAgICAgICB6b29tOiAxM1xuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgc2Nyb2xsV2hlZWxab29tOiBmYWxzZVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAkc2NvcGUubWFya2VycyA9IFtdO1xuXG4gICAgUGluLnF1ZXJ5KGZ1bmN0aW9uKHBpbnMpIHtcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKHBpbnMsIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICAgIGlmIChpdGVtLmxvbmdpdHVkZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1hcmtlciA9IHtcbiAgICAgICAgICAgICAgICAgICAgbGF0OiBpdGVtLmxhdGl0dWRlLFxuICAgICAgICAgICAgICAgICAgICBsbmc6IGl0ZW0ubG9uZ2l0dWRlLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogaXRlbS50aXRlbCxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJzxoMz4nICsgaXRlbS50aXRlbCArICc8L2gzPicgKyBpdGVtLmJlc2NocmVpYnVuZyArICc8c21hbGw+PGEgaHJlZj1cIicgKyAnLyMvcGluLycgKyBpdGVtLmlkICsgJ1wiPk1laHI8L2E+PC9zbWFsbD4nXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAkc2NvcGUubWFya2Vycy5wdXNoKG1hcmtlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG59XSk7IiwiSnVnZW5kc3RhZHRwbGFuLkNvbnRyb2xsZXJzLmNvbnRyb2xsZXIoICdBbnNwcmVjaHBhcnRuZXJGb3JtQ29udHJvbGxlcicsIFsgJyRzY29wZScsXG4gICAgZnVuY3Rpb24oJHNjb3BlKSB7XG5cbiAgICAgICAgLy8gQW5zcHJlY2hwYXJ0bmVyXG4gICAgICAgICRzY29wZS5uZXdBbnNwcmVjaHBhcnRuZXIgPSB7fTtcbiAgICAgICAgJHNjb3BlLmFkZEFuc3ByZWNocGFydG5lciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCRzY29wZS5tb2RlbC5hbnNwcmVjaHBhcnRuZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICRzY29wZS5tb2RlbC5hbnNwcmVjaHBhcnRuZXIgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRzY29wZS5tb2RlbC5hbnNwcmVjaHBhcnRuZXIucHVzaCgkc2NvcGUubmV3QW5zcHJlY2hwYXJ0bmVyKTtcbiAgICAgICAgICAgICRzY29wZS5uZXdBbnNwcmVjaHBhcnRuZXIgPSB7fTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuaXNBbnNwcmVjaHBhcnRuZXJWYWxpZCA9IGZ1bmN0aW9uKGFuc3ByZWNocGFydG5lcikge1xuICAgICAgICAgICAgaWYgKGFuc3ByZWNocGFydG5lci5uYW1lID09PSB1bmRlZmluZWQgfHwgYW5zcHJlY2hwYXJ0bmVyLm5hbWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChhbnNwcmVjaHBhcnRuZXIuZW1haWwgPT09IHVuZGVmaW5lZCB8fCBhbnNwcmVjaHBhcnRuZXIuZW1haWwubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH07XG5cbiAgICB9XSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
