function LoginInterceptor(e){return{request:function(t){return e.localStorage.token&&(t.headers.Authorization="Bearer "+e.localStorage.token),t}}}var jugendstadtplanLogin=angular.module("jugendstadtplan.login",[]);jugendstadtplanLogin.service("LoginService",function(){var e=!1,t=null;return{isLoggedIn:function(){return e},setLoggedIn:function(t){e=t},setJugendstadtplanUser:function(e){t=e},getJugendstadtplanUser:function(){return t}}}),angular.module("jugendstadtplan.ansprechpartner",[]),angular.module("jugendstadtplan.links",[]),angular.module("jugendstadtplan.pins",["ui.router","jugendstadtplan.links","jugendstadtplan.ansprechpartner","jugendstadtplan.termin"]),angular.module("jugendstadtplan.startseite",["ui.router","leaflet-directive"]),angular.module("jugendstadtplan.termin",[]),angular.module("jugendstadtplan.traeger",["ui.router","jugendstadtplan.login","jugendstadtplan.links","jugendstadtplan.ansprechpartner"]);var Jugendstadtplan=Jugendstadtplan||{};Jugendstadtplan.Controllers=angular.module("jugendstadtplan.controllers",[]),angular.module("jugendstadtplan",["ngResource","ngSanitize","ui.router","leaflet-directive","textAngular","ngFileUpload","jwt-decode","jugendstadtplan.templates","jugendstadtplan.login","jugendstadtplan.api","jugendstadtplan.startseite","jugendstadtplan.pins","jugendstadtplan.traeger","jugendstadtplan.controllers"]).config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/startseite")}]).run(function(){}).controller("AppCtrl",["$scope","LoginService",function(e,t){e.$on("$stateChangeSuccess",function(t,n,r,a,i){angular.isDefined(n.data.pageTitle)&&(e.pageTitle=n.data.pageTitle+" | Jugendstadtplan")}),e.isLoggedIn=function(){return t.isLoggedIn()},e.getJugendstadtplanUser=function(){return t.getJugendstadtplanUser()}}]),Jugendstadtplan.Controllers.controller("AnsprechpartnerFormController",["$scope",function(e){e.newAnsprechpartner={},e.addAnsprechpartner=function(){void 0===e.model.ansprechpartner&&(e.model.ansprechpartner=[]),e.model.ansprechpartner.push(e.newAnsprechpartner),e.newAnsprechpartner={}},e.isAnsprechpartnerValid=function(e){return void 0===e.name||0===e.name.length?!1:void 0!==e.email&&0!==e.email.length}}]),Jugendstadtplan.Controllers.controller("LinksFormController",["$scope",function(e){e.newLink={},e.addLink=function(){void 0===e.model.links&&(e.model.links=[]),e.model.links.push(e.newLink),e.newLink={}},e.isLinkValid=function(e){return void 0===e.titel||0===e.titel.length?!1:void 0!==e.url&&0!==e.url.length}}]),angular.module("jugendstadtplan.pins").config(["$stateProvider",function(e){e.state("Detail: Pin",{url:"/pin/{id:[0-9]+}",views:{main:{controller:"PinDetailController",templateUrl:"app/pins/views/detail.tpl.html"}},resolve:{pinDetail:["$stateParams","Pin",function(e,t){return t.get({},{id:e.id})}]},data:{pageTitle:"Pin"}})}]),Jugendstadtplan.Controllers.controller("PinDetailController",["$scope","pinDetail",function(e,t){e.markers=[],e.center={lat:50.732829246726,lng:7.0937004090117,zoom:13},t.$promise.then(function(){e.pin=t,angular.extend(e,{defaults:{scrollWheelZoom:!1}}),e.center={lat:t.latitude,lng:t.longitude,zoom:15};var n={lat:t.latitude,lng:t.longitude,title:t.titel,focus:!0,message:"<h3>"+t.titel+"</h3>"+t.beschreibung};e.markers.push(n)},function(){angular.extend(e,{defaults:{scrollWheelZoom:!1}})})}]),angular.module("jugendstadtplan.pins").config(["$stateProvider",function(e){e.state("Form: Pin",{url:"/pin/create",views:{main:{controller:"PinFormController",templateUrl:"app/pins/views/form.tpl.html"}},data:{pageTitle:"Pin erstellen"}})}]),Jugendstadtplan.Controllers.controller("PinFormController",["$scope","$location","Pin","Traeger","Kategorie",function(e,t,n,r,a){e.kategorien=a.query(),e.pin=new n,e.pins=n.query(),e.traegers=r.query(),angular.extend(e,{center:{lat:50.732829246726,lng:7.0937004090117,zoom:13},defaults:{scrollWheelZoom:!1},events:{}}),e.pin.markers=[],e.$on("leafletDirectiveMap.click",function(t,n){var r=n.leafletEvent;e.pin.markers[0]={lat:r.latlng.lat,lng:r.latlng.lng,draggable:!0,focus:!0}}),e.newPin=function(){e.pin=new n,e.pin.markers=[],e.editing=!1},e.save=function(){e.pin.id?n.update(e.pin):e.pin.$save().then(function(t){e.pins.push(t)}),e.newPin()},e.setActivePin=function(t){e.pin=t,e.pin.markers=[],null!=t.longitude&&(e.pin.markers[0]={lat:t.latitude,lng:t.longitude,draggable:!0,focus:!0}),e.editing=!0},e.remove=function(t){n["delete"](t,function(){var n=e.pins.indexOf(t);-1!=n&&e.pins.splice(n,1)})},e.barrierefreiheitsgrade=["Gut","Teilweise","Nicht barrierefrei"],e.kostenarten=["Kostenlos","Kostenpflichtig"],e.mindestalters=["ab 12","ab 16","ab 18","ab 21"]}]),angular.module("jugendstadtplan.pins").config(["$stateProvider",function(e){e.state("Liste: Pin",{url:"/pins",views:{main:{controller:"PinsController",templateUrl:"app/pins/views/list.tpl.html"}},data:{pageTitle:"Pins"}})}]),Jugendstadtplan.Controllers.controller("PinsController",["$scope","$location","Pin",function(e,t,n){e.pins=n.query(),e.viewPin=function(e){t.path("/pin/"+e.id)}}]),angular.module("jugendstadtplan.startseite").config(["$stateProvider",function(e){e.state("Startseite",{url:"/startseite",views:{main:{controller:"StartseiteController",templateUrl:"app/startseite/views/startseite.tpl.html"}},data:{pageTitle:"Startseite"}})}]),angular.module("jugendstadtplan.startseite").controller("StartseiteController",["$scope","$location","Pin",function(e,t,n){angular.extend(e,{center:{lat:50.732829246726,lng:7.0937004090117,zoom:13},defaults:{scrollWheelZoom:!1}}),e.markers=[],n.query(function(t){angular.forEach(t,function(t){if(null!=t.longitude){var n={lat:t.latitude,lng:t.longitude,title:t.titel,message:"<h3>"+t.titel+"</h3>"+t.beschreibung+'<small><a href="/#/pin/'+t.id+'">Mehr</a></small>'};e.markers.push(n)}})})}]),Jugendstadtplan.Controllers.controller("TerminFormController",["$scope",function(e){e.wochentage=["Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag","Sonntag"],e.newTermin={},e.addTermin=function(){void 0===e.pin.termine&&(e.pin.termine=[]),e.pin.termine.push(e.newTermin),e.newTermin={}},e.isTerminValid=function(e){return void 0===e.beginn||0===e.beginn?!1:e.ganztaegig===!0||void 0!==e.beginn_uhrzeit&&0!==e.beginn_uhrzeit},e.woche_des_monats=[{id:0,label:"Jede Woche"},{id:1,label:"Jede 1. Woche"},{id:2,label:"Jede 2. Woche"},{id:3,label:"Jede 3. Woche"},{id:4,label:"Jede 4. Woche"},{id:5,label:"Jede 5. Woche"}],e.newWiederholung={},e.addWiederholung=function(){void 0===e.newTermin.wiederholungen&&(e.newTermin.wiederholungen=[]),e.newTermin.wiederholungen.push(e.newWiederholung),e.newWiederholung={}},e.isWiederholungValid=function(e){return void 0!==e.wochentag&&0!==e.wochentag}}]),angular.module("jugendstadtplan.traeger").config(["$stateProvider",function(e){e.state("Liste: Traeger",{url:"/traeger",views:{main:{controller:"TraegerController",templateUrl:"app/traeger/views/liste.tpl.html"}},data:{pageTitle:"Träger"}})}]),Jugendstadtplan.Controllers.controller("TraegerController",["$scope","$location","Traeger",function(e,t,n){e.traeger=n.query(),e.viewTraeger=function(e){t.path("/traeger/"+e.id)}}]),angular.module("jugendstadtplan.traeger").config(["$stateProvider",function(e){e.state("Detail: Traeger",{url:"/traeger/{id:[0-9]+}",views:{main:{controller:"TraegerDetailController",templateUrl:"app/traeger/views/detail.tpl.html"}},resolve:{traegerDetail:["$stateParams","Traeger",function(e,t){return t.get({},{id:e.id})}]},data:{pageTitle:"Träger"}})}]),Jugendstadtplan.Controllers.controller("TraegerDetailController",["$scope","traegerDetail",function(e,t){e.traeger=t,angular.extend(e,{center:{lat:50.732829246726,lng:7.0937004090117,zoom:13},defaults:{scrollWheelZoom:!1}}),e.markers=[],t.$promise.then(function(){angular.forEach(t.pins,function(t,n){var r={lat:t.latitude,lng:t.longitude,title:t.titel,message:"<h3>"+t.titel+"</h3>"+t.beschreibung+'<small><a href="/#/pin/'+t.id+'">Mehr</a></small>'};e.markers.push(r)})})}]),angular.module("jugendstadtplan.traeger").config(["$stateProvider",function(e){e.state("Form: Traeger",{url:"/traeger/create",views:{main:{controller:"TraegerFormController",templateUrl:"app/traeger/views/form.tpl.html"}},data:{pageTitle:"Träger erstellen"}})}]),Jugendstadtplan.Controllers.controller("TraegerFormController",["$scope","$location","Traeger","Kategorie","Upload",function(e,t,n,r,a){e.kategorien=r.query(),e.traeger=new n,e.traegers=n.query(),e.newTraeger=function(){e.traeger=new n,e.editing=!1},e.save=function(){e.traeger.id?n.update(e.traeger).then(function(){e.newTraeger()},function(){alert("Ein Träger mit dieser Email-Adresse existiert bereits!")}):e.traeger.$save().then(function(t){e.traegers.push(t),e.newTraeger()},function(){alert("Ein Träger mit dieser Email-Adresse existiert bereits!")})},e.setActiveTraeger=function(t){e.traeger=t,e.editing=!0},e.remove=function(t){n["delete"](t,function(){var n=e.traegers.indexOf(t);-1!=n&&e.traegers.splice(n,1)})},e.onFileSelect=function(t){for(var n=function(t){a.upload({url:"app_dev.php/img/upload",method:"POST",data:{myObj:e.myModelObj},file:t}).progress(function(e){console.log("percent: "+parseInt(100*e.loaded/e.total))}).success(function(n,r,a,i){void 0===e.traeger.bilder&&(e.traeger.bilder=[]),t.tmp_name=n.folder,e.traeger.bilder.push(t)})},r=0;r<t.length;r++){var i=t[r];e.upload=n(i)}},e.newAdresse={},e.addAdresse=function(){void 0===e.traeger.adressen&&(e.traeger.adressen=[]),e.traeger.adressen.push(e.newAdresse),e.newAdresse={}},e.isAdresseValid=function(e){return void 0===e.strasse||0===e.strasse.length?!1:void 0!==e.ort&&0!==e.ort.length}}]),angular.module("jugendstadtplan.traeger").config(["$stateProvider",function(e){e.state("Login: Traeger",{url:"/traeger/login",views:{main:{controller:"TraegerLoginController",templateUrl:"app/traeger/views/login.tpl.html"}},data:{pageTitle:"Einloggen"}})}]),Jugendstadtplan.Controllers.controller("TraegerLoginController",["$scope","$state","$window","LoginService","JwtDecode","Traeger",function(e,t,n,r,a,i){e.traeger=new i,e.login=function(){e.traeger.$login().then(function(e){n.localStorage.token=e.token;var i=a.decode(e.token);r.setLoggedIn(!0),r.setJugendstadtplanUser(i.traeger),t.go("Startseite")},function(t){e.error={msg:"Authentifizierung fehlgeschlagen!"}})}}]),angular.module("plusOne",[]).directive("plusOne",function(){return{link:function(e,t,n){gapi.plusone.render(t[0],{size:"medium",href:"http://bit.ly/ngBoilerplate"})}}});var jugendstadtplanApi=angular.module("jugendstadtplan.api",["ngResource"]),backendPrefix="http://api.jugendstadtplan.dev";jugendstadtplanApi.provider("Pin",function(){this.$get=["$resource",function(e){var t=backendPrefix+"/pins";return e(t,{},{get:{method:"GET",url:t+"/:id",params:{id:"@id"}},update:{method:"PUT",url:t+"/update/:id",params:{id:"@id"},interceptor:LoginInterceptor},save:{method:"POST",url:t+"/create",interceptor:LoginInterceptor},"delete":{method:"DELETE",url:t+"/delete/:id",params:{id:"@id"},interceptor:LoginInterceptor}})}]}),jugendstadtplanApi.provider("Traeger",function(){this.$get=["$resource",function(e){var t=backendPrefix+"/traeger";return e(t,{},{get:{method:"GET",url:t+"/:id",params:{id:"@id"}},update:{method:"PUT",url:t+"/update/:id",params:{id:"@id"},interceptor:LoginInterceptor},save:{method:"POST",url:t+"/create"},"delete":{method:"DELETE",url:t+"/delete/:id",params:{id:"@id"},interceptor:LoginInterceptor},login:{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:backendPrefix+"/authentication/traeger_check",transformRequest:function(e,t){var n=[];for(var r in e)n.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return n.join("&")}}})}]}),jugendstadtplanApi.provider("Kategorie",function(){this.$get=["$resource",function(e){var t=backendPrefix+"/kategorie";return e(t)}]});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi9yZXNvdXJjZXMvSnVnZW5kc3RhZHRwbGFuQXBpLmpzIiwiY29tbW9uL3Jlc291cmNlcy9Mb2dpblNlcnZpY2UuanMiLCJhcHAvYW5zcHJlY2hwYXJ0bmVyL0Fuc3ByZWNocGFydG5lck1vZHVsZS5qcyIsImFwcC9saW5rcy9MaW5rc01vZHVsZS5qcyIsImFwcC9waW5zL1BpbnNNb2R1bGUuanMiLCJhcHAvc3RhcnRzZWl0ZS9TdGFydHNlaXRlTW9kdWxlLmpzIiwiYXBwL3Rlcm1pbi9UZXJtaW5Nb2R1bGUuanMiLCJhcHAvdHJhZWdlci9UcmFlZ2VyTW9kdWxlLmpzIiwiYXBwL2FwcC5qcyIsImFwcC9hbnNwcmVjaHBhcnRuZXIvQW5zcHJlY2hwYXJ0bmVyRm9ybUNvbnRyb2xsZXIuanMiLCJhcHAvbGlua3MvTGlua3NGb3JtQ29udHJvbGxlci5qcyIsImFwcC9waW5zL1BpbkRldGFpbENvbnRyb2xsZXIuanMiLCJhcHAvcGlucy9QaW5Gb3JtQ29udHJvbGxlci5qcyIsImFwcC9waW5zL1BpbnNDb250cm9sbGVyLmpzIiwiYXBwL3N0YXJ0c2VpdGUvU3RhcnRzZWl0ZUNvbnRyb2xsZXIuanMiLCJhcHAvdGVybWluL1Rlcm1pbkZvcm1Db250cm9sbGVyLmpzIiwiYXBwL3RyYWVnZXIvVHJhZWdlckNvbnRyb2xsZXIuanMiLCJhcHAvdHJhZWdlci9UcmFlZ2VyRGV0YWlsQ29udHJvbGxlci5qcyIsImFwcC90cmFlZ2VyL1RyYWVnZXJGb3JtQ29udHJvbGxlci5qcyIsImFwcC90cmFlZ2VyL1RyYWVnZXJMb2dpbkNvbnRyb2xsZXIuanMiLCJjb21tb24vcGx1c09uZS9wbHVzT25lLmpzIl0sIm5hbWVzIjpbIkxvZ2luSW50ZXJjZXB0b3IiLCIkd2luZG93IiwicmVxdWVzdCIsImNvbmZpZyIsImxvY2FsU3RvcmFnZSIsInRva2VuIiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJqdWdlbmRzdGFkdHBsYW5Mb2dpbiIsImFuZ3VsYXIiLCJtb2R1bGUiLCJzZXJ2aWNlIiwiYXV0aGVudGljYXRlZCIsInRyYWVnZXIiLCJpc0xvZ2dlZEluIiwic2V0TG9nZ2VkSW4iLCJsb2dnZWRJbiIsInNldEp1Z2VuZHN0YWR0cGxhblVzZXIiLCJ1c2VyIiwiZ2V0SnVnZW5kc3RhZHRwbGFuVXNlciIsIkp1Z2VuZHN0YWR0cGxhbiIsIkNvbnRyb2xsZXJzIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJvdGhlcndpc2UiLCJydW4iLCJjb250cm9sbGVyIiwiJHNjb3BlIiwiTG9naW5TZXJ2aWNlIiwiJG9uIiwiZXZlbnQiLCJ0b1N0YXRlIiwidG9QYXJhbXMiLCJmcm9tU3RhdGUiLCJmcm9tUGFyYW1zIiwiaXNEZWZpbmVkIiwiZGF0YSIsInBhZ2VUaXRsZSIsIm5ld0Fuc3ByZWNocGFydG5lciIsImFkZEFuc3ByZWNocGFydG5lciIsInVuZGVmaW5lZCIsIm1vZGVsIiwiYW5zcHJlY2hwYXJ0bmVyIiwicHVzaCIsImlzQW5zcHJlY2hwYXJ0bmVyVmFsaWQiLCJuYW1lIiwibGVuZ3RoIiwiZW1haWwiLCJuZXdMaW5rIiwiYWRkTGluayIsImxpbmtzIiwiaXNMaW5rVmFsaWQiLCJsaW5rIiwidGl0ZWwiLCJ1cmwiLCJzdGF0ZSIsInZpZXdzIiwibWFpbiIsInRlbXBsYXRlVXJsIiwicmVzb2x2ZSIsInBpbkRldGFpbCIsIiRzdGF0ZVBhcmFtcyIsIlBpbiIsImdldCIsImlkIiwibWFya2VycyIsImNlbnRlciIsImxhdCIsImxuZyIsInpvb20iLCIkcHJvbWlzZSIsInRoZW4iLCJwaW4iLCJleHRlbmQiLCJkZWZhdWx0cyIsInNjcm9sbFdoZWVsWm9vbSIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwibWFya2VyIiwidGl0bGUiLCJmb2N1cyIsIm1lc3NhZ2UiLCJiZXNjaHJlaWJ1bmciLCIkbG9jYXRpb24iLCJUcmFlZ2VyIiwiS2F0ZWdvcmllIiwia2F0ZWdvcmllbiIsInF1ZXJ5IiwicGlucyIsInRyYWVnZXJzIiwiZXZlbnRzIiwiYXJncyIsImxlYWZFdmVudCIsImxlYWZsZXRFdmVudCIsImxhdGxuZyIsImRyYWdnYWJsZSIsIm5ld1BpbiIsImVkaXRpbmciLCJzYXZlIiwidXBkYXRlIiwiJHNhdmUiLCJyZXNwb25zZSIsInNldEFjdGl2ZVBpbiIsInJlbW92ZSIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsImJhcnJpZXJlZnJlaWhlaXRzZ3JhZGUiLCJrb3N0ZW5hcnRlbiIsIm1pbmRlc3RhbHRlcnMiLCJ2aWV3UGluIiwicGF0aCIsImZvckVhY2giLCJpdGVtIiwid29jaGVudGFnZSIsIm5ld1Rlcm1pbiIsImFkZFRlcm1pbiIsInRlcm1pbmUiLCJpc1Rlcm1pblZhbGlkIiwidGVybWluIiwiYmVnaW5uIiwiZ2FuenRhZWdpZyIsImJlZ2lubl91aHJ6ZWl0Iiwid29jaGVfZGVzX21vbmF0cyIsImxhYmVsIiwibmV3V2llZGVyaG9sdW5nIiwiYWRkV2llZGVyaG9sdW5nIiwid2llZGVyaG9sdW5nZW4iLCJpc1dpZWRlcmhvbHVuZ1ZhbGlkIiwid2llZGVyaG9sdW5nIiwid29jaGVudGFnIiwidmlld1RyYWVnZXIiLCJ0cmFlZ2VyRGV0YWlsIiwia2V5IiwiVXBsb2FkIiwibmV3VHJhZWdlciIsImFsZXJ0Iiwic2V0QWN0aXZlVHJhZWdlciIsIm9uRmlsZVNlbGVjdCIsIiRmaWxlcyIsImRvVXBsb2FkIiwiZmlsZSIsInVwbG9hZCIsIm1ldGhvZCIsIm15T2JqIiwibXlNb2RlbE9iaiIsInByb2dyZXNzIiwiZXZ0IiwiY29uc29sZSIsImxvZyIsInBhcnNlSW50IiwibG9hZGVkIiwidG90YWwiLCJzdWNjZXNzIiwic3RhdHVzIiwiYmlsZGVyIiwidG1wX25hbWUiLCJmb2xkZXIiLCJpIiwibmV3QWRyZXNzZSIsImFkZEFkcmVzc2UiLCJhZHJlc3NlbiIsImlzQWRyZXNzZVZhbGlkIiwiYWRyZXNzZSIsInN0cmFzc2UiLCJvcnQiLCIkc3RhdGUiLCJKd3REZWNvZGUiLCJsb2dpbiIsIiRsb2dpbiIsImRlY29kZWQiLCJkZWNvZGUiLCJnbyIsImVycm9yIiwibXNnIiwiZGlyZWN0aXZlIiwic2NvcGUiLCJlbGVtZW50IiwiYXR0cnMiLCJnYXBpIiwicGx1c29uZSIsInJlbmRlciIsInNpemUiLCJocmVmIiwianVnZW5kc3RhZHRwbGFuQXBpIiwiYmFja2VuZFByZWZpeCIsInByb3ZpZGVyIiwidGhpcyIsIiRnZXQiLCIkcmVzb3VyY2UiLCJiYWNrZW5kVXJsIiwicGFyYW1zIiwiaW50ZXJjZXB0b3IiLCJkZWxldGUiLCJDb250ZW50LVR5cGUiLCJ0cmFuc2Zvcm1SZXF1ZXN0IiwiaGVhZGVyc0dldHRlciIsInN0ciIsImQiLCJlbmNvZGVVUklDb21wb25lbnQiLCJqb2luIl0sIm1hcHBpbmdzIjoiQUFFQSxRQUFBQSxrQkFBQUMsR0FDQSxPQUNBQyxRQUFBLFNBQUFDLEdBS0EsTUFKQUYsR0FBQUcsYUFBQUMsUUFDQUYsRUFBQUcsUUFBQUMsY0FBQSxVQUFBTixFQUFBRyxhQUFBQyxPQUdBRixJQ1RBLEdBQUFLLHNCQUFBQyxRQUFBQyxPQUFBLDJCQUVBRixzQkFBQUcsUUFBQSxlQUFBLFdBQ0EsR0FBQUMsSUFBQSxFQUNBQyxFQUFBLElBRUEsUUFDQUMsV0FBQSxXQUNBLE1BQUFGLElBR0FHLFlBQUEsU0FBQUMsR0FDQUosRUFBQUksR0FHQUMsdUJBQUEsU0FBQUMsR0FDQUwsRUFBQUssR0FHQUMsdUJBQUEsV0FDQSxNQUFBTixPQ3BCQUosUUFBQUMsT0FBQSxzQ0NBQUQsUUFBQUMsT0FBQSw0QkNBQUQsUUFBQUMsT0FBQSx3QkFDQSxZQUNBLHdCQUNBLGtDQUNBLDJCQ0pBRCxRQUFBQyxPQUFBLDhCQUNBLFlBQ0Esc0JDRkFELFFBQUFDLE9BQUEsNkJDQUFELFFBQUFDLE9BQUEsMkJBQ0EsWUFDQSx3QkFDQSx3QkFDQSxtQ0NKQSxJQUFBVSxpQkFBQUEsbUJBQ0FBLGlCQUFBQyxZQUFBWixRQUFBQyxPQUFBLGtDQUVBRCxRQUFBQyxPQUFBLG1CQUNBLGFBQ0EsYUFDQSxZQUNBLG9CQUNBLGNBQ0EsZUFDQSxhQUNBLDRCQUNBLHdC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Q0FVLGlCQUFBLFNBQUEvSixFQUFBZ0ssR0FFQSxHQUFBQyxLQUNBLEtBQUEsR0FBQUMsS0FBQWxLLEdBQ0FpSyxFQUFBMUosS0FBQTRKLG1CQUFBRCxHQUFBLElBQUFDLG1CQUFBbkssRUFBQWtLLElBQ0EsT0FBQUQsR0FBQUcsS0FBQSxhQU9BaEIsbUJBQUFFLFNBQUEsWUFBQSxXQUNBQyxLQUFBQyxNQUFBLFlBQUEsU0FBQUMsR0FDQSxHQUFBQyxHQUFBTCxjQUFBLFlBQ0EsT0FBQUksR0FBQUMiLCJmaWxlIjoianVnZW5kc3RhZHRwbGFuLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBqdWdlbmRzdGFkdHBsYW5BcGkgPSBhbmd1bGFyLm1vZHVsZSgnanVnZW5kc3RhZHRwbGFuLmFwaScsIFsnbmdSZXNvdXJjZSddKTtcblxuZnVuY3Rpb24gTG9naW5JbnRlcmNlcHRvcigkd2luZG93KXtcbiAgICByZXR1cm4ge1xuICAgICAgICByZXF1ZXN0OiBmdW5jdGlvbihjb25maWcpIHtcbiAgICAgICAgICAgIGlmICgkd2luZG93LmxvY2FsU3RvcmFnZS50b2tlbikge1xuICAgICAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSAnQmVhcmVyICcgKyAkd2luZG93LmxvY2FsU3RvcmFnZS50b2tlbjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICAgICAgfVxuICAgIH1cbn1cblxudmFyIGJhY2tlbmRQcmVmaXggPSAnaHR0cDovL2FwaS5qdWdlbmRzdGFkdHBsYW4uZGV2JztcblxuanVnZW5kc3RhZHRwbGFuQXBpLnByb3ZpZGVyKCdQaW4nLCBmdW5jdGlvbigpIHtcbiAgICB0aGlzLiRnZXQgPSBbJyRyZXNvdXJjZScsIGZ1bmN0aW9uICgkcmVzb3VyY2UpIHtcbiAgICAgICAgdmFyIGJhY2tlbmRVcmwgPSBiYWNrZW5kUHJlZml4ICsgJy9waW5zJztcbiAgICAgICAgcmV0dXJuICRyZXNvdXJjZShiYWNrZW5kVXJsLCB7fSwge1xuICAgICAgICAgICAgZ2V0OiB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICB1cmw6IGJhY2tlbmRVcmwgKyAnLzppZCcsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiB7IGlkOidAaWQnfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHVwZGF0ZToge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgICAgICAgICAgdXJsOiBiYWNrZW5kVXJsICsgJy91cGRhdGUvOmlkJyxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHsgaWQ6J0BpZCd9LFxuICAgICAgICAgICAgICAgIGludGVyY2VwdG9yOiBMb2dpbkludGVyY2VwdG9yXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2F2ZToge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIHVybDogYmFja2VuZFVybCArICcvY3JlYXRlJyxcbiAgICAgICAgICAgICAgICBpbnRlcmNlcHRvcjogTG9naW5JbnRlcmNlcHRvclxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlbGV0ZToge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgICAgICAgICAgdXJsOiBiYWNrZW5kVXJsICsgJy9kZWxldGUvOmlkJyxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHsgaWQ6J0BpZCd9LFxuICAgICAgICAgICAgICAgIGludGVyY2VwdG9yOiBMb2dpbkludGVyY2VwdG9yXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1dO1xufSk7XG5cbmp1Z2VuZHN0YWR0cGxhbkFwaS5wcm92aWRlcignVHJhZWdlcicsIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuJGdldCA9IFsnJHJlc291cmNlJywgZnVuY3Rpb24gKCRyZXNvdXJjZSkge1xuICAgICAgICB2YXIgYmFja2VuZFVybCA9IGJhY2tlbmRQcmVmaXggKyAnL3RyYWVnZXInO1xuICAgICAgICByZXR1cm4gJHJlc291cmNlKGJhY2tlbmRVcmwsIHt9LCB7XG4gICAgICAgICAgICBnZXQ6IHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIHVybDogYmFja2VuZFVybCArICcvOmlkJyxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHsgaWQ6J0BpZCd9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdXBkYXRlOiB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICAgICAgICB1cmw6IGJhY2tlbmRVcmwgKyAnL3VwZGF0ZS86aWQnLFxuICAgICAgICAgICAgICAgIHBhcmFtczogeyBpZDonQGlkJ30sXG4gICAgICAgICAgICAgICAgaW50ZXJjZXB0b3I6IExvZ2luSW50ZXJjZXB0b3JcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzYXZlOiB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgdXJsOiBiYWNrZW5kVXJsICsgJy9jcmVhdGUnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVsZXRlOiB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgICAgICAgICB1cmw6IGJhY2tlbmRVcmwgKyAnL2RlbGV0ZS86aWQnLFxuICAgICAgICAgICAgICAgIHBhcmFtczogeyBpZDonQGlkJ30sXG4gICAgICAgICAgICAgICAgaW50ZXJjZXB0b3I6IExvZ2luSW50ZXJjZXB0b3JcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsb2dpbjoge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCd9LFxuICAgICAgICAgICAgICAgIHVybDogYmFja2VuZFByZWZpeCArICcvYXV0aGVudGljYXRpb24vdHJhZWdlcl9jaGVjaycsXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtUmVxdWVzdDogZnVuY3Rpb24gKGRhdGEsIGhlYWRlcnNHZXR0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVHJhbnNmb3JtIEpTT04gaW50byByZWd1bGFyIGZvcm0gdmFsdWVzXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdHIgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZCBpbiBkYXRhKVxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGQpICsgXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoZGF0YVtkXSkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyLmpvaW4oXCImXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfV07XG59KTtcblxuanVnZW5kc3RhZHRwbGFuQXBpLnByb3ZpZGVyKCdLYXRlZ29yaWUnLCBmdW5jdGlvbigpIHtcbiAgICB0aGlzLiRnZXQgPSBbJyRyZXNvdXJjZScsIGZ1bmN0aW9uICgkcmVzb3VyY2UpIHtcbiAgICAgICAgdmFyIGJhY2tlbmRVcmwgPSBiYWNrZW5kUHJlZml4ICsgJy9rYXRlZ29yaWUnO1xuICAgICAgICByZXR1cm4gJHJlc291cmNlKGJhY2tlbmRVcmwpO1xuICAgIH1dO1xufSk7IiwidmFyIGp1Z2VuZHN0YWR0cGxhbkxvZ2luID0gYW5ndWxhci5tb2R1bGUoJ2p1Z2VuZHN0YWR0cGxhbi5sb2dpbicsIFtdKTtcblxuanVnZW5kc3RhZHRwbGFuTG9naW4uc2VydmljZSgnTG9naW5TZXJ2aWNlJywgZnVuY3Rpb24oKSB7XG4gICAgdmFyIGF1dGhlbnRpY2F0ZWQgPSBmYWxzZTtcbiAgICB2YXIgdHJhZWdlciA9IG51bGw7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBpc0xvZ2dlZEluOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gYXV0aGVudGljYXRlZDtcbiAgICAgICAgfSxcblxuICAgICAgICBzZXRMb2dnZWRJbjogZnVuY3Rpb24gKGxvZ2dlZEluKSB7XG4gICAgICAgICAgICBhdXRoZW50aWNhdGVkID0gbG9nZ2VkSW47XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0SnVnZW5kc3RhZHRwbGFuVXNlcjogZnVuY3Rpb24odXNlcikge1xuICAgICAgICAgICAgdHJhZWdlciA9IHVzZXI7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0SnVnZW5kc3RhZHRwbGFuVXNlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJhZWdlcjtcbiAgICAgICAgfVxuICAgIH1cbn0pOyIsImFuZ3VsYXIubW9kdWxlKCAnanVnZW5kc3RhZHRwbGFuLmFuc3ByZWNocGFydG5lcicsIFtcbl0pOyIsImFuZ3VsYXIubW9kdWxlKCAnanVnZW5kc3RhZHRwbGFuLmxpbmtzJywgW1xuXSk7IiwiYW5ndWxhci5tb2R1bGUoICdqdWdlbmRzdGFkdHBsYW4ucGlucycsIFtcbiAgJ3VpLnJvdXRlcicsXG4gICdqdWdlbmRzdGFkdHBsYW4ubGlua3MnLFxuICAnanVnZW5kc3RhZHRwbGFuLmFuc3ByZWNocGFydG5lcicsXG4gICdqdWdlbmRzdGFkdHBsYW4udGVybWluJ1xuXSk7IiwiYW5ndWxhci5tb2R1bGUoICdqdWdlbmRzdGFkdHBsYW4uc3RhcnRzZWl0ZScsIFtcbiAgJ3VpLnJvdXRlcicsXG4gICdsZWFmbGV0LWRpcmVjdGl2ZSdcbl0pOyIsImFuZ3VsYXIubW9kdWxlKCAnanVnZW5kc3RhZHRwbGFuLnRlcm1pbicsIFtcbl0pOyIsImFuZ3VsYXIubW9kdWxlKCAnanVnZW5kc3RhZHRwbGFuLnRyYWVnZXInLCBbXG4gICd1aS5yb3V0ZXInLFxuICAnanVnZW5kc3RhZHRwbGFuLmxvZ2luJyxcbiAgJ2p1Z2VuZHN0YWR0cGxhbi5saW5rcycsXG4gICdqdWdlbmRzdGFkdHBsYW4uYW5zcHJlY2hwYXJ0bmVyJ1xuXSk7IiwidmFyIEp1Z2VuZHN0YWR0cGxhbiA9IEp1Z2VuZHN0YWR0cGxhbiB8fCB7fTtcbkp1Z2VuZHN0YWR0cGxhbi5Db250cm9sbGVycyA9IGFuZ3VsYXIubW9kdWxlKCdqdWdlbmRzdGFkdHBsYW4uY29udHJvbGxlcnMnLCBbXSk7XG5cbmFuZ3VsYXIubW9kdWxlKCAnanVnZW5kc3RhZHRwbGFuJywgW1xuICAnbmdSZXNvdXJjZScsXG4gICduZ1Nhbml0aXplJyxcbiAgJ3VpLnJvdXRlcicsXG4gICdsZWFmbGV0LWRpcmVjdGl2ZScsXG4gICd0ZXh0QW5ndWxhcicsXG4gICduZ0ZpbGVVcGxvYWQnLFxuICAnand0LWRlY29kZScsXG4gICdqdWdlbmRzdGFkdHBsYW4udGVtcGxhdGVzJyxcbiAgJ2p1Z2VuZHN0YWR0cGxhbi5sb2dpbicsXG4gICdqdWdlbmRzdGFkdHBsYW4uYXBpJyxcbiAgJ2p1Z2VuZHN0YWR0cGxhbi5zdGFydHNlaXRlJyxcbiAgJ2p1Z2VuZHN0YWR0cGxhbi5waW5zJyxcbiAgJ2p1Z2VuZHN0YWR0cGxhbi50cmFlZ2VyJyxcbiAgJ2p1Z2VuZHN0YWR0cGxhbi5jb250cm9sbGVycydcbl0pXG5cbi5jb25maWcoWyAnJHN0YXRlUHJvdmlkZXInLCAnJHVybFJvdXRlclByb3ZpZGVyJywgZnVuY3Rpb24gbXlBcHBDb25maWcoICRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIgKSB7XG4gICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoICcvc3RhcnRzZWl0ZScgKTtcbn1dKVxuXG4ucnVuKCBmdW5jdGlvbiBydW4gKCkge1xufSlcblxuLmNvbnRyb2xsZXIoICdBcHBDdHJsJywgWyAnJHNjb3BlJywgJ0xvZ2luU2VydmljZScsIGZ1bmN0aW9uIEFwcEN0cmwoJHNjb3BlLCBMb2dpblNlcnZpY2Upe1xuXG4gICRzY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbihldmVudCwgdG9TdGF0ZSwgdG9QYXJhbXMsIGZyb21TdGF0ZSwgZnJvbVBhcmFtcyl7XG4gICAgaWYgKCBhbmd1bGFyLmlzRGVmaW5lZCggdG9TdGF0ZS5kYXRhLnBhZ2VUaXRsZSApICkge1xuICAgICAgJHNjb3BlLnBhZ2VUaXRsZSA9IHRvU3RhdGUuZGF0YS5wYWdlVGl0bGUgKyAnIHwgSnVnZW5kc3RhZHRwbGFuJyA7XG4gICAgfVxuICB9KTtcblxuICAkc2NvcGUuaXNMb2dnZWRJbiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBMb2dpblNlcnZpY2UuaXNMb2dnZWRJbigpO1xuICB9O1xuICBcbiAgJHNjb3BlLmdldEp1Z2VuZHN0YWR0cGxhblVzZXIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gTG9naW5TZXJ2aWNlLmdldEp1Z2VuZHN0YWR0cGxhblVzZXIoKTtcbiAgfTtcblxufV0pXG5cbjsiLCJKdWdlbmRzdGFkdHBsYW4uQ29udHJvbGxlcnMuY29udHJvbGxlciggJ0Fuc3ByZWNocGFydG5lckZvcm1Db250cm9sbGVyJywgWyAnJHNjb3BlJyxcbiAgICBmdW5jdGlvbigkc2NvcGUpIHtcblxuICAgICAgICAvLyBBbnNwcmVjaHBhcnRuZXJcbiAgICAgICAgJHNjb3BlLm5ld0Fuc3ByZWNocGFydG5lciA9IHt9O1xuICAgICAgICAkc2NvcGUuYWRkQW5zcHJlY2hwYXJ0bmVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoJHNjb3BlLm1vZGVsLmFuc3ByZWNocGFydG5lciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLm1vZGVsLmFuc3ByZWNocGFydG5lciA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHNjb3BlLm1vZGVsLmFuc3ByZWNocGFydG5lci5wdXNoKCRzY29wZS5uZXdBbnNwcmVjaHBhcnRuZXIpO1xuICAgICAgICAgICAgJHNjb3BlLm5ld0Fuc3ByZWNocGFydG5lciA9IHt9O1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5pc0Fuc3ByZWNocGFydG5lclZhbGlkID0gZnVuY3Rpb24oYW5zcHJlY2hwYXJ0bmVyKSB7XG4gICAgICAgICAgICBpZiAoYW5zcHJlY2hwYXJ0bmVyLm5hbWUgPT09IHVuZGVmaW5lZCB8fCBhbnNwcmVjaHBhcnRuZXIubmFtZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFuc3ByZWNocGFydG5lci5lbWFpbCA9PT0gdW5kZWZpbmVkIHx8IGFuc3ByZWNocGFydG5lci5lbWFpbC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcblxuICAgIH1dKTsiLCJKdWdlbmRzdGFkdHBsYW4uQ29udHJvbGxlcnMuY29udHJvbGxlciggJ0xpbmtzRm9ybUNvbnRyb2xsZXInLCBbICckc2NvcGUnLFxuICAgIGZ1bmN0aW9uKCRzY29wZSkge1xuXG4gICAgICAgIC8vIExpbmtzXG4gICAgICAgICRzY29wZS5uZXdMaW5rID0ge307XG4gICAgICAgICRzY29wZS5hZGRMaW5rID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoJHNjb3BlLm1vZGVsLmxpbmtzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUubW9kZWwubGlua3MgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRzY29wZS5tb2RlbC5saW5rcy5wdXNoKCRzY29wZS5uZXdMaW5rKTtcbiAgICAgICAgICAgICRzY29wZS5uZXdMaW5rID0ge307XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmlzTGlua1ZhbGlkID0gZnVuY3Rpb24obGluaykge1xuICAgICAgICAgICAgaWYgKGxpbmsudGl0ZWwgPT09IHVuZGVmaW5lZCB8fCBsaW5rLnRpdGVsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGluay51cmwgPT09IHVuZGVmaW5lZCB8fCBsaW5rLnVybC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcblxuICAgIH1dKTsiLCJhbmd1bGFyLm1vZHVsZSgnanVnZW5kc3RhZHRwbGFuLnBpbnMnKS5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uIGNvbmZpZyggJHN0YXRlUHJvdmlkZXIgKSB7XG4gIFxuICAkc3RhdGVQcm92aWRlci5zdGF0ZSggJ0RldGFpbDogUGluJywge1xuICAgIHVybDogJy9waW4ve2lkOlswLTldK30nLFxuICAgIHZpZXdzOiB7XG4gICAgICBcIm1haW5cIjoge1xuICAgICAgICBjb250cm9sbGVyOiAnUGluRGV0YWlsQ29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL3BpbnMvdmlld3MvZGV0YWlsLnRwbC5odG1sJ1xuICAgICAgfVxuICAgIH0sXG4gICAgcmVzb2x2ZToge1xuICAgICAgcGluRGV0YWlsOiBbICckc3RhdGVQYXJhbXMnLCAnUGluJywgZnVuY3Rpb24oJHN0YXRlUGFyYW1zLCBQaW4pIHtcbiAgICAgICAgcmV0dXJuIFBpbi5nZXQoe30se2lkOiAkc3RhdGVQYXJhbXMuaWR9KTtcbiAgICAgIH1dXG4gICAgfSxcbiAgICBkYXRhOnsgcGFnZVRpdGxlOiAnUGluJyB9XG4gIH0pO1xuXG59XSk7XG5cbkp1Z2VuZHN0YWR0cGxhbi5Db250cm9sbGVycy5jb250cm9sbGVyKCAnUGluRGV0YWlsQ29udHJvbGxlcicsIFsgJyRzY29wZScsICdwaW5EZXRhaWwnLCBmdW5jdGlvbiBQaW5EZXRhaWxDb250cm9sbGVyKCAkc2NvcGUsIHBpbkRldGFpbCApIHtcbiAgICAkc2NvcGUubWFya2VycyA9IFtdO1xuICAgICRzY29wZS5jZW50ZXIgPSB7XG4gICAgICAgIGxhdDogNTAuNzMyODI5MjQ2NzI2LFxuICAgICAgICBsbmc6IDcuMDkzNzAwNDA5MDExNyxcbiAgICAgICAgem9vbTogMTNcbiAgICB9O1xuXG4gICAgcGluRGV0YWlsLiRwcm9taXNlLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkc2NvcGUucGluID0gcGluRGV0YWlsO1xuXG4gICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCgkc2NvcGUsIHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgICAgICAgICBzY3JvbGxXaGVlbFpvb206IGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICRzY29wZS5jZW50ZXIgPSB7XG4gICAgICAgICAgICAgICAgbGF0OiBwaW5EZXRhaWwubGF0aXR1ZGUsXG4gICAgICAgICAgICAgICAgbG5nOiBwaW5EZXRhaWwubG9uZ2l0dWRlLFxuICAgICAgICAgICAgICAgIHpvb206IDE1XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgbWFya2VyID0ge1xuICAgICAgICAgICAgICAgIGxhdDogcGluRGV0YWlsLmxhdGl0dWRlLFxuICAgICAgICAgICAgICAgIGxuZzogcGluRGV0YWlsLmxvbmdpdHVkZSxcbiAgICAgICAgICAgICAgICB0aXRsZTogcGluRGV0YWlsLnRpdGVsLFxuICAgICAgICAgICAgICAgIGZvY3VzOiB0cnVlLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICc8aDM+JyArIHBpbkRldGFpbC50aXRlbCArICc8L2gzPicgKyBwaW5EZXRhaWwuYmVzY2hyZWlidW5nLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICRzY29wZS5tYXJrZXJzLnB1c2gobWFya2VyKTtcbiAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCgkc2NvcGUsIHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgICAgICAgICBzY3JvbGxXaGVlbFpvb206IGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICApO1xufV0pOyIsImFuZ3VsYXIubW9kdWxlKCdqdWdlbmRzdGFkdHBsYW4ucGlucycpLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gY29uZmlnKCAkc3RhdGVQcm92aWRlciApIHtcblxuICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCAnRm9ybTogUGluJywge1xuICAgICAgICB1cmw6ICcvcGluL2NyZWF0ZScsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgICBcIm1haW5cIjoge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdQaW5Gb3JtQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvcGlucy92aWV3cy9mb3JtLnRwbC5odG1sJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkYXRhOnsgcGFnZVRpdGxlOiAnUGluIGVyc3RlbGxlbicgfVxuICAgIH0pO1xuXG59XSk7XG5cbkp1Z2VuZHN0YWR0cGxhbi5Db250cm9sbGVycy5jb250cm9sbGVyKCAnUGluRm9ybUNvbnRyb2xsZXInLCBbICckc2NvcGUnLCAnJGxvY2F0aW9uJywgJ1BpbicsICdUcmFlZ2VyJywgJ0thdGVnb3JpZScsIGZ1bmN0aW9uIFBpbkZvcm1Db250cm9sbGVyKCAkc2NvcGUsICRsb2NhdGlvbiwgUGluLCBUcmFlZ2VyLCBLYXRlZ29yaWUgKSB7XG4gICAgJHNjb3BlLmthdGVnb3JpZW4gPSBLYXRlZ29yaWUucXVlcnkoKTtcbiAgICAkc2NvcGUucGluID0gbmV3IFBpbigpO1xuICAgICRzY29wZS5waW5zID0gUGluLnF1ZXJ5KCk7XG4gICAgJHNjb3BlLnRyYWVnZXJzID0gVHJhZWdlci5xdWVyeSgpO1xuXG4gICAgYW5ndWxhci5leHRlbmQoJHNjb3BlLCB7XG4gICAgICAgIGNlbnRlcjoge1xuICAgICAgICAgICAgbGF0OiA1MC43MzI4MjkyNDY3MjYsXG4gICAgICAgICAgICBsbmc6IDcuMDkzNzAwNDA5MDExNyxcbiAgICAgICAgICAgIHpvb206IDEzXG4gICAgICAgIH0sXG4gICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICBzY3JvbGxXaGVlbFpvb206IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIGV2ZW50czoge31cbiAgICB9KTtcblxuICAgICRzY29wZS5waW4ubWFya2VycyA9IFtdO1xuICAgICRzY29wZS4kb24oXCJsZWFmbGV0RGlyZWN0aXZlTWFwLmNsaWNrXCIsIGZ1bmN0aW9uKGV2ZW50LCBhcmdzKXtcbiAgICAgICAgdmFyIGxlYWZFdmVudCA9IGFyZ3MubGVhZmxldEV2ZW50O1xuXG4gICAgICAgICRzY29wZS5waW4ubWFya2Vyc1swXSA9IHtcbiAgICAgICAgICAgIGxhdDogbGVhZkV2ZW50LmxhdGxuZy5sYXQsXG4gICAgICAgICAgICBsbmc6IGxlYWZFdmVudC5sYXRsbmcubG5nLFxuICAgICAgICAgICAgZHJhZ2dhYmxlOiB0cnVlLFxuICAgICAgICAgICAgZm9jdXM6IHRydWVcbiAgICAgICAgfTtcbiAgICB9KTtcblxuICAgICRzY29wZS5uZXdQaW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJHNjb3BlLnBpbiA9IG5ldyBQaW4oKTtcbiAgICAgICAgJHNjb3BlLnBpbi5tYXJrZXJzID0gW107XG4gICAgICAgICRzY29wZS5lZGl0aW5nID0gZmFsc2U7XG4gICAgfTtcblxuICAgICRzY29wZS5zYXZlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkc2NvcGUucGluLmlkKSB7XG4gICAgICAgICAgICBQaW4udXBkYXRlKCRzY29wZS5waW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJHNjb3BlLnBpbi4kc2F2ZSgpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUucGlucy5wdXNoKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgICRzY29wZS5uZXdQaW4oKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNldEFjdGl2ZVBpbiA9IGZ1bmN0aW9uKHBpbikge1xuICAgICAgICAkc2NvcGUucGluID0gcGluO1xuICAgICAgICAkc2NvcGUucGluLm1hcmtlcnMgPSBbXTtcbiAgICAgICAgaWYgKHBpbi5sb25naXR1ZGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgJHNjb3BlLnBpbi5tYXJrZXJzWzBdID0ge1xuICAgICAgICAgICAgICAgIGxhdDogcGluLmxhdGl0dWRlLFxuICAgICAgICAgICAgICAgIGxuZzogcGluLmxvbmdpdHVkZSxcbiAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgZm9jdXM6IHRydWVcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgJHNjb3BlLmVkaXRpbmcgPSB0cnVlO1xuICAgIH07XG5cbiAgICAkc2NvcGUucmVtb3ZlID0gZnVuY3Rpb24ocGluKSB7XG4gICAgICAgIFBpbi5kZWxldGUocGluLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9ICRzY29wZS5waW5zLmluZGV4T2YocGluKTtcbiAgICAgICAgICAgIGlmIChpbmRleCAhPSAtMSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5waW5zLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cblxuICAgIC8vIEJhcnJpZXJlZnJlaWhlaXRzZ3JhZGVcbiAgICAkc2NvcGUuYmFycmllcmVmcmVpaGVpdHNncmFkZSA9IFsgJ0d1dCcsICdUZWlsd2Vpc2UnLCAnTmljaHQgYmFycmllcmVmcmVpJyBdO1xuXG5cbiAgICAvLyBLb3N0ZW5hcnRlblxuICAgICRzY29wZS5rb3N0ZW5hcnRlbiA9IFsgJ0tvc3RlbmxvcycsICdLb3N0ZW5wZmxpY2h0aWcnIF07XG5cblxuICAgIC8vIE1pbmRlc3RhbHRlclxuICAgICRzY29wZS5taW5kZXN0YWx0ZXJzID0gWyAnYWIgMTInLCAnYWIgMTYnLCAnYWIgMTgnLCAnYWIgMjEnIF07XG5cblxuXG59XSk7IiwiYW5ndWxhci5tb2R1bGUoJ2p1Z2VuZHN0YWR0cGxhbi5waW5zJykuY29uZmlnKFsgJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gY29uZmlnKCAkc3RhdGVQcm92aWRlciApIHtcbiAgXG4gICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCAnTGlzdGU6IFBpbicsIHtcbiAgICB1cmw6ICcvcGlucycsXG4gICAgdmlld3M6IHtcbiAgICAgIFwibWFpblwiOiB7XG4gICAgICAgIGNvbnRyb2xsZXI6ICdQaW5zQ29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL3BpbnMvdmlld3MvbGlzdC50cGwuaHRtbCdcbiAgICAgIH1cbiAgICB9LFxuICAgIGRhdGE6eyBwYWdlVGl0bGU6ICdQaW5zJyB9XG4gIH0pO1xuXG59XSk7XG5cbkp1Z2VuZHN0YWR0cGxhbi5Db250cm9sbGVycy5jb250cm9sbGVyKCAnUGluc0NvbnRyb2xsZXInLCBbICckc2NvcGUnLCAnJGxvY2F0aW9uJywgJ1BpbicsIGZ1bmN0aW9uIFBpbnNDb250cm9sbGVyKCAkc2NvcGUsICRsb2NhdGlvbiwgUGluICkge1xuICAgICRzY29wZS5waW5zID0gUGluLnF1ZXJ5KCk7XG5cbiAgICAkc2NvcGUudmlld1BpbiA9IGZ1bmN0aW9uIChwaW4pIHtcbiAgICAgICRsb2NhdGlvbi5wYXRoKCcvcGluLycrcGluLmlkKTtcbiAgICB9O1xuXG59XSk7IiwiYW5ndWxhci5tb2R1bGUoJ2p1Z2VuZHN0YWR0cGxhbi5zdGFydHNlaXRlJykuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbiBjb25maWcoICRzdGF0ZVByb3ZpZGVyICkge1xuICBcbiAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoICdTdGFydHNlaXRlJywge1xuICAgIHVybDogJy9zdGFydHNlaXRlJyxcbiAgICB2aWV3czoge1xuICAgICAgXCJtYWluXCI6IHtcbiAgICAgICAgY29udHJvbGxlcjogJ1N0YXJ0c2VpdGVDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvc3RhcnRzZWl0ZS92aWV3cy9zdGFydHNlaXRlLnRwbC5odG1sJ1xuICAgICAgfVxuICAgIH0sXG4gICAgZGF0YTp7IHBhZ2VUaXRsZTogJ1N0YXJ0c2VpdGUnIH1cbiAgfSk7XG5cbn1dKTtcblxuYW5ndWxhci5tb2R1bGUoJ2p1Z2VuZHN0YWR0cGxhbi5zdGFydHNlaXRlJykuY29udHJvbGxlciggJ1N0YXJ0c2VpdGVDb250cm9sbGVyJywgWyAnJHNjb3BlJywgJyRsb2NhdGlvbicsICdQaW4nLCBmdW5jdGlvbiBTdGFydHNlaXRlQ29udHJvbGxlciggJHNjb3BlLCAkbG9jYXRpb24sIFBpbiApIHtcbiAgICAgYW5ndWxhci5leHRlbmQoJHNjb3BlLCB7XG4gICAgICAgIGNlbnRlcjoge1xuICAgICAgICAgICAgbGF0OiA1MC43MzI4MjkyNDY3MjYsXG4gICAgICAgICAgICBsbmc6IDcuMDkzNzAwNDA5MDExNyxcbiAgICAgICAgICAgIHpvb206IDEzXG4gICAgICAgIH0sXG4gICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICBzY3JvbGxXaGVlbFpvb206IGZhbHNlXG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgICRzY29wZS5tYXJrZXJzID0gW107XG5cbiAgICBQaW4ucXVlcnkoZnVuY3Rpb24ocGlucykge1xuICAgICAgICBhbmd1bGFyLmZvckVhY2gocGlucywgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgaWYgKGl0ZW0ubG9uZ2l0dWRlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWFya2VyID0ge1xuICAgICAgICAgICAgICAgICAgICBsYXQ6IGl0ZW0ubGF0aXR1ZGUsXG4gICAgICAgICAgICAgICAgICAgIGxuZzogaXRlbS5sb25naXR1ZGUsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBpdGVtLnRpdGVsLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnPGgzPicgKyBpdGVtLnRpdGVsICsgJzwvaDM+JyArIGl0ZW0uYmVzY2hyZWlidW5nICsgJzxzbWFsbD48YSBocmVmPVwiJyArICcvIy9waW4vJyArIGl0ZW0uaWQgKyAnXCI+TWVocjwvYT48L3NtYWxsPidcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICRzY29wZS5tYXJrZXJzLnB1c2gobWFya2VyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbn1dKTsiLCJKdWdlbmRzdGFkdHBsYW4uQ29udHJvbGxlcnMuY29udHJvbGxlciggJ1Rlcm1pbkZvcm1Db250cm9sbGVyJywgWyAnJHNjb3BlJyxcbiAgICBmdW5jdGlvbigkc2NvcGUpIHtcblxuICAgICAgICAvLyBXb2NoZW50YWdlXG4gICAgICAgICRzY29wZS53b2NoZW50YWdlID0gWyAnTW9udGFnJywgJ0RpZW5zdGFnJywgJ01pdHR3b2NoJywgJ0Rvbm5lcnN0YWcnLCAnRnJlaXRhZycsICdTYW1zdGFnJywgJ1Nvbm50YWcnIF07XG5cblxuICAgICAgICAvLyBUZXJtaW5cbiAgICAgICAgJHNjb3BlLm5ld1Rlcm1pbiA9IHt9O1xuICAgICAgICAkc2NvcGUuYWRkVGVybWluID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoJHNjb3BlLnBpbi50ZXJtaW5lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUucGluLnRlcm1pbmUgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRzY29wZS5waW4udGVybWluZS5wdXNoKCRzY29wZS5uZXdUZXJtaW4pO1xuICAgICAgICAgICAgJHNjb3BlLm5ld1Rlcm1pbiA9IHt9O1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5pc1Rlcm1pblZhbGlkID0gZnVuY3Rpb24odGVybWluKSB7XG4gICAgICAgICAgICBpZiAodGVybWluLmJlZ2lubiA9PT0gdW5kZWZpbmVkIHx8IHRlcm1pbi5iZWdpbm4gPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRlcm1pbi5nYW56dGFlZ2lnICE9PSB0cnVlICYmICh0ZXJtaW4uYmVnaW5uX3VocnplaXQgPT09IHVuZGVmaW5lZCB8fCB0ZXJtaW4uYmVnaW5uX3VocnplaXQgPT09IDApKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH07XG5cblxuICAgICAgICAvLyBXaWVkZXJob2x1bmdcbiAgICAgICAgJHNjb3BlLndvY2hlX2Rlc19tb25hdHMgPSBbXG4gICAgICAgICAgICB7IGlkOiAwLCBsYWJlbDogJ0plZGUgV29jaGUnIH0sXG4gICAgICAgICAgICB7IGlkOiAxLCBsYWJlbDogJ0plZGUgMS4gV29jaGUnIH0sXG4gICAgICAgICAgICB7IGlkOiAyLCBsYWJlbDogJ0plZGUgMi4gV29jaGUnIH0sXG4gICAgICAgICAgICB7IGlkOiAzLCBsYWJlbDogJ0plZGUgMy4gV29jaGUnIH0sXG4gICAgICAgICAgICB7IGlkOiA0LCBsYWJlbDogJ0plZGUgNC4gV29jaGUnIH0sXG4gICAgICAgICAgICB7IGlkOiA1LCBsYWJlbDogJ0plZGUgNS4gV29jaGUnIH1cbiAgICAgICAgXTtcbiAgICAgICAgJHNjb3BlLm5ld1dpZWRlcmhvbHVuZyA9IHt9O1xuICAgICAgICAkc2NvcGUuYWRkV2llZGVyaG9sdW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoJHNjb3BlLm5ld1Rlcm1pbi53aWVkZXJob2x1bmdlbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLm5ld1Rlcm1pbi53aWVkZXJob2x1bmdlbiA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHNjb3BlLm5ld1Rlcm1pbi53aWVkZXJob2x1bmdlbi5wdXNoKCRzY29wZS5uZXdXaWVkZXJob2x1bmcpO1xuICAgICAgICAgICAgJHNjb3BlLm5ld1dpZWRlcmhvbHVuZyA9IHt9O1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5pc1dpZWRlcmhvbHVuZ1ZhbGlkID0gZnVuY3Rpb24od2llZGVyaG9sdW5nKSB7XG4gICAgICAgICAgICBpZiAod2llZGVyaG9sdW5nLndvY2hlbnRhZyA9PT0gdW5kZWZpbmVkIHx8IHdpZWRlcmhvbHVuZy53b2NoZW50YWcgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcblxuICAgIH1dKTsiLCJhbmd1bGFyLm1vZHVsZSgnanVnZW5kc3RhZHRwbGFuLnRyYWVnZXInKS5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uIGNvbmZpZyggJHN0YXRlUHJvdmlkZXIgKSB7XG4gIFxuICAkc3RhdGVQcm92aWRlci5zdGF0ZSggJ0xpc3RlOiBUcmFlZ2VyJywge1xuICAgIHVybDogJy90cmFlZ2VyJyxcbiAgICB2aWV3czoge1xuICAgICAgXCJtYWluXCI6IHtcbiAgICAgICAgY29udHJvbGxlcjogJ1RyYWVnZXJDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvdHJhZWdlci92aWV3cy9saXN0ZS50cGwuaHRtbCdcbiAgICAgIH1cbiAgICB9LFxuICAgIGRhdGE6eyBwYWdlVGl0bGU6ICdUcsOkZ2VyJyB9XG4gIH0pO1xuXG59XSk7XG5cbkp1Z2VuZHN0YWR0cGxhbi5Db250cm9sbGVycy5jb250cm9sbGVyKCAnVHJhZWdlckNvbnRyb2xsZXInLCBbICckc2NvcGUnLCAnJGxvY2F0aW9uJywgJ1RyYWVnZXInLCBmdW5jdGlvbiBUcmFlZ2VyQ29udHJvbGxlciggJHNjb3BlLCAkbG9jYXRpb24sIFRyYWVnZXIgKSB7XG4gICAgJHNjb3BlLnRyYWVnZXIgPSBUcmFlZ2VyLnF1ZXJ5KCk7XG5cbiAgICAkc2NvcGUudmlld1RyYWVnZXIgPSBmdW5jdGlvbiAodHJhZWdlcikge1xuICAgICAgJGxvY2F0aW9uLnBhdGgoJy90cmFlZ2VyLycrdHJhZWdlci5pZCk7XG4gICAgfTtcblxufV0pOyIsImFuZ3VsYXIubW9kdWxlKCdqdWdlbmRzdGFkdHBsYW4udHJhZWdlcicpLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gY29uZmlnKCAkc3RhdGVQcm92aWRlciApIHtcbiAgXG4gICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCAnRGV0YWlsOiBUcmFlZ2VyJywge1xuICAgIHVybDogJy90cmFlZ2VyL3tpZDpbMC05XSt9JyxcbiAgICB2aWV3czoge1xuICAgICAgXCJtYWluXCI6IHtcbiAgICAgICAgY29udHJvbGxlcjogJ1RyYWVnZXJEZXRhaWxDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvdHJhZWdlci92aWV3cy9kZXRhaWwudHBsLmh0bWwnXG4gICAgICB9XG4gICAgfSxcbiAgICByZXNvbHZlOiB7XG4gICAgICB0cmFlZ2VyRGV0YWlsOiBbICckc3RhdGVQYXJhbXMnLCAnVHJhZWdlcicsIGZ1bmN0aW9uKCRzdGF0ZVBhcmFtcywgVHJhZWdlcikge1xuICAgICAgICByZXR1cm4gVHJhZWdlci5nZXQoe30se2lkOiAkc3RhdGVQYXJhbXMuaWR9KTtcbiAgICAgIH1dXG4gICAgfSxcbiAgICBkYXRhOnsgcGFnZVRpdGxlOiAnVHLDpGdlcicgfVxuICB9KTtcblxufV0pO1xuXG5KdWdlbmRzdGFkdHBsYW4uQ29udHJvbGxlcnMuY29udHJvbGxlciggJ1RyYWVnZXJEZXRhaWxDb250cm9sbGVyJywgWyAnJHNjb3BlJywgJ3RyYWVnZXJEZXRhaWwnLCBmdW5jdGlvbiBUcmFlZ2VyRGV0YWlsQ29udHJvbGxlciggJHNjb3BlLCB0cmFlZ2VyRGV0YWlsICkge1xuICAgICRzY29wZS50cmFlZ2VyID0gdHJhZWdlckRldGFpbDtcblxuICAgIGFuZ3VsYXIuZXh0ZW5kKCRzY29wZSwge1xuICAgICAgICBjZW50ZXI6IHtcbiAgICAgICAgICAgIGxhdDogNTAuNzMyODI5MjQ2NzI2LFxuICAgICAgICAgICAgbG5nOiA3LjA5MzcwMDQwOTAxMTcsXG4gICAgICAgICAgICB6b29tOiAxM1xuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgc2Nyb2xsV2hlZWxab29tOiBmYWxzZVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAkc2NvcGUubWFya2VycyA9IFtdO1xuXG4gICAgdHJhZWdlckRldGFpbC4kcHJvbWlzZS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICBhbmd1bGFyLmZvckVhY2godHJhZWdlckRldGFpbC5waW5zLCBmdW5jdGlvbihpdGVtLCBrZXkpIHtcbiAgICAgICAgICAgIHZhciBtYXJrZXIgPSB7XG4gICAgICAgICAgICAgICAgbGF0OiBpdGVtLmxhdGl0dWRlLFxuICAgICAgICAgICAgICAgIGxuZzogaXRlbS5sb25naXR1ZGUsXG4gICAgICAgICAgICAgICAgdGl0bGU6IGl0ZW0udGl0ZWwsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJzxoMz4nICsgaXRlbS50aXRlbCArICc8L2gzPicgKyBpdGVtLmJlc2NocmVpYnVuZyArICc8c21hbGw+PGEgaHJlZj1cIicgKyAnLyMvcGluLycraXRlbS5pZCArICdcIj5NZWhyPC9hPjwvc21hbGw+J1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICRzY29wZS5tYXJrZXJzLnB1c2gobWFya2VyKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XSk7IiwiYW5ndWxhci5tb2R1bGUoJ2p1Z2VuZHN0YWR0cGxhbi50cmFlZ2VyJykuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbiBjb25maWcoICRzdGF0ZVByb3ZpZGVyICkge1xuXG4gICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoICdGb3JtOiBUcmFlZ2VyJywge1xuICAgICAgICB1cmw6ICcvdHJhZWdlci9jcmVhdGUnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICAgXCJtYWluXCI6IHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnVHJhZWdlckZvcm1Db250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC90cmFlZ2VyL3ZpZXdzL2Zvcm0udHBsLmh0bWwnXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGRhdGE6eyBwYWdlVGl0bGU6ICdUcsOkZ2VyIGVyc3RlbGxlbicgfVxuICAgIH0pO1xuXG59XSk7XG5cbkp1Z2VuZHN0YWR0cGxhbi5Db250cm9sbGVycy5jb250cm9sbGVyKCAnVHJhZWdlckZvcm1Db250cm9sbGVyJywgWyAnJHNjb3BlJywgJyRsb2NhdGlvbicsICdUcmFlZ2VyJywgJ0thdGVnb3JpZScsICdVcGxvYWQnLCBmdW5jdGlvbiBUcmFlZ2VyRm9ybUNvbnRyb2xsZXIoICRzY29wZSwgJGxvY2F0aW9uLCBUcmFlZ2VyLCBLYXRlZ29yaWUsIFVwbG9hZCApIHtcbiAgICAkc2NvcGUua2F0ZWdvcmllbiA9IEthdGVnb3JpZS5xdWVyeSgpO1xuICAgICRzY29wZS50cmFlZ2VyID0gbmV3IFRyYWVnZXIoKTtcbiAgICAkc2NvcGUudHJhZWdlcnMgPSBUcmFlZ2VyLnF1ZXJ5KCk7XG5cbiAgICAkc2NvcGUubmV3VHJhZWdlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2NvcGUudHJhZWdlciA9IG5ldyBUcmFlZ2VyKCk7XG4gICAgICAgICRzY29wZS5lZGl0aW5nID0gZmFsc2U7XG4gICAgfTtcblxuICAgICRzY29wZS5zYXZlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkc2NvcGUudHJhZWdlci5pZCkge1xuICAgICAgICAgICAgVHJhZWdlci51cGRhdGUoJHNjb3BlLnRyYWVnZXIpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLm5ld1RyYWVnZXIoKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGFsZXJ0KCdFaW4gVHLDpGdlciBtaXQgZGllc2VyIEVtYWlsLUFkcmVzc2UgZXhpc3RpZXJ0IGJlcmVpdHMhJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRzY29wZS50cmFlZ2VyLiRzYXZlKCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICRzY29wZS50cmFlZ2Vycy5wdXNoKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAkc2NvcGUubmV3VHJhZWdlcigpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoJ0VpbiBUcsOkZ2VyIG1pdCBkaWVzZXIgRW1haWwtQWRyZXNzZSBleGlzdGllcnQgYmVyZWl0cyEnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgICRzY29wZS5zZXRBY3RpdmVUcmFlZ2VyID0gZnVuY3Rpb24odHJhZWdlcikge1xuICAgICAgICAkc2NvcGUudHJhZWdlciA9IHRyYWVnZXI7XG4gICAgICAgICRzY29wZS5lZGl0aW5nID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnJlbW92ZSA9IGZ1bmN0aW9uKHRyYWVnZXIpIHtcbiAgICAgICAgVHJhZWdlci5kZWxldGUodHJhZWdlciwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAkc2NvcGUudHJhZWdlcnMuaW5kZXhPZih0cmFlZ2VyKTtcbiAgICAgICAgICAgIGlmIChpbmRleCAhPSAtMSkge1xuICAgICAgICAgICAgICAgICRzY29wZS50cmFlZ2Vycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8gQmlsZGVyXG4gICAgJHNjb3BlLm9uRmlsZVNlbGVjdCA9IGZ1bmN0aW9uKCRmaWxlcykge1xuICAgICAgICB2YXIgZG9VcGxvYWQgPSBmdW5jdGlvbihmaWxlKSB7XG4gICAgICAgICAgICBVcGxvYWQudXBsb2FkKHtcbiAgICAgICAgICAgICAgICB1cmw6ICdhcHBfZGV2LnBocC9pbWcvdXBsb2FkJywgLy91cGxvYWQucGhwIHNjcmlwdCwgbm9kZS5qcyByb3V0ZSwgb3Igc2VydmxldCB1cmxcbiAgICAgICAgICAgICAgICAvLyBtZXRob2Q6ICdQT1NUJyBvciAnUFVUJyxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAvLyBoZWFkZXJzOiB7J2hlYWRlci1rZXknOiAnaGVhZGVyLXZhbHVlJ30sXG4gICAgICAgICAgICAgICAgLy8gd2l0aENyZWRlbnRpYWxzOiB0cnVlLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtteU9iajogJHNjb3BlLm15TW9kZWxPYmp9LFxuICAgICAgICAgICAgICAgIGZpbGU6IGZpbGUgLy8gb3IgbGlzdCBvZiBmaWxlczogJGZpbGVzIGZvciBodG1sNSBvbmx5XG4gICAgICAgICAgICAgICAgLy8gZmlsZU5hbWU6ICdkb2MuanBnJyBvciBbJzEuanBnJywgJzIuanBnJywgLi4uXSAvLyB0byBtb2RpZnkgdGhlIG5hbWUgb2YgdGhlIGZpbGVcbiAgICAgICAgICAgICAgICAvKiBjdXN0b21pemUgZmlsZSBmb3JtRGF0YSBuYW1lICgnQ29udGVudC1EZXNwb3NpdGlvbicpLCBzZXJ2ZXIgc2lkZSBmaWxlIHZhcmlhYmxlIG5hbWUuXG4gICAgICAgICAgICAgICAgIERlZmF1bHQgaXMgJ2ZpbGUnICovXG4gICAgICAgICAgICAgICAgLy9maWxlRm9ybURhdGFOYW1lOiBteUZpbGUsIC8vb3IgYSBsaXN0IG9mIG5hbWVzIGZvciBtdWx0aXBsZSBmaWxlcyAoaHRtbDUpLlxuICAgICAgICAgICAgICAgIC8qIGN1c3RvbWl6ZSBob3cgZGF0YSBpcyBhZGRlZCB0byBmb3JtRGF0YS4gU2VlICM0MCNpc3N1ZWNvbW1lbnQtMjg2MTIwMDAgZm9yIHNhbXBsZSBjb2RlICovXG4gICAgICAgICAgICAgICAgLy9mb3JtRGF0YUFwcGVuZGVyOiBmdW5jdGlvbihmb3JtRGF0YSwga2V5LCB2YWwpe31cbiAgICAgICAgICAgIH0pLnByb2dyZXNzKGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncGVyY2VudDogJyArIHBhcnNlSW50KDEwMC4wICogZXZ0LmxvYWRlZCAvIGV2dC50b3RhbCkpO1xuICAgICAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpIHtcbiAgICAgICAgICAgICAgICAvLyBmaWxlIGlzIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseVxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUudHJhZWdlci5iaWxkZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudHJhZWdlci5iaWxkZXIgPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmlsZS50bXBfbmFtZSA9IGRhdGEuZm9sZGVyO1xuICAgICAgICAgICAgICAgICRzY29wZS50cmFlZ2VyLmJpbGRlci5wdXNoKGZpbGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLy5lcnJvciguLi4pXG4gICAgICAgICAgICAvLy50aGVuKHN1Y2Nlc3MsIGVycm9yLCBwcm9ncmVzcyk7XG4gICAgICAgICAgICAvLy54aHIoZnVuY3Rpb24oeGhyKXt4aHIudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoLi4uKX0pLy8gYWNjZXNzIGFuZCBhdHRhY2ggYW55IGV2ZW50IGxpc3RlbmVyIHRvIFhNTEh0dHBSZXF1ZXN0LlxuICAgICAgICB9O1xuXG4gICAgICAgIC8vJGZpbGVzOiBhbiBhcnJheSBvZiBmaWxlcyBzZWxlY3RlZCwgZWFjaCBmaWxlIGhhcyBuYW1lLCBzaXplLCBhbmQgdHlwZS5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkZmlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBmaWxlID0gJGZpbGVzW2ldO1xuICAgICAgICAgICAgJHNjb3BlLnVwbG9hZCA9IGRvVXBsb2FkKGZpbGUpO1xuICAgICAgICB9XG4gICAgfTtcblxuXG4gICAgLy8gQWRyZXNzZW5cbiAgICAkc2NvcGUubmV3QWRyZXNzZSA9IHt9O1xuICAgICRzY29wZS5hZGRBZHJlc3NlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkc2NvcGUudHJhZWdlci5hZHJlc3NlbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAkc2NvcGUudHJhZWdlci5hZHJlc3NlbiA9IFtdO1xuICAgICAgICB9XG4gICAgICAgICRzY29wZS50cmFlZ2VyLmFkcmVzc2VuLnB1c2goJHNjb3BlLm5ld0FkcmVzc2UpO1xuICAgICAgICAkc2NvcGUubmV3QWRyZXNzZSA9IHt9O1xuICAgIH07XG5cbiAgICAkc2NvcGUuaXNBZHJlc3NlVmFsaWQgPSBmdW5jdGlvbihhZHJlc3NlKSB7XG4gICAgICAgIGlmIChhZHJlc3NlLnN0cmFzc2UgPT09IHVuZGVmaW5lZCB8fCBhZHJlc3NlLnN0cmFzc2UubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAoYWRyZXNzZS5vcnQgPT09IHVuZGVmaW5lZCB8fCBhZHJlc3NlLm9ydC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG59XSk7IiwiYW5ndWxhci5tb2R1bGUoJ2p1Z2VuZHN0YWR0cGxhbi50cmFlZ2VyJykuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbiBjb25maWcoICRzdGF0ZVByb3ZpZGVyICkge1xuXG4gICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoICdMb2dpbjogVHJhZWdlcicsIHtcbiAgICAgICAgdXJsOiAnL3RyYWVnZXIvbG9naW4nLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICAgXCJtYWluXCI6IHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnVHJhZWdlckxvZ2luQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvdHJhZWdlci92aWV3cy9sb2dpbi50cGwuaHRtbCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGF0YTp7IHBhZ2VUaXRsZTogJ0VpbmxvZ2dlbicgfVxuICAgIH0pO1xuXG59XSk7XG5cbkp1Z2VuZHN0YWR0cGxhbi5Db250cm9sbGVycy5jb250cm9sbGVyKCAnVHJhZWdlckxvZ2luQ29udHJvbGxlcicsIFsgJyRzY29wZScsICckc3RhdGUnLCAnJHdpbmRvdycsICdMb2dpblNlcnZpY2UnLCAnSnd0RGVjb2RlJywgJ1RyYWVnZXInLCBmdW5jdGlvbiBUcmFlZ2VyTG9naW5Db250cm9sbGVyKCAkc2NvcGUsICRzdGF0ZSwgJHdpbmRvdywgTG9naW5TZXJ2aWNlLCBKd3REZWNvZGUsIFRyYWVnZXIpIHtcblxuICAgICRzY29wZS50cmFlZ2VyID0gbmV3IFRyYWVnZXIoKTtcblxuICAgICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2NvcGUudHJhZWdlci4kbG9naW4oKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAkd2luZG93LmxvY2FsU3RvcmFnZS50b2tlbiA9IHJlc3BvbnNlLnRva2VuO1xuXG4gICAgICAgICAgICAgICAgdmFyIGRlY29kZWQgPSBKd3REZWNvZGUuZGVjb2RlKHJlc3BvbnNlLnRva2VuKTtcblxuICAgICAgICAgICAgICAgIExvZ2luU2VydmljZS5zZXRMb2dnZWRJbih0cnVlKTtcbiAgICAgICAgICAgICAgICBMb2dpblNlcnZpY2Uuc2V0SnVnZW5kc3RhZHRwbGFuVXNlcihkZWNvZGVkLnRyYWVnZXIpO1xuXG4gICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdTdGFydHNlaXRlJyk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IHtcbiAgICAgICAgICAgICAgICAgICAgbXNnOiAnQXV0aGVudGlmaXppZXJ1bmcgZmVobGdlc2NobGFnZW4hJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgIH07XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSggJ3BsdXNPbmUnLCBbXSApXG5cbi5kaXJlY3RpdmUoICdwbHVzT25lJywgZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgbGluazogZnVuY3Rpb24oIHNjb3BlLCBlbGVtZW50LCBhdHRycyApIHtcbiAgICAgIGdhcGkucGx1c29uZS5yZW5kZXIoIGVsZW1lbnRbMF0sIHtcbiAgICAgICAgXCJzaXplXCI6IFwibWVkaXVtXCIsXG4gICAgICAgIFwiaHJlZlwiOiBcImh0dHA6Ly9iaXQubHkvbmdCb2lsZXJwbGF0ZVwiXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59KVxuXG47XG5cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
