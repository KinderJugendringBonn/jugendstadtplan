function LoginInterceptor(e){return{request:function(n){return e.localStorage.token&&(n.headers.Authorization="Bearer "+e.localStorage.token),n}}}var jugendstadtplanLogin=angular.module("jugendstadtplan.login",[]);jugendstadtplanLogin.service("LoginService",function(){var e=!1;return{isLoggedIn:function(){return e},setLoggedIn:function(n){e=n}}}),angular.module("jugendstadtplan.ansprechpartner",[]),angular.module("jugendstadtplan.links",[]),angular.module("jugendstadtplan.pins",["ui.router","jugendstadtplan.links","jugendstadtplan.ansprechpartner","jugendstadtplan.termin"]),angular.module("jugendstadtplan.termin",[]),angular.module("jugendstadtplan.startseite",["ui.router","leaflet-directive"]),angular.module("jugendstadtplan.traeger",["ui.router","jugendstadtplan.links","jugendstadtplan.ansprechpartner","jugendstadtplan.login"]);var Jugendstadtplan=Jugendstadtplan||{};Jugendstadtplan.Controllers=angular.module("jugendstadtplan.controllers",[]),angular.module("jugendstadtplan",["ngResource","ngSanitize","ui.router","leaflet-directive","textAngular","ngFileUpload","jugendstadtplan.templates","jugendstadtplan.login","jugendstadtplan.api","jugendstadtplan.startseite","jugendstadtplan.pins","jugendstadtplan.traeger","jugendstadtplan.controllers"]).config(function(e,n){n.otherwise("/startseite")}).run(function(){}).controller("AppCtrl",["$scope","$location",function(e,n){e.$on("$stateChangeSuccess",function(n,t,r,a,l){angular.isDefined(t.data.pageTitle)&&(e.pageTitle=t.data.pageTitle+" | Jugendstadtplan")})}]),Jugendstadtplan.Controllers.controller("AnsprechpartnerFormController",["$scope",function(e){e.newAnsprechpartner={},e.addAnsprechpartner=function(){void 0===e.model.ansprechpartner&&(e.model.ansprechpartner=[]),e.model.ansprechpartner.push(e.newAnsprechpartner),e.newAnsprechpartner={}},e.isAnsprechpartnerValid=function(e){return void 0===e.name||0===e.name.length?!1:void 0!==e.email&&0!==e.email.length}}]),Jugendstadtplan.Controllers.controller("LinksFormController",["$scope",function(e){e.newLink={},e.addLink=function(){void 0===e.model.links&&(e.model.links=[]),e.model.links.push(e.newLink),e.newLink={}},e.isLinkValid=function(e){return void 0===e.titel||0===e.titel.length?!1:void 0!==e.url&&0!==e.url.length}}]),angular.module("jugendstadtplan.pins").config(function(e){e.state("Detail: Pin",{url:"/pin/{id:[0-9]+}",views:{main:{controller:"PinDetailController",templateUrl:"app/pins/views/detail.tpl.html"}},resolve:{pinDetail:["$stateParams","Pin",function(e,n){return n.get({},{id:e.id})}]},data:{pageTitle:"Pin"}})}),Jugendstadtplan.Controllers.controller("PinDetailController",["$scope","pinDetail",function(e,n){e.markers=[],e.center={lat:50.732829246726,lng:7.0937004090117,zoom:13},n.$promise.then(function(){e.pin=n,angular.extend(e,{defaults:{scrollWheelZoom:!1}}),e.center={lat:n.latitude,lng:n.longitude,zoom:15};var t={lat:n.latitude,lng:n.longitude,title:n.titel,focus:!0,message:"<h3>"+n.titel+"</h3>"+n.beschreibung};e.markers.push(t)},function(){angular.extend(e,{defaults:{scrollWheelZoom:!1}})})}]),angular.module("jugendstadtplan.pins").config(function(e){e.state("Form: Pin",{url:"/pin/create",views:{main:{controller:"PinFormController",templateUrl:"app/pins/views/form.tpl.html"}},data:{pageTitle:"Pin erstellen"}})}),Jugendstadtplan.Controllers.controller("PinFormController",["$scope","$location","Pin","Traeger","Kategorie",function(e,n,t,r,a){e.kategorien=a.query(),e.pin=new t,e.pins=t.query(),e.traegers=r.query(),angular.extend(e,{center:{lat:50.732829246726,lng:7.0937004090117,zoom:13},defaults:{scrollWheelZoom:!1},events:{}}),e.pin.markers=[],e.$on("leafletDirectiveMap.click",function(n,t){var r=t.leafletEvent;e.pin.markers[0]={lat:r.latlng.lat,lng:r.latlng.lng,draggable:!0,focus:!0}}),e.newPin=function(){e.pin=new t,e.pin.markers=[],e.editing=!1},e.save=function(){e.pin.id?t.update(e.pin):e.pin.$save().then(function(n){e.pins.push(n)}),e.newPin()},e.setActivePin=function(n){e.pin=n,e.pin.markers=[],null!=n.longitude&&(e.pin.markers[0]={lat:n.latitude,lng:n.longitude,draggable:!0,focus:!0}),e.editing=!0},e.remove=function(n){t["delete"](n,function(){var t=e.pins.indexOf(n);-1!=t&&e.pins.splice(t,1)})},e.barrierefreiheitsgrade=["Gut","Teilweise","Nicht barrierefrei"],e.kostenarten=["Kostenlos","Kostenpflichtig"],e.mindestalters=["ab 12","ab 16","ab 18","ab 21"]}]),angular.module("jugendstadtplan.pins").config(function(e){e.state("Liste: Pin",{url:"/pins",views:{main:{controller:"PinsController",templateUrl:"app/pins/views/list.tpl.html"}},data:{pageTitle:"Pins"}})}),Jugendstadtplan.Controllers.controller("PinsController",["$scope","$location","Pin",function(e,n,t){e.pins=t.query(),e.viewPin=function(e){n.path("/pin/"+e.id)}}]),Jugendstadtplan.Controllers.controller("TerminFormController",["$scope",function(e){e.wochentage=["Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag","Sonntag"],e.newTermin={},e.addTermin=function(){void 0===e.pin.termine&&(e.pin.termine=[]),e.pin.termine.push(e.newTermin),e.newTermin={}},e.isTerminValid=function(e){return void 0===e.beginn||0===e.beginn?!1:e.ganztaegig===!0||void 0!==e.beginn_uhrzeit&&0!==e.beginn_uhrzeit},e.woche_des_monats=[{id:0,label:"Jede Woche"},{id:1,label:"Jede 1. Woche"},{id:2,label:"Jede 2. Woche"},{id:3,label:"Jede 3. Woche"},{id:4,label:"Jede 4. Woche"},{id:5,label:"Jede 5. Woche"}],e.newWiederholung={},e.addWiederholung=function(){void 0===e.newTermin.wiederholungen&&(e.newTermin.wiederholungen=[]),e.newTermin.wiederholungen.push(e.newWiederholung),e.newWiederholung={}},e.isWiederholungValid=function(e){return void 0!==e.wochentag&&0!==e.wochentag}}]),angular.module("jugendstadtplan.startseite").config(function(e){e.state("Startseite",{url:"/startseite",views:{main:{controller:"StartseiteController",templateUrl:"app/startseite/views/startseite.tpl.html"}},data:{pageTitle:"Startseite"}})}),angular.module("jugendstadtplan.startseite").controller("StartseiteController",["$scope","$location","Pin",function(e,n,t){angular.extend(e,{center:{lat:50.732829246726,lng:7.0937004090117,zoom:13},defaults:{scrollWheelZoom:!1}}),e.markers=[],t.query(function(n){angular.forEach(n,function(n){if(null!=n.longitude){var t={lat:n.latitude,lng:n.longitude,title:n.titel,message:"<h3>"+n.titel+"</h3>"+n.beschreibung+'<small><a href="/#/pin/'+n.id+'">Mehr</a></small>'};e.markers.push(t)}})})}]),angular.module("plusOne",[]).directive("plusOne",function(){return{link:function(e,n,t){gapi.plusone.render(n[0],{size:"medium",href:"http://bit.ly/ngBoilerplate"})}}}),angular.module("jugendstadtplan.traeger").config(function(e){e.state("Liste: Traeger",{url:"/traeger",views:{main:{controller:"TraegerController",templateUrl:"app/traeger/views/liste.tpl.html"}},data:{pageTitle:"Träger"}})}),Jugendstadtplan.Controllers.controller("TraegerController",["$scope","$location","Traeger",function(e,n,t){e.traeger=t.query(),e.viewTraeger=function(e){n.path("/traeger/"+e.id)}}]),angular.module("jugendstadtplan.traeger").config(function(e){e.state("Detail: Traeger",{url:"/traeger/{id:[0-9]+}",views:{main:{controller:"TraegerDetailController",templateUrl:"app/traeger/views/detail.tpl.html"}},resolve:{traegerDetail:["$stateParams","Traeger",function(e,n){return n.get({},{id:e.id})}]},data:{pageTitle:"Träger"}})}),Jugendstadtplan.Controllers.controller("TraegerDetailController",["$scope","traegerDetail",function(e,n){e.traeger=n,angular.extend(e,{center:{lat:50.732829246726,lng:7.0937004090117,zoom:13},defaults:{scrollWheelZoom:!1}}),e.markers=[],n.$promise.then(function(){angular.forEach(n.pins,function(n,t){var r={lat:n.latitude,lng:n.longitude,title:n.titel,message:"<h3>"+n.titel+"</h3>"+n.beschreibung+'<small><a href="/#/pin/'+n.id+'">Mehr</a></small>'};e.markers.push(r)})})}]),angular.module("jugendstadtplan.traeger").config(function(e){e.state("Form: Traeger",{url:"/traeger/create",views:{main:{controller:"TraegerFormController",templateUrl:"app/traeger/views/form.tpl.html"}},data:{pageTitle:"Träger erstellen"}})}),Jugendstadtplan.Controllers.controller("TraegerFormController",["$scope","$location","Traeger","Kategorie","Upload",function(e,n,t,r,a){e.kategorien=r.query(),e.traeger=new t,e.traegers=t.query(),e.newTraeger=function(){e.traeger=new t,e.editing=!1},e.save=function(){e.traeger.id?t.update(e.traeger).then(function(){e.newTraeger()},function(){alert("Ein Träger mit dieser Email-Adresse existiert bereits!")}):e.traeger.$save().then(function(n){e.traegers.push(n),e.newTraeger()},function(){alert("Ein Träger mit dieser Email-Adresse existiert bereits!")})},e.setActiveTraeger=function(n){e.traeger=n,e.editing=!0},e.remove=function(n){t["delete"](n,function(){var t=e.traegers.indexOf(n);-1!=t&&e.traegers.splice(t,1)})},e.onFileSelect=function(n){for(var t=function(n){a.upload({url:"app_dev.php/img/upload",method:"POST",data:{myObj:e.myModelObj},file:n}).progress(function(e){console.log("percent: "+parseInt(100*e.loaded/e.total))}).success(function(t,r,a,l){void 0===e.traeger.bilder&&(e.traeger.bilder=[]),n.tmp_name=t.folder,e.traeger.bilder.push(n)})},r=0;r<n.length;r++){var l=n[r];e.upload=t(l)}},e.newAdresse={},e.addAdresse=function(){void 0===e.traeger.adressen&&(e.traeger.adressen=[]),e.traeger.adressen.push(e.newAdresse),e.newAdresse={}},e.isAdresseValid=function(e){return void 0===e.strasse||0===e.strasse.length?!1:void 0!==e.ort&&0!==e.ort.length}}]),angular.module("jugendstadtplan.traeger").config(function(e){e.state("Login: Traeger",{url:"/traeger/login",views:{main:{controller:"TraegerLoginController",templateUrl:"app/traeger/views/login.tpl.html"}},data:{pageTitle:"Einloggen"}})}),Jugendstadtplan.Controllers.controller("TraegerLoginController",["$scope","$state","$window","LoginService","Traeger",function(e,n,t,r,a){e.traeger=new a,e.login=function(){e.traeger.$login().then(function(e){t.localStorage.token=e.token,r.setLoggedIn(!0),n.go("Startseite")},function(n){e.error={msg:"Authentifizierung fehlgeschlagen!"}})}}]);var jugendstadtplanApi=angular.module("jugendstadtplan.api",["ngResource"]),backendPrefix="http://api.jugendstadtplan.dev";jugendstadtplanApi.provider("Pin",function(){this.$get=["$resource",function(e){var n=backendPrefix+"/pins";return e(n,{},{get:{method:"GET",url:n+"/:id",params:{id:"@id"}},update:{method:"PUT",url:n+"/update/:id",params:{id:"@id"},interceptor:LoginInterceptor},save:{method:"POST",url:n+"/create",interceptor:LoginInterceptor},"delete":{method:"DELETE",url:n+"/delete/:id",params:{id:"@id"},interceptor:LoginInterceptor}})}]}),jugendstadtplanApi.provider("Traeger",function(){this.$get=["$resource",function(e){var n=backendPrefix+"/traeger";return e(n,{},{get:{method:"GET",url:n+"/:id",params:{id:"@id"}},update:{method:"PUT",url:n+"/update/:id",params:{id:"@id"},interceptor:LoginInterceptor},save:{method:"POST",url:n+"/create"},"delete":{method:"DELETE",url:n+"/delete/:id",params:{id:"@id"},interceptor:LoginInterceptor},login:{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:backendPrefix+"/authentication/traeger_check",transformRequest:function(e,n){var t=[];for(var r in e)t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t.join("&")}}})}]}),jugendstadtplanApi.provider("Kategorie",function(){this.$get=["$resource",function(e){var n=backendPrefix+"/kategorie";return e(n)}]});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi9yZXNvdXJjZXMvSnVnZW5kc3RhZHRwbGFuQXBpLmpzIiwiY29tbW9uL3Jlc291cmNlcy9Mb2dpblNlcnZpY2UuanMiLCJhcHAvYW5zcHJlY2hwYXJ0bmVyL0Fuc3ByZWNocGFydG5lck1vZHVsZS5qcyIsImFwcC9saW5rcy9MaW5rc01vZHVsZS5qcyIsImFwcC9waW5zL1BpbnNNb2R1bGUuanMiLCJhcHAvdGVybWluL1Rlcm1pbk1vZHVsZS5qcyIsImFwcC9zdGFydHNlaXRlL1N0YXJ0c2VpdGVNb2R1bGUuanMiLCJhcHAvdHJhZWdlci9UcmFlZ2VyTW9kdWxlLmpzIiwiYXBwL2FwcC5qcyIsImFwcC9hbnNwcmVjaHBhcnRuZXIvQW5zcHJlY2hwYXJ0bmVyRm9ybUNvbnRyb2xsZXIuanMiLCJhcHAvbGlua3MvTGlua3NGb3JtQ29udHJvbGxlci5qcyIsImFwcC9waW5zL1BpbkRldGFpbENvbnRyb2xsZXIuanMiLCJhcHAvcGlucy9QaW5Gb3JtQ29udHJvbGxlci5qcyIsImFwcC9waW5zL1BpbnNDb250cm9sbGVyLmpzIiwiYXBwL3Rlcm1pbi9UZXJtaW5Gb3JtQ29udHJvbGxlci5qcyIsImFwcC9zdGFydHNlaXRlL1N0YXJ0c2VpdGVDb250cm9sbGVyLmpzIiwiY29tbW9uL3BsdXNPbmUvcGx1c09uZS5qcyIsImFwcC90cmFlZ2VyL1RyYWVnZXJDb250cm9sbGVyLmpzIiwiYXBwL3RyYWVnZXIvVHJhZWdlckRldGFpbENvbnRyb2xsZXIuanMiLCJhcHAvdHJhZWdlci9UcmFlZ2VyRm9ybUNvbnRyb2xsZXIuanMiLCJhcHAvdHJhZWdlci9UcmFlZ2VyTG9naW5Db250cm9sbGVyLmpzIl0sIm5hbWVzIjpbIkxvZ2luSW50ZXJjZXB0b3IiLCIkd2luZG93IiwicmVxdWVzdCIsImNvbmZpZyIsImxvY2FsU3RvcmFnZSIsInRva2VuIiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJqdWdlbmRzdGFkdHBsYW5Mb2dpbiIsImFuZ3VsYXIiLCJtb2R1bGUiLCJzZXJ2aWNlIiwiYXV0aGVudGljYXRlZCIsImlzTG9nZ2VkSW4iLCJzZXRMb2dnZWRJbiIsImxvZ2dlZEluIiwiSnVnZW5kc3RhZHRwbGFuIiwiQ29udHJvbGxlcnMiLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIm90aGVyd2lzZSIsInJ1biIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCIkbG9jYXRpb24iLCIkb24iLCJldmVudCIsInRvU3RhdGUiLCJ0b1BhcmFtcyIsImZyb21TdGF0ZSIsImZyb21QYXJhbXMiLCJpc0RlZmluZWQiLCJkYXRhIiwicGFnZVRpdGxlIiwibmV3QW5zcHJlY2hwYXJ0bmVyIiwiYWRkQW5zcHJlY2hwYXJ0bmVyIiwidW5kZWZpbmVkIiwibW9kZWwiLCJhbnNwcmVjaHBhcnRuZXIiLCJwdXNoIiwiaXNBbnNwcmVjaHBhcnRuZXJWYWxpZCIsIm5hbWUiLCJsZW5ndGgiLCJlbWFpbCIsIm5ld0xpbmsiLCJhZGRMaW5rIiwibGlua3MiLCJpc0xpbmtWYWxpZCIsImxpbmsiLCJ0aXRlbCIsInVybCIsInN0YXRlIiwidmlld3MiLCJtYWluIiwidGVtcGxhdGVVcmwiLCJyZXNvbHZlIiwicGluRGV0YWlsIiwiJHN0YXRlUGFyYW1zIiwiUGluIiwiZ2V0IiwiaWQiLCJtYXJrZXJzIiwiY2VudGVyIiwibGF0IiwibG5nIiwiem9vbSIsIiRwcm9taXNlIiwidGhlbiIsInBpbiIsImV4dGVuZCIsImRlZmF1bHRzIiwic2Nyb2xsV2hlZWxab29tIiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJtYXJrZXIiLCJ0aXRsZSIsImZvY3VzIiwibWVzc2FnZSIsImJlc2NocmVpYnVuZyIsIlRyYWVnZXIiLCJLYXRlZ29yaWUiLCJrYXRlZ29yaWVuIiwicXVlcnkiLCJwaW5zIiwidHJhZWdlcnMiLCJldmVudHMiLCJhcmdzIiwibGVhZkV2ZW50IiwibGVhZmxldEV2ZW50IiwibGF0bG5nIiwiZHJhZ2dhYmxlIiwibmV3UGluIiwiZWRpdGluZyIsInNhdmUiLCJ1cGRhdGUiLCIkc2F2ZSIsInJlc3BvbnNlIiwic2V0QWN0aXZlUGluIiwicmVtb3ZlIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiYmFycmllcmVmcmVpaGVpdHNncmFkZSIsImtvc3RlbmFydGVuIiwibWluZGVzdGFsdGVycyIsInZpZXdQaW4iLCJwYXRoIiwid29jaGVudGFnZSIsIm5ld1Rlcm1pbiIsImFkZFRlcm1pbiIsInRlcm1pbmUiLCJpc1Rlcm1pblZhbGlkIiwidGVybWluIiwiYmVnaW5uIiwiZ2FuenRhZWdpZyIsImJlZ2lubl91aHJ6ZWl0Iiwid29jaGVfZGVzX21vbmF0cyIsImxhYmVsIiwibmV3V2llZGVyaG9sdW5nIiwiYWRkV2llZGVyaG9sdW5nIiwid2llZGVyaG9sdW5nZW4iLCJpc1dpZWRlcmhvbHVuZ1ZhbGlkIiwid2llZGVyaG9sdW5nIiwid29jaGVudGFnIiwiZm9yRWFjaCIsIml0ZW0iLCJkaXJlY3RpdmUiLCJzY29wZSIsImVsZW1lbnQiLCJhdHRycyIsImdhcGkiLCJwbHVzb25lIiwicmVuZGVyIiwic2l6ZSIsImhyZWYiLCJ0cmFlZ2VyIiwidmlld1RyYWVnZXIiLCJ0cmFlZ2VyRGV0YWlsIiwia2V5IiwiVXBsb2FkIiwibmV3VHJhZWdlciIsImFsZXJ0Iiwic2V0QWN0aXZlVHJhZWdlciIsIm9uRmlsZVNlbGVjdCIsIiRmaWxlcyIsImRvVXBsb2FkIiwiZmlsZSIsInVwbG9hZCIsIm1ldGhvZCIsIm15T2JqIiwibXlNb2RlbE9iaiIsInByb2dyZXNzIiwiZXZ0IiwiY29uc29sZSIsImxvZyIsInBhcnNlSW50IiwibG9hZGVkIiwidG90YWwiLCJzdWNjZXNzIiwic3RhdHVzIiwiYmlsZGVyIiwidG1wX25hbWUiLCJmb2xkZXIiLCJpIiwibmV3QWRyZXNzZSIsImFkZEFkcmVzc2UiLCJhZHJlc3NlbiIsImlzQWRyZXNzZVZhbGlkIiwiYWRyZXNzZSIsInN0cmFzc2UiLCJvcnQiLCIkc3RhdGUiLCJMb2dpblNlcnZpY2UiLCJsb2dpbiIsIiRsb2dpbiIsImdvIiwiZXJyb3IiLCJtc2ciLCJqdWdlbmRzdGFkdHBsYW5BcGkiLCJiYWNrZW5kUHJlZml4IiwicHJvdmlkZXIiLCJ0aGlzIiwiJGdldCIsIiRyZXNvdXJjZSIsImJhY2tlbmRVcmwiLCJwYXJhbXMiLCJpbnRlcmNlcHRvciIsImRlbGV0ZSIsIkNvbnRlbnQtVHlwZSIsInRyYW5zZm9ybVJlcXVlc3QiLCJoZWFkZXJzR2V0dGVyIiwic3RyIiwiZCIsImVuY29kZVVSSUNvbXBvbmVudCIsImpvaW4iXSwibWFwcGluZ3MiOiJBQUVBLFFBQUFBLGtCQUFBQyxHQUNBLE9BQ0FDLFFBQUEsU0FBQUMsR0FLQSxNQUpBRixHQUFBRyxhQUFBQyxRQUNBRixFQUFBRyxRQUFBQyxjQUFBLFVBQUFOLEVBQUFHLGFBQUFDLE9BR0FGLElDVEEsR0FBQUssc0JBQUFDLFFBQUFDLE9BQUEsMkJBRUFGLHNCQUFBRyxRQUFBLGVBQUEsV0FDQSxHQUFBQyxJQUFBLENBRUEsUUFDQUMsV0FBQSxXQUNBLE1BQUFELElBR0FFLFlBQUEsU0FBQUMsR0FDQUgsRUFBQUcsTUNYQU4sUUFBQUMsT0FBQSxzQ0NBQUQsUUFBQUMsT0FBQSw0QkNBQUQsUUFBQUMsT0FBQSx3QkFDQSxZQUFBLHdCQUFBLGtDQUFBLDJCQ0RBRCxRQUFBQyxPQUFBLDZCQ0FBRCxRQUFBQyxPQUFBLDhCQUNBLFlBQ0Esc0JDRkFELFFBQUFDLE9BQUEsMkJBQ0EsWUFDQSx3QkFDQSxrQ0FDQSx5QkNKQSxJQUFBTSxpQkFBQUEsbUJBQ0FBLGlCQUFBQyxZQUFBUixRQUFBQyxPQUFBLGtDQUVBRCxRQUFBQyxPQUFBLG1CQUNBLGFBQ0EsYUFDQSxZQUNBLG9CQUNBLGNBQ0EsZUFDQSw0QkFDQSx3QkFDQSxzQkFDQSw2QkFDQSx1QkFDQSwwQkFDQSxnQ0FHQVAsT0FBQSxTQUFBZSxFQUFBQyxHQUNBQSxFQUFBQyxVQUFBLGlCQUdBQyxJQUFBLGNBR0FDLFdBQUEsV0FBQSxTQUFBLFlBQUEsU0FBQUMsRUFBQUMsR0FDQUQsRUFBQUUsSUFBQSxzQkFBQSxTQUFBQyxFQUFBQyxFQUFB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LFFBQUE3SCxHQUFBLE9BQ0E4SCxZQUFBMUwsa0JBRUE2RixNQUNBdUQsT0FBQSxPQUNBbEcsSUFBQXNJLEVBQUEsVUFDQUUsWUFBQTFMLGtCQUVBMkwsVUFDQXZDLE9BQUEsU0FDQWxHLElBQUFzSSxFQUFBLGNBQ0FDLFFBQUE3SCxHQUFBLE9BQ0E4SCxZQUFBMUwsd0JBTUFrTCxtQkFBQUUsU0FBQSxVQUFBLFdBQ0FDLEtBQUFDLE1BQUEsWUFBQSxTQUFBQyxHQUNBLEdBQUFDLEdBQUFMLGNBQUEsVUFDQSxPQUFBSSxHQUFBQyxNQUNBN0gsS0FDQXlGLE9BQUEsTUFDQWxHLElBQUFzSSxFQUFBLE9BQ0FDLFFBQUE3SCxHQUFBLFFBRUFrQyxRQUNBc0QsT0FBQSxNQUNBbEcsSUFBQXNJLEVBQUEsY0FDQUMsUUFBQTdILEdBQUEsT0FDQThILFlBQUExTCxrQkFFQTZGLE1BQ0F1RCxPQUFBLE9BQ0FsRyxJQUFBc0ksRUFBQSxXQUVBRyxVQUNBdkMsT0FBQSxTQUNBbEcsSUFBQXNJLEVBQUEsY0FDQUMsUUFBQTdILEdBQUEsT0FDQThILFlBQUExTCxrQkFFQTZLLE9BQ0F6QixPQUFBLE9BQ0E5SSxTQUFBc0wsZUFBQSxxQ0FDQTFJLElBQUFpSSxjQUFBLGdDQUNBVSxpQkFBQSxTQUFBN0osRUFBQThKLEdBRUEsR0FBQUMsS0FDQSxLQUFBLEdBQUFDLEtBQUFoSyxHQUNBK0osRUFBQXhKLEtBQUEwSixtQkFBQUQsR0FBQSxJQUFBQyxtQkFBQWpLLEVBQUFnSyxJQUNBLE9BQUFELEdBQUFHLEtBQUEsYUFPQWhCLG1CQUFBRSxTQUFBLFlBQUEsV0FDQUMsS0FBQUMsTUFBQSxZQUFBLFNBQUFDLEdBQ0EsR0FBQUMsR0FBQUwsY0FBQSxZQUNBLE9BQUFJLEdBQUFDIiwiZmlsZSI6Imp1Z2VuZHN0YWR0cGxhbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIganVnZW5kc3RhZHRwbGFuQXBpID0gYW5ndWxhci5tb2R1bGUoJ2p1Z2VuZHN0YWR0cGxhbi5hcGknLCBbJ25nUmVzb3VyY2UnXSk7XG5cbmZ1bmN0aW9uIExvZ2luSW50ZXJjZXB0b3IoJHdpbmRvdyl7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVxdWVzdDogZnVuY3Rpb24oY29uZmlnKSB7XG4gICAgICAgICAgICBpZiAoJHdpbmRvdy5sb2NhbFN0b3JhZ2UudG9rZW4pIHtcbiAgICAgICAgICAgICAgICBjb25maWcuaGVhZGVycy5BdXRob3JpemF0aW9uID0gJ0JlYXJlciAnICsgJHdpbmRvdy5sb2NhbFN0b3JhZ2UudG9rZW47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBjb25maWc7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbnZhciBiYWNrZW5kUHJlZml4ID0gJ2h0dHA6Ly9hcGkuanVnZW5kc3RhZHRwbGFuLmRldic7XG5cbmp1Z2VuZHN0YWR0cGxhbkFwaS5wcm92aWRlcignUGluJywgZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kZ2V0ID0gWyckcmVzb3VyY2UnLCBmdW5jdGlvbiAoJHJlc291cmNlKSB7XG4gICAgICAgIHZhciBiYWNrZW5kVXJsID0gYmFja2VuZFByZWZpeCArICcvcGlucyc7XG4gICAgICAgIHJldHVybiAkcmVzb3VyY2UoYmFja2VuZFVybCwge30sIHtcbiAgICAgICAgICAgIGdldDoge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgdXJsOiBiYWNrZW5kVXJsICsgJy86aWQnLFxuICAgICAgICAgICAgICAgIHBhcmFtczogeyBpZDonQGlkJ31cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1cGRhdGU6IHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICAgICAgICAgIHVybDogYmFja2VuZFVybCArICcvdXBkYXRlLzppZCcsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiB7IGlkOidAaWQnfSxcbiAgICAgICAgICAgICAgICBpbnRlcmNlcHRvcjogTG9naW5JbnRlcmNlcHRvclxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNhdmU6IHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICB1cmw6IGJhY2tlbmRVcmwgKyAnL2NyZWF0ZScsXG4gICAgICAgICAgICAgICAgaW50ZXJjZXB0b3I6IExvZ2luSW50ZXJjZXB0b3JcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZWxldGU6IHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICAgICAgICAgIHVybDogYmFja2VuZFVybCArICcvZGVsZXRlLzppZCcsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiB7IGlkOidAaWQnfSxcbiAgICAgICAgICAgICAgICBpbnRlcmNlcHRvcjogTG9naW5JbnRlcmNlcHRvclxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XTtcbn0pO1xuXG5qdWdlbmRzdGFkdHBsYW5BcGkucHJvdmlkZXIoJ1RyYWVnZXInLCBmdW5jdGlvbigpIHtcbiAgICB0aGlzLiRnZXQgPSBbJyRyZXNvdXJjZScsIGZ1bmN0aW9uICgkcmVzb3VyY2UpIHtcbiAgICAgICAgdmFyIGJhY2tlbmRVcmwgPSBiYWNrZW5kUHJlZml4ICsgJy90cmFlZ2VyJztcbiAgICAgICAgcmV0dXJuICRyZXNvdXJjZShiYWNrZW5kVXJsLCB7fSwge1xuICAgICAgICAgICAgZ2V0OiB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICB1cmw6IGJhY2tlbmRVcmwgKyAnLzppZCcsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiB7IGlkOidAaWQnfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHVwZGF0ZToge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgICAgICAgICAgdXJsOiBiYWNrZW5kVXJsICsgJy91cGRhdGUvOmlkJyxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHsgaWQ6J0BpZCd9LFxuICAgICAgICAgICAgICAgIGludGVyY2VwdG9yOiBMb2dpbkludGVyY2VwdG9yXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2F2ZToge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIHVybDogYmFja2VuZFVybCArICcvY3JlYXRlJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlbGV0ZToge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgICAgICAgICAgdXJsOiBiYWNrZW5kVXJsICsgJy9kZWxldGUvOmlkJyxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHsgaWQ6J0BpZCd9LFxuICAgICAgICAgICAgICAgIGludGVyY2VwdG9yOiBMb2dpbkludGVyY2VwdG9yXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbG9naW46IHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnfSxcbiAgICAgICAgICAgICAgICB1cmw6IGJhY2tlbmRQcmVmaXggKyAnL2F1dGhlbnRpY2F0aW9uL3RyYWVnZXJfY2hlY2snLFxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybVJlcXVlc3Q6IGZ1bmN0aW9uIChkYXRhLCBoZWFkZXJzR2V0dGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRyYW5zZm9ybSBKU09OIGludG8gcmVndWxhciBmb3JtIHZhbHVlc1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3RyID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGQgaW4gZGF0YSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ci5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChkKSArIFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGRhdGFbZF0pKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0ci5qb2luKFwiJlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1dO1xufSk7XG5cbmp1Z2VuZHN0YWR0cGxhbkFwaS5wcm92aWRlcignS2F0ZWdvcmllJywgZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kZ2V0ID0gWyckcmVzb3VyY2UnLCBmdW5jdGlvbiAoJHJlc291cmNlKSB7XG4gICAgICAgIHZhciBiYWNrZW5kVXJsID0gYmFja2VuZFByZWZpeCArICcva2F0ZWdvcmllJztcbiAgICAgICAgcmV0dXJuICRyZXNvdXJjZShiYWNrZW5kVXJsKTtcbiAgICB9XTtcbn0pOyIsInZhciBqdWdlbmRzdGFkdHBsYW5Mb2dpbiA9IGFuZ3VsYXIubW9kdWxlKCdqdWdlbmRzdGFkdHBsYW4ubG9naW4nLCBbXSk7XG5cbmp1Z2VuZHN0YWR0cGxhbkxvZ2luLnNlcnZpY2UoJ0xvZ2luU2VydmljZScsIGZ1bmN0aW9uKCkge1xuICAgIHZhciBhdXRoZW50aWNhdGVkID0gZmFsc2U7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBpc0xvZ2dlZEluOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gYXV0aGVudGljYXRlZDtcbiAgICAgICAgfSxcblxuICAgICAgICBzZXRMb2dnZWRJbjogZnVuY3Rpb24gKGxvZ2dlZEluKSB7XG4gICAgICAgICAgICBhdXRoZW50aWNhdGVkID0gbG9nZ2VkSW47XG4gICAgICAgIH1cbiAgICB9XG59KTsiLCJhbmd1bGFyLm1vZHVsZSggJ2p1Z2VuZHN0YWR0cGxhbi5hbnNwcmVjaHBhcnRuZXInLCBbXG5dKTsiLCJhbmd1bGFyLm1vZHVsZSggJ2p1Z2VuZHN0YWR0cGxhbi5saW5rcycsIFtcbl0pOyIsImFuZ3VsYXIubW9kdWxlKCAnanVnZW5kc3RhZHRwbGFuLnBpbnMnLCBbXG4gICd1aS5yb3V0ZXInLCAnanVnZW5kc3RhZHRwbGFuLmxpbmtzJywgJ2p1Z2VuZHN0YWR0cGxhbi5hbnNwcmVjaHBhcnRuZXInLCAnanVnZW5kc3RhZHRwbGFuLnRlcm1pbidcbl0pOyIsImFuZ3VsYXIubW9kdWxlKCAnanVnZW5kc3RhZHRwbGFuLnRlcm1pbicsIFtcbl0pOyIsImFuZ3VsYXIubW9kdWxlKCAnanVnZW5kc3RhZHRwbGFuLnN0YXJ0c2VpdGUnLCBbXG4gICd1aS5yb3V0ZXInLFxuICAnbGVhZmxldC1kaXJlY3RpdmUnXG5dKTsiLCJhbmd1bGFyLm1vZHVsZSggJ2p1Z2VuZHN0YWR0cGxhbi50cmFlZ2VyJywgW1xuICAndWkucm91dGVyJyxcbiAgJ2p1Z2VuZHN0YWR0cGxhbi5saW5rcycsXG4gICdqdWdlbmRzdGFkdHBsYW4uYW5zcHJlY2hwYXJ0bmVyJyxcbiAgJ2p1Z2VuZHN0YWR0cGxhbi5sb2dpbidcbl0pOyIsInZhciBKdWdlbmRzdGFkdHBsYW4gPSBKdWdlbmRzdGFkdHBsYW4gfHwge307XG5KdWdlbmRzdGFkdHBsYW4uQ29udHJvbGxlcnMgPSBhbmd1bGFyLm1vZHVsZSgnanVnZW5kc3RhZHRwbGFuLmNvbnRyb2xsZXJzJywgW10pO1xuXG5hbmd1bGFyLm1vZHVsZSggJ2p1Z2VuZHN0YWR0cGxhbicsIFtcbiAgJ25nUmVzb3VyY2UnLFxuICAnbmdTYW5pdGl6ZScsXG4gICd1aS5yb3V0ZXInLFxuICAnbGVhZmxldC1kaXJlY3RpdmUnLFxuICAndGV4dEFuZ3VsYXInLFxuICAnbmdGaWxlVXBsb2FkJyxcbiAgJ2p1Z2VuZHN0YWR0cGxhbi50ZW1wbGF0ZXMnLFxuICAnanVnZW5kc3RhZHRwbGFuLmxvZ2luJyxcbiAgJ2p1Z2VuZHN0YWR0cGxhbi5hcGknLFxuICAnanVnZW5kc3RhZHRwbGFuLnN0YXJ0c2VpdGUnLFxuICAnanVnZW5kc3RhZHRwbGFuLnBpbnMnLFxuICAnanVnZW5kc3RhZHRwbGFuLnRyYWVnZXInLFxuICAnanVnZW5kc3RhZHRwbGFuLmNvbnRyb2xsZXJzJ1xuXSlcblxuLmNvbmZpZyggZnVuY3Rpb24gbXlBcHBDb25maWcgKCAkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyICkge1xuICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCAnL3N0YXJ0c2VpdGUnICk7XG59KVxuXG4ucnVuKCBmdW5jdGlvbiBydW4gKCkge1xufSlcblxuLmNvbnRyb2xsZXIoICdBcHBDdHJsJywgWyAnJHNjb3BlJywgJyRsb2NhdGlvbicsIGZ1bmN0aW9uIEFwcEN0cmwoICRzY29wZSwgJGxvY2F0aW9uICl7XG4gICRzY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbihldmVudCwgdG9TdGF0ZSwgdG9QYXJhbXMsIGZyb21TdGF0ZSwgZnJvbVBhcmFtcyl7XG4gICAgaWYgKCBhbmd1bGFyLmlzRGVmaW5lZCggdG9TdGF0ZS5kYXRhLnBhZ2VUaXRsZSApICkge1xuICAgICAgJHNjb3BlLnBhZ2VUaXRsZSA9IHRvU3RhdGUuZGF0YS5wYWdlVGl0bGUgKyAnIHwgSnVnZW5kc3RhZHRwbGFuJyA7XG4gICAgfVxuICB9KTtcbn1dKVxuXG47IiwiSnVnZW5kc3RhZHRwbGFuLkNvbnRyb2xsZXJzLmNvbnRyb2xsZXIoICdBbnNwcmVjaHBhcnRuZXJGb3JtQ29udHJvbGxlcicsIFsgJyRzY29wZScsXG4gICAgZnVuY3Rpb24oJHNjb3BlKSB7XG5cbiAgICAgICAgLy8gQW5zcHJlY2hwYXJ0bmVyXG4gICAgICAgICRzY29wZS5uZXdBbnNwcmVjaHBhcnRuZXIgPSB7fTtcbiAgICAgICAgJHNjb3BlLmFkZEFuc3ByZWNocGFydG5lciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCRzY29wZS5tb2RlbC5hbnNwcmVjaHBhcnRuZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICRzY29wZS5tb2RlbC5hbnNwcmVjaHBhcnRuZXIgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRzY29wZS5tb2RlbC5hbnNwcmVjaHBhcnRuZXIucHVzaCgkc2NvcGUubmV3QW5zcHJlY2hwYXJ0bmVyKTtcbiAgICAgICAgICAgICRzY29wZS5uZXdBbnNwcmVjaHBhcnRuZXIgPSB7fTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuaXNBbnNwcmVjaHBhcnRuZXJWYWxpZCA9IGZ1bmN0aW9uKGFuc3ByZWNocGFydG5lcikge1xuICAgICAgICAgICAgaWYgKGFuc3ByZWNocGFydG5lci5uYW1lID09PSB1bmRlZmluZWQgfHwgYW5zcHJlY2hwYXJ0bmVyLm5hbWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChhbnNwcmVjaHBhcnRuZXIuZW1haWwgPT09IHVuZGVmaW5lZCB8fCBhbnNwcmVjaHBhcnRuZXIuZW1haWwubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH07XG5cbiAgICB9XSk7IiwiSnVnZW5kc3RhZHRwbGFuLkNvbnRyb2xsZXJzLmNvbnRyb2xsZXIoICdMaW5rc0Zvcm1Db250cm9sbGVyJywgWyAnJHNjb3BlJyxcbiAgICBmdW5jdGlvbigkc2NvcGUpIHtcblxuICAgICAgICAvLyBMaW5rc1xuICAgICAgICAkc2NvcGUubmV3TGluayA9IHt9O1xuICAgICAgICAkc2NvcGUuYWRkTGluayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCRzY29wZS5tb2RlbC5saW5rcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLm1vZGVsLmxpbmtzID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkc2NvcGUubW9kZWwubGlua3MucHVzaCgkc2NvcGUubmV3TGluayk7XG4gICAgICAgICAgICAkc2NvcGUubmV3TGluayA9IHt9O1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5pc0xpbmtWYWxpZCA9IGZ1bmN0aW9uKGxpbmspIHtcbiAgICAgICAgICAgIGlmIChsaW5rLnRpdGVsID09PSB1bmRlZmluZWQgfHwgbGluay50aXRlbC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxpbmsudXJsID09PSB1bmRlZmluZWQgfHwgbGluay51cmwubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH07XG5cbiAgICB9XSk7IiwiYW5ndWxhci5tb2R1bGUoJ2p1Z2VuZHN0YWR0cGxhbi5waW5zJykuY29uZmlnKGZ1bmN0aW9uIGNvbmZpZyggJHN0YXRlUHJvdmlkZXIgKSB7XG4gIFxuICAkc3RhdGVQcm92aWRlci5zdGF0ZSggJ0RldGFpbDogUGluJywge1xuICAgIHVybDogJy9waW4ve2lkOlswLTldK30nLFxuICAgIHZpZXdzOiB7XG4gICAgICBcIm1haW5cIjoge1xuICAgICAgICBjb250cm9sbGVyOiAnUGluRGV0YWlsQ29udHJvbGxlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL3BpbnMvdmlld3MvZGV0YWlsLnRwbC5odG1sJ1xuICAgICAgfVxuICAgIH0sXG4gICAgcmVzb2x2ZToge1xuICAgICAgcGluRGV0YWlsOiBbICckc3RhdGVQYXJhbXMnLCAnUGluJywgZnVuY3Rpb24oJHN0YXRlUGFyYW1zLCBQaW4pIHtcbiAgICAgICAgcmV0dXJuIFBpbi5nZXQoe30se2lkOiAkc3RhdGVQYXJhbXMuaWR9KTtcbiAgICAgIH1dXG4gICAgfSxcbiAgICBkYXRhOnsgcGFnZVRpdGxlOiAnUGluJyB9XG4gIH0pO1xuXG59KTtcblxuSnVnZW5kc3RhZHRwbGFuLkNvbnRyb2xsZXJzLmNvbnRyb2xsZXIoICdQaW5EZXRhaWxDb250cm9sbGVyJywgWyAnJHNjb3BlJywgJ3BpbkRldGFpbCcsIGZ1bmN0aW9uIFBpbkRldGFpbENvbnRyb2xsZXIoICRzY29wZSwgcGluRGV0YWlsICkge1xuICAgICRzY29wZS5tYXJrZXJzID0gW107XG4gICAgJHNjb3BlLmNlbnRlciA9IHtcbiAgICAgICAgbGF0OiA1MC43MzI4MjkyNDY3MjYsXG4gICAgICAgIGxuZzogNy4wOTM3MDA0MDkwMTE3LFxuICAgICAgICB6b29tOiAxM1xuICAgIH07XG5cbiAgICBwaW5EZXRhaWwuJHByb21pc2UudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5waW4gPSBwaW5EZXRhaWw7XG5cbiAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKCRzY29wZSwge1xuICAgICAgICAgICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFdoZWVsWm9vbTogZmFsc2VcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJHNjb3BlLmNlbnRlciA9IHtcbiAgICAgICAgICAgICAgICBsYXQ6IHBpbkRldGFpbC5sYXRpdHVkZSxcbiAgICAgICAgICAgICAgICBsbmc6IHBpbkRldGFpbC5sb25naXR1ZGUsXG4gICAgICAgICAgICAgICAgem9vbTogMTVcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBtYXJrZXIgPSB7XG4gICAgICAgICAgICAgICAgbGF0OiBwaW5EZXRhaWwubGF0aXR1ZGUsXG4gICAgICAgICAgICAgICAgbG5nOiBwaW5EZXRhaWwubG9uZ2l0dWRlLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBwaW5EZXRhaWwudGl0ZWwsXG4gICAgICAgICAgICAgICAgZm9jdXM6IHRydWUsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJzxoMz4nICsgcGluRGV0YWlsLnRpdGVsICsgJzwvaDM+JyArIHBpbkRldGFpbC5iZXNjaHJlaWJ1bmcsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgJHNjb3BlLm1hcmtlcnMucHVzaChtYXJrZXIpO1xuICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKCRzY29wZSwge1xuICAgICAgICAgICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFdoZWVsWm9vbTogZmFsc2VcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICk7XG59XSk7IiwiYW5ndWxhci5tb2R1bGUoJ2p1Z2VuZHN0YWR0cGxhbi5waW5zJykuY29uZmlnKGZ1bmN0aW9uIGNvbmZpZyggJHN0YXRlUHJvdmlkZXIgKSB7XG5cbiAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSggJ0Zvcm06IFBpbicsIHtcbiAgICAgICAgdXJsOiAnL3Bpbi9jcmVhdGUnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICAgXCJtYWluXCI6IHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnUGluRm9ybUNvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL3BpbnMvdmlld3MvZm9ybS50cGwuaHRtbCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGF0YTp7IHBhZ2VUaXRsZTogJ1BpbiBlcnN0ZWxsZW4nIH1cbiAgICB9KTtcblxufSk7XG5cbkp1Z2VuZHN0YWR0cGxhbi5Db250cm9sbGVycy5jb250cm9sbGVyKCAnUGluRm9ybUNvbnRyb2xsZXInLCBbICckc2NvcGUnLCAnJGxvY2F0aW9uJywgJ1BpbicsICdUcmFlZ2VyJywgJ0thdGVnb3JpZScsIGZ1bmN0aW9uIFBpbkZvcm1Db250cm9sbGVyKCAkc2NvcGUsICRsb2NhdGlvbiwgUGluLCBUcmFlZ2VyLCBLYXRlZ29yaWUgKSB7XG4gICAgJHNjb3BlLmthdGVnb3JpZW4gPSBLYXRlZ29yaWUucXVlcnkoKTtcbiAgICAkc2NvcGUucGluID0gbmV3IFBpbigpO1xuICAgICRzY29wZS5waW5zID0gUGluLnF1ZXJ5KCk7XG4gICAgJHNjb3BlLnRyYWVnZXJzID0gVHJhZWdlci5xdWVyeSgpO1xuXG4gICAgYW5ndWxhci5leHRlbmQoJHNjb3BlLCB7XG4gICAgICAgIGNlbnRlcjoge1xuICAgICAgICAgICAgbGF0OiA1MC43MzI4MjkyNDY3MjYsXG4gICAgICAgICAgICBsbmc6IDcuMDkzNzAwNDA5MDExNyxcbiAgICAgICAgICAgIHpvb206IDEzXG4gICAgICAgIH0sXG4gICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICBzY3JvbGxXaGVlbFpvb206IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIGV2ZW50czoge31cbiAgICB9KTtcblxuICAgICRzY29wZS5waW4ubWFya2VycyA9IFtdO1xuICAgICRzY29wZS4kb24oXCJsZWFmbGV0RGlyZWN0aXZlTWFwLmNsaWNrXCIsIGZ1bmN0aW9uKGV2ZW50LCBhcmdzKXtcbiAgICAgICAgdmFyIGxlYWZFdmVudCA9IGFyZ3MubGVhZmxldEV2ZW50O1xuXG4gICAgICAgICRzY29wZS5waW4ubWFya2Vyc1swXSA9IHtcbiAgICAgICAgICAgIGxhdDogbGVhZkV2ZW50LmxhdGxuZy5sYXQsXG4gICAgICAgICAgICBsbmc6IGxlYWZFdmVudC5sYXRsbmcubG5nLFxuICAgICAgICAgICAgZHJhZ2dhYmxlOiB0cnVlLFxuICAgICAgICAgICAgZm9jdXM6IHRydWVcbiAgICAgICAgfTtcbiAgICB9KTtcblxuICAgICRzY29wZS5uZXdQaW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJHNjb3BlLnBpbiA9IG5ldyBQaW4oKTtcbiAgICAgICAgJHNjb3BlLnBpbi5tYXJrZXJzID0gW107XG4gICAgICAgICRzY29wZS5lZGl0aW5nID0gZmFsc2U7XG4gICAgfTtcblxuICAgICRzY29wZS5zYXZlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkc2NvcGUucGluLmlkKSB7XG4gICAgICAgICAgICBQaW4udXBkYXRlKCRzY29wZS5waW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJHNjb3BlLnBpbi4kc2F2ZSgpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUucGlucy5wdXNoKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgICRzY29wZS5uZXdQaW4oKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNldEFjdGl2ZVBpbiA9IGZ1bmN0aW9uKHBpbikge1xuICAgICAgICAkc2NvcGUucGluID0gcGluO1xuICAgICAgICAkc2NvcGUucGluLm1hcmtlcnMgPSBbXTtcbiAgICAgICAgaWYgKHBpbi5sb25naXR1ZGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgJHNjb3BlLnBpbi5tYXJrZXJzWzBdID0ge1xuICAgICAgICAgICAgICAgIGxhdDogcGluLmxhdGl0dWRlLFxuICAgICAgICAgICAgICAgIGxuZzogcGluLmxvbmdpdHVkZSxcbiAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgZm9jdXM6IHRydWVcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgJHNjb3BlLmVkaXRpbmcgPSB0cnVlO1xuICAgIH07XG5cbiAgICAkc2NvcGUucmVtb3ZlID0gZnVuY3Rpb24ocGluKSB7XG4gICAgICAgIFBpbi5kZWxldGUocGluLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9ICRzY29wZS5waW5zLmluZGV4T2YocGluKTtcbiAgICAgICAgICAgIGlmIChpbmRleCAhPSAtMSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5waW5zLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cblxuICAgIC8vIEJhcnJpZXJlZnJlaWhlaXRzZ3JhZGVcbiAgICAkc2NvcGUuYmFycmllcmVmcmVpaGVpdHNncmFkZSA9IFsgJ0d1dCcsICdUZWlsd2Vpc2UnLCAnTmljaHQgYmFycmllcmVmcmVpJyBdO1xuXG5cbiAgICAvLyBLb3N0ZW5hcnRlblxuICAgICRzY29wZS5rb3N0ZW5hcnRlbiA9IFsgJ0tvc3RlbmxvcycsICdLb3N0ZW5wZmxpY2h0aWcnIF07XG5cblxuICAgIC8vIE1pbmRlc3RhbHRlclxuICAgICRzY29wZS5taW5kZXN0YWx0ZXJzID0gWyAnYWIgMTInLCAnYWIgMTYnLCAnYWIgMTgnLCAnYWIgMjEnIF07XG5cblxuXG59XSk7IiwiYW5ndWxhci5tb2R1bGUoJ2p1Z2VuZHN0YWR0cGxhbi5waW5zJykuY29uZmlnKGZ1bmN0aW9uIGNvbmZpZyggJHN0YXRlUHJvdmlkZXIgKSB7XG4gIFxuICAkc3RhdGVQcm92aWRlci5zdGF0ZSggJ0xpc3RlOiBQaW4nLCB7XG4gICAgdXJsOiAnL3BpbnMnLFxuICAgIHZpZXdzOiB7XG4gICAgICBcIm1haW5cIjoge1xuICAgICAgICBjb250cm9sbGVyOiAnUGluc0NvbnRyb2xsZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9waW5zL3ZpZXdzL2xpc3QudHBsLmh0bWwnXG4gICAgICB9XG4gICAgfSxcbiAgICBkYXRhOnsgcGFnZVRpdGxlOiAnUGlucycgfVxuICB9KTtcblxufSk7XG5cbkp1Z2VuZHN0YWR0cGxhbi5Db250cm9sbGVycy5jb250cm9sbGVyKCAnUGluc0NvbnRyb2xsZXInLCBbICckc2NvcGUnLCAnJGxvY2F0aW9uJywgJ1BpbicsIGZ1bmN0aW9uIFBpbnNDb250cm9sbGVyKCAkc2NvcGUsICRsb2NhdGlvbiwgUGluICkge1xuICAgICRzY29wZS5waW5zID0gUGluLnF1ZXJ5KCk7XG5cbiAgICAkc2NvcGUudmlld1BpbiA9IGZ1bmN0aW9uIChwaW4pIHtcbiAgICAgICRsb2NhdGlvbi5wYXRoKCcvcGluLycrcGluLmlkKTtcbiAgICB9O1xuXG59XSk7IiwiSnVnZW5kc3RhZHRwbGFuLkNvbnRyb2xsZXJzLmNvbnRyb2xsZXIoICdUZXJtaW5Gb3JtQ29udHJvbGxlcicsIFsgJyRzY29wZScsXG4gICAgZnVuY3Rpb24oJHNjb3BlKSB7XG5cbiAgICAgICAgLy8gV29jaGVudGFnZVxuICAgICAgICAkc2NvcGUud29jaGVudGFnZSA9IFsgJ01vbnRhZycsICdEaWVuc3RhZycsICdNaXR0d29jaCcsICdEb25uZXJzdGFnJywgJ0ZyZWl0YWcnLCAnU2Ftc3RhZycsICdTb25udGFnJyBdO1xuXG5cbiAgICAgICAgLy8gVGVybWluXG4gICAgICAgICRzY29wZS5uZXdUZXJtaW4gPSB7fTtcbiAgICAgICAgJHNjb3BlLmFkZFRlcm1pbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCRzY29wZS5waW4udGVybWluZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnBpbi50ZXJtaW5lID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkc2NvcGUucGluLnRlcm1pbmUucHVzaCgkc2NvcGUubmV3VGVybWluKTtcbiAgICAgICAgICAgICRzY29wZS5uZXdUZXJtaW4gPSB7fTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuaXNUZXJtaW5WYWxpZCA9IGZ1bmN0aW9uKHRlcm1pbikge1xuICAgICAgICAgICAgaWYgKHRlcm1pbi5iZWdpbm4gPT09IHVuZGVmaW5lZCB8fCB0ZXJtaW4uYmVnaW5uID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0ZXJtaW4uZ2FuenRhZWdpZyAhPT0gdHJ1ZSAmJiAodGVybWluLmJlZ2lubl91aHJ6ZWl0ID09PSB1bmRlZmluZWQgfHwgdGVybWluLmJlZ2lubl91aHJ6ZWl0ID09PSAwKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgLy8gV2llZGVyaG9sdW5nXG4gICAgICAgICRzY29wZS53b2NoZV9kZXNfbW9uYXRzID0gW1xuICAgICAgICAgICAgeyBpZDogMCwgbGFiZWw6ICdKZWRlIFdvY2hlJyB9LFxuICAgICAgICAgICAgeyBpZDogMSwgbGFiZWw6ICdKZWRlIDEuIFdvY2hlJyB9LFxuICAgICAgICAgICAgeyBpZDogMiwgbGFiZWw6ICdKZWRlIDIuIFdvY2hlJyB9LFxuICAgICAgICAgICAgeyBpZDogMywgbGFiZWw6ICdKZWRlIDMuIFdvY2hlJyB9LFxuICAgICAgICAgICAgeyBpZDogNCwgbGFiZWw6ICdKZWRlIDQuIFdvY2hlJyB9LFxuICAgICAgICAgICAgeyBpZDogNSwgbGFiZWw6ICdKZWRlIDUuIFdvY2hlJyB9XG4gICAgICAgIF07XG4gICAgICAgICRzY29wZS5uZXdXaWVkZXJob2x1bmcgPSB7fTtcbiAgICAgICAgJHNjb3BlLmFkZFdpZWRlcmhvbHVuZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCRzY29wZS5uZXdUZXJtaW4ud2llZGVyaG9sdW5nZW4gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICRzY29wZS5uZXdUZXJtaW4ud2llZGVyaG9sdW5nZW4gPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRzY29wZS5uZXdUZXJtaW4ud2llZGVyaG9sdW5nZW4ucHVzaCgkc2NvcGUubmV3V2llZGVyaG9sdW5nKTtcbiAgICAgICAgICAgICRzY29wZS5uZXdXaWVkZXJob2x1bmcgPSB7fTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuaXNXaWVkZXJob2x1bmdWYWxpZCA9IGZ1bmN0aW9uKHdpZWRlcmhvbHVuZykge1xuICAgICAgICAgICAgaWYgKHdpZWRlcmhvbHVuZy53b2NoZW50YWcgPT09IHVuZGVmaW5lZCB8fCB3aWVkZXJob2x1bmcud29jaGVudGFnID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH07XG5cbiAgICB9XSk7IiwiYW5ndWxhci5tb2R1bGUoJ2p1Z2VuZHN0YWR0cGxhbi5zdGFydHNlaXRlJykuY29uZmlnKGZ1bmN0aW9uIGNvbmZpZyggJHN0YXRlUHJvdmlkZXIgKSB7XG4gIFxuICAkc3RhdGVQcm92aWRlci5zdGF0ZSggJ1N0YXJ0c2VpdGUnLCB7XG4gICAgdXJsOiAnL3N0YXJ0c2VpdGUnLFxuICAgIHZpZXdzOiB7XG4gICAgICBcIm1haW5cIjoge1xuICAgICAgICBjb250cm9sbGVyOiAnU3RhcnRzZWl0ZUNvbnRyb2xsZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9zdGFydHNlaXRlL3ZpZXdzL3N0YXJ0c2VpdGUudHBsLmh0bWwnXG4gICAgICB9XG4gICAgfSxcbiAgICBkYXRhOnsgcGFnZVRpdGxlOiAnU3RhcnRzZWl0ZScgfVxuICB9KTtcblxufSk7XG5cbmFuZ3VsYXIubW9kdWxlKCdqdWdlbmRzdGFkdHBsYW4uc3RhcnRzZWl0ZScpLmNvbnRyb2xsZXIoICdTdGFydHNlaXRlQ29udHJvbGxlcicsIFsgJyRzY29wZScsICckbG9jYXRpb24nLCAnUGluJywgZnVuY3Rpb24gU3RhcnRzZWl0ZUNvbnRyb2xsZXIoICRzY29wZSwgJGxvY2F0aW9uLCBQaW4gKSB7XG4gICAgIGFuZ3VsYXIuZXh0ZW5kKCRzY29wZSwge1xuICAgICAgICBjZW50ZXI6IHtcbiAgICAgICAgICAgIGxhdDogNTAuNzMyODI5MjQ2NzI2LFxuICAgICAgICAgICAgbG5nOiA3LjA5MzcwMDQwOTAxMTcsXG4gICAgICAgICAgICB6b29tOiAxM1xuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgc2Nyb2xsV2hlZWxab29tOiBmYWxzZVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAkc2NvcGUubWFya2VycyA9IFtdO1xuXG4gICAgUGluLnF1ZXJ5KGZ1bmN0aW9uKHBpbnMpIHtcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKHBpbnMsIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICAgIGlmIChpdGVtLmxvbmdpdHVkZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1hcmtlciA9IHtcbiAgICAgICAgICAgICAgICAgICAgbGF0OiBpdGVtLmxhdGl0dWRlLFxuICAgICAgICAgICAgICAgICAgICBsbmc6IGl0ZW0ubG9uZ2l0dWRlLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogaXRlbS50aXRlbCxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJzxoMz4nICsgaXRlbS50aXRlbCArICc8L2gzPicgKyBpdGVtLmJlc2NocmVpYnVuZyArICc8c21hbGw+PGEgaHJlZj1cIicgKyAnLyMvcGluLycgKyBpdGVtLmlkICsgJ1wiPk1laHI8L2E+PC9zbWFsbD4nXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAkc2NvcGUubWFya2Vycy5wdXNoKG1hcmtlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG59XSk7IiwiYW5ndWxhci5tb2R1bGUoICdwbHVzT25lJywgW10gKVxuXG4uZGlyZWN0aXZlKCAncGx1c09uZScsIGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIGxpbms6IGZ1bmN0aW9uKCBzY29wZSwgZWxlbWVudCwgYXR0cnMgKSB7XG4gICAgICBnYXBpLnBsdXNvbmUucmVuZGVyKCBlbGVtZW50WzBdLCB7XG4gICAgICAgIFwic2l6ZVwiOiBcIm1lZGl1bVwiLFxuICAgICAgICBcImhyZWZcIjogXCJodHRwOi8vYml0Lmx5L25nQm9pbGVycGxhdGVcIlxuICAgICAgfSk7XG4gICAgfVxuICB9O1xufSlcblxuO1xuXG4iLCJhbmd1bGFyLm1vZHVsZSgnanVnZW5kc3RhZHRwbGFuLnRyYWVnZXInKS5jb25maWcoZnVuY3Rpb24gY29uZmlnKCAkc3RhdGVQcm92aWRlciApIHtcbiAgXG4gICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCAnTGlzdGU6IFRyYWVnZXInLCB7XG4gICAgdXJsOiAnL3RyYWVnZXInLFxuICAgIHZpZXdzOiB7XG4gICAgICBcIm1haW5cIjoge1xuICAgICAgICBjb250cm9sbGVyOiAnVHJhZWdlckNvbnRyb2xsZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC90cmFlZ2VyL3ZpZXdzL2xpc3RlLnRwbC5odG1sJ1xuICAgICAgfVxuICAgIH0sXG4gICAgZGF0YTp7IHBhZ2VUaXRsZTogJ1Ryw6RnZXInIH1cbiAgfSk7XG5cbn0pO1xuXG5KdWdlbmRzdGFkdHBsYW4uQ29udHJvbGxlcnMuY29udHJvbGxlciggJ1RyYWVnZXJDb250cm9sbGVyJywgWyAnJHNjb3BlJywgJyRsb2NhdGlvbicsICdUcmFlZ2VyJywgZnVuY3Rpb24gVHJhZWdlckNvbnRyb2xsZXIoICRzY29wZSwgJGxvY2F0aW9uLCBUcmFlZ2VyICkge1xuICAgICRzY29wZS50cmFlZ2VyID0gVHJhZWdlci5xdWVyeSgpO1xuXG4gICAgJHNjb3BlLnZpZXdUcmFlZ2VyID0gZnVuY3Rpb24gKHRyYWVnZXIpIHtcbiAgICAgICRsb2NhdGlvbi5wYXRoKCcvdHJhZWdlci8nK3RyYWVnZXIuaWQpO1xuICAgIH07XG5cbn1dKTsiLCJhbmd1bGFyLm1vZHVsZSgnanVnZW5kc3RhZHRwbGFuLnRyYWVnZXInKS5jb25maWcoZnVuY3Rpb24gY29uZmlnKCAkc3RhdGVQcm92aWRlciApIHtcbiAgXG4gICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCAnRGV0YWlsOiBUcmFlZ2VyJywge1xuICAgIHVybDogJy90cmFlZ2VyL3tpZDpbMC05XSt9JyxcbiAgICB2aWV3czoge1xuICAgICAgXCJtYWluXCI6IHtcbiAgICAgICAgY29udHJvbGxlcjogJ1RyYWVnZXJEZXRhaWxDb250cm9sbGVyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvdHJhZWdlci92aWV3cy9kZXRhaWwudHBsLmh0bWwnXG4gICAgICB9XG4gICAgfSxcbiAgICByZXNvbHZlOiB7XG4gICAgICB0cmFlZ2VyRGV0YWlsOiBbICckc3RhdGVQYXJhbXMnLCAnVHJhZWdlcicsIGZ1bmN0aW9uKCRzdGF0ZVBhcmFtcywgVHJhZWdlcikge1xuICAgICAgICByZXR1cm4gVHJhZWdlci5nZXQoe30se2lkOiAkc3RhdGVQYXJhbXMuaWR9KTtcbiAgICAgIH1dXG4gICAgfSxcbiAgICBkYXRhOnsgcGFnZVRpdGxlOiAnVHLDpGdlcicgfVxuICB9KTtcblxufSk7XG5cbkp1Z2VuZHN0YWR0cGxhbi5Db250cm9sbGVycy5jb250cm9sbGVyKCAnVHJhZWdlckRldGFpbENvbnRyb2xsZXInLCBbICckc2NvcGUnLCAndHJhZWdlckRldGFpbCcsIGZ1bmN0aW9uIFRyYWVnZXJEZXRhaWxDb250cm9sbGVyKCAkc2NvcGUsIHRyYWVnZXJEZXRhaWwgKSB7XG4gICAgJHNjb3BlLnRyYWVnZXIgPSB0cmFlZ2VyRGV0YWlsO1xuXG4gICAgYW5ndWxhci5leHRlbmQoJHNjb3BlLCB7XG4gICAgICAgIGNlbnRlcjoge1xuICAgICAgICAgICAgbGF0OiA1MC43MzI4MjkyNDY3MjYsXG4gICAgICAgICAgICBsbmc6IDcuMDkzNzAwNDA5MDExNyxcbiAgICAgICAgICAgIHpvb206IDEzXG4gICAgICAgIH0sXG4gICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICBzY3JvbGxXaGVlbFpvb206IGZhbHNlXG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgICRzY29wZS5tYXJrZXJzID0gW107XG5cbiAgICB0cmFlZ2VyRGV0YWlsLiRwcm9taXNlLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh0cmFlZ2VyRGV0YWlsLnBpbnMsIGZ1bmN0aW9uKGl0ZW0sIGtleSkge1xuICAgICAgICAgICAgdmFyIG1hcmtlciA9IHtcbiAgICAgICAgICAgICAgICBsYXQ6IGl0ZW0ubGF0aXR1ZGUsXG4gICAgICAgICAgICAgICAgbG5nOiBpdGVtLmxvbmdpdHVkZSxcbiAgICAgICAgICAgICAgICB0aXRsZTogaXRlbS50aXRlbCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnPGgzPicgKyBpdGVtLnRpdGVsICsgJzwvaDM+JyArIGl0ZW0uYmVzY2hyZWlidW5nICsgJzxzbWFsbD48YSBocmVmPVwiJyArICcvIy9waW4vJytpdGVtLmlkICsgJ1wiPk1laHI8L2E+PC9zbWFsbD4nXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgJHNjb3BlLm1hcmtlcnMucHVzaChtYXJrZXIpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1dKTsiLCJhbmd1bGFyLm1vZHVsZSgnanVnZW5kc3RhZHRwbGFuLnRyYWVnZXInKS5jb25maWcoZnVuY3Rpb24gY29uZmlnKCAkc3RhdGVQcm92aWRlciApIHtcblxuICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCAnRm9ybTogVHJhZWdlcicsIHtcbiAgICAgICAgdXJsOiAnL3RyYWVnZXIvY3JlYXRlJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAgIFwibWFpblwiOiB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1RyYWVnZXJGb3JtQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvdHJhZWdlci92aWV3cy9mb3JtLnRwbC5odG1sJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkYXRhOnsgcGFnZVRpdGxlOiAnVHLDpGdlciBlcnN0ZWxsZW4nIH1cbiAgICB9KTtcblxufSk7XG5cbkp1Z2VuZHN0YWR0cGxhbi5Db250cm9sbGVycy5jb250cm9sbGVyKCAnVHJhZWdlckZvcm1Db250cm9sbGVyJywgWyAnJHNjb3BlJywgJyRsb2NhdGlvbicsICdUcmFlZ2VyJywgJ0thdGVnb3JpZScsICdVcGxvYWQnLCBmdW5jdGlvbiBUcmFlZ2VyRm9ybUNvbnRyb2xsZXIoICRzY29wZSwgJGxvY2F0aW9uLCBUcmFlZ2VyLCBLYXRlZ29yaWUsIFVwbG9hZCApIHtcbiAgICAkc2NvcGUua2F0ZWdvcmllbiA9IEthdGVnb3JpZS5xdWVyeSgpO1xuICAgICRzY29wZS50cmFlZ2VyID0gbmV3IFRyYWVnZXIoKTtcbiAgICAkc2NvcGUudHJhZWdlcnMgPSBUcmFlZ2VyLnF1ZXJ5KCk7XG5cbiAgICAkc2NvcGUubmV3VHJhZWdlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2NvcGUudHJhZWdlciA9IG5ldyBUcmFlZ2VyKCk7XG4gICAgICAgICRzY29wZS5lZGl0aW5nID0gZmFsc2U7XG4gICAgfTtcblxuICAgICRzY29wZS5zYXZlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkc2NvcGUudHJhZWdlci5pZCkge1xuICAgICAgICAgICAgVHJhZWdlci51cGRhdGUoJHNjb3BlLnRyYWVnZXIpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLm5ld1RyYWVnZXIoKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGFsZXJ0KCdFaW4gVHLDpGdlciBtaXQgZGllc2VyIEVtYWlsLUFkcmVzc2UgZXhpc3RpZXJ0IGJlcmVpdHMhJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRzY29wZS50cmFlZ2VyLiRzYXZlKCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICRzY29wZS50cmFlZ2Vycy5wdXNoKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAkc2NvcGUubmV3VHJhZWdlcigpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoJ0VpbiBUcsOkZ2VyIG1pdCBkaWVzZXIgRW1haWwtQWRyZXNzZSBleGlzdGllcnQgYmVyZWl0cyEnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgICRzY29wZS5zZXRBY3RpdmVUcmFlZ2VyID0gZnVuY3Rpb24odHJhZWdlcikge1xuICAgICAgICAkc2NvcGUudHJhZWdlciA9IHRyYWVnZXI7XG4gICAgICAgICRzY29wZS5lZGl0aW5nID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnJlbW92ZSA9IGZ1bmN0aW9uKHRyYWVnZXIpIHtcbiAgICAgICAgVHJhZWdlci5kZWxldGUodHJhZWdlciwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAkc2NvcGUudHJhZWdlcnMuaW5kZXhPZih0cmFlZ2VyKTtcbiAgICAgICAgICAgIGlmIChpbmRleCAhPSAtMSkge1xuICAgICAgICAgICAgICAgICRzY29wZS50cmFlZ2Vycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8gQmlsZGVyXG4gICAgJHNjb3BlLm9uRmlsZVNlbGVjdCA9IGZ1bmN0aW9uKCRmaWxlcykge1xuICAgICAgICB2YXIgZG9VcGxvYWQgPSBmdW5jdGlvbihmaWxlKSB7XG4gICAgICAgICAgICBVcGxvYWQudXBsb2FkKHtcbiAgICAgICAgICAgICAgICB1cmw6ICdhcHBfZGV2LnBocC9pbWcvdXBsb2FkJywgLy91cGxvYWQucGhwIHNjcmlwdCwgbm9kZS5qcyByb3V0ZSwgb3Igc2VydmxldCB1cmxcbiAgICAgICAgICAgICAgICAvLyBtZXRob2Q6ICdQT1NUJyBvciAnUFVUJyxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAvLyBoZWFkZXJzOiB7J2hlYWRlci1rZXknOiAnaGVhZGVyLXZhbHVlJ30sXG4gICAgICAgICAgICAgICAgLy8gd2l0aENyZWRlbnRpYWxzOiB0cnVlLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtteU9iajogJHNjb3BlLm15TW9kZWxPYmp9LFxuICAgICAgICAgICAgICAgIGZpbGU6IGZpbGUgLy8gb3IgbGlzdCBvZiBmaWxlczogJGZpbGVzIGZvciBodG1sNSBvbmx5XG4gICAgICAgICAgICAgICAgLy8gZmlsZU5hbWU6ICdkb2MuanBnJyBvciBbJzEuanBnJywgJzIuanBnJywgLi4uXSAvLyB0byBtb2RpZnkgdGhlIG5hbWUgb2YgdGhlIGZpbGVcbiAgICAgICAgICAgICAgICAvKiBjdXN0b21pemUgZmlsZSBmb3JtRGF0YSBuYW1lICgnQ29udGVudC1EZXNwb3NpdGlvbicpLCBzZXJ2ZXIgc2lkZSBmaWxlIHZhcmlhYmxlIG5hbWUuXG4gICAgICAgICAgICAgICAgIERlZmF1bHQgaXMgJ2ZpbGUnICovXG4gICAgICAgICAgICAgICAgLy9maWxlRm9ybURhdGFOYW1lOiBteUZpbGUsIC8vb3IgYSBsaXN0IG9mIG5hbWVzIGZvciBtdWx0aXBsZSBmaWxlcyAoaHRtbDUpLlxuICAgICAgICAgICAgICAgIC8qIGN1c3RvbWl6ZSBob3cgZGF0YSBpcyBhZGRlZCB0byBmb3JtRGF0YS4gU2VlICM0MCNpc3N1ZWNvbW1lbnQtMjg2MTIwMDAgZm9yIHNhbXBsZSBjb2RlICovXG4gICAgICAgICAgICAgICAgLy9mb3JtRGF0YUFwcGVuZGVyOiBmdW5jdGlvbihmb3JtRGF0YSwga2V5LCB2YWwpe31cbiAgICAgICAgICAgIH0pLnByb2dyZXNzKGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncGVyY2VudDogJyArIHBhcnNlSW50KDEwMC4wICogZXZ0LmxvYWRlZCAvIGV2dC50b3RhbCkpO1xuICAgICAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpIHtcbiAgICAgICAgICAgICAgICAvLyBmaWxlIGlzIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseVxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUudHJhZWdlci5iaWxkZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudHJhZWdlci5iaWxkZXIgPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmlsZS50bXBfbmFtZSA9IGRhdGEuZm9sZGVyO1xuICAgICAgICAgICAgICAgICRzY29wZS50cmFlZ2VyLmJpbGRlci5wdXNoKGZpbGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLy5lcnJvciguLi4pXG4gICAgICAgICAgICAvLy50aGVuKHN1Y2Nlc3MsIGVycm9yLCBwcm9ncmVzcyk7XG4gICAgICAgICAgICAvLy54aHIoZnVuY3Rpb24oeGhyKXt4aHIudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoLi4uKX0pLy8gYWNjZXNzIGFuZCBhdHRhY2ggYW55IGV2ZW50IGxpc3RlbmVyIHRvIFhNTEh0dHBSZXF1ZXN0LlxuICAgICAgICB9O1xuXG4gICAgICAgIC8vJGZpbGVzOiBhbiBhcnJheSBvZiBmaWxlcyBzZWxlY3RlZCwgZWFjaCBmaWxlIGhhcyBuYW1lLCBzaXplLCBhbmQgdHlwZS5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkZmlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBmaWxlID0gJGZpbGVzW2ldO1xuICAgICAgICAgICAgJHNjb3BlLnVwbG9hZCA9IGRvVXBsb2FkKGZpbGUpO1xuICAgICAgICB9XG4gICAgfTtcblxuXG4gICAgLy8gQWRyZXNzZW5cbiAgICAkc2NvcGUubmV3QWRyZXNzZSA9IHt9O1xuICAgICRzY29wZS5hZGRBZHJlc3NlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkc2NvcGUudHJhZWdlci5hZHJlc3NlbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAkc2NvcGUudHJhZWdlci5hZHJlc3NlbiA9IFtdO1xuICAgICAgICB9XG4gICAgICAgICRzY29wZS50cmFlZ2VyLmFkcmVzc2VuLnB1c2goJHNjb3BlLm5ld0FkcmVzc2UpO1xuICAgICAgICAkc2NvcGUubmV3QWRyZXNzZSA9IHt9O1xuICAgIH07XG5cbiAgICAkc2NvcGUuaXNBZHJlc3NlVmFsaWQgPSBmdW5jdGlvbihhZHJlc3NlKSB7XG4gICAgICAgIGlmIChhZHJlc3NlLnN0cmFzc2UgPT09IHVuZGVmaW5lZCB8fCBhZHJlc3NlLnN0cmFzc2UubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAoYWRyZXNzZS5vcnQgPT09IHVuZGVmaW5lZCB8fCBhZHJlc3NlLm9ydC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG59XSk7IiwiYW5ndWxhci5tb2R1bGUoJ2p1Z2VuZHN0YWR0cGxhbi50cmFlZ2VyJykuY29uZmlnKGZ1bmN0aW9uIGNvbmZpZyggJHN0YXRlUHJvdmlkZXIgKSB7XG5cbiAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSggJ0xvZ2luOiBUcmFlZ2VyJywge1xuICAgICAgICB1cmw6ICcvdHJhZWdlci9sb2dpbicsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgICBcIm1haW5cIjoge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdUcmFlZ2VyTG9naW5Db250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC90cmFlZ2VyL3ZpZXdzL2xvZ2luLnRwbC5odG1sJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkYXRhOnsgcGFnZVRpdGxlOiAnRWlubG9nZ2VuJyB9XG4gICAgfSk7XG5cbn0pO1xuXG5KdWdlbmRzdGFkdHBsYW4uQ29udHJvbGxlcnMuY29udHJvbGxlciggJ1RyYWVnZXJMb2dpbkNvbnRyb2xsZXInLCBbICckc2NvcGUnLCAnJHN0YXRlJywgJyR3aW5kb3cnLCAnTG9naW5TZXJ2aWNlJywgJ1RyYWVnZXInLCBmdW5jdGlvbiBUcmFlZ2VyTG9naW5Db250cm9sbGVyKCAkc2NvcGUsICRzdGF0ZSwgJHdpbmRvdywgTG9naW5TZXJ2aWNlLCBUcmFlZ2VyKSB7XG5cbiAgICAkc2NvcGUudHJhZWdlciA9IG5ldyBUcmFlZ2VyKCk7XG5cbiAgICAkc2NvcGUubG9naW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJHNjb3BlLnRyYWVnZXIuJGxvZ2luKClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhbFN0b3JhZ2UudG9rZW4gPSByZXNwb25zZS50b2tlbjtcbiAgICAgICAgICAgICAgICBMb2dpblNlcnZpY2Uuc2V0TG9nZ2VkSW4odHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ1N0YXJ0c2VpdGUnKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0ge1xuICAgICAgICAgICAgICAgICAgICBtc2c6ICdBdXRoZW50aWZpemllcnVuZyBmZWhsZ2VzY2hsYWdlbiEnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgfTtcbn1dKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
